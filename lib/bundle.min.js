!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).main=e()}}(function(){return function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,function(e){var r=t[o][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";function n(){return i(this,void 0,void 0,function*(){const e=yield Promise.all([o.getTables("public"),o.getColumns("public")]);return{tables:e[0],columns:e[1]}})}var i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0});const s=e("./sql"),o=e("pg-promise")({pgNative:!1,extend:e=>{e.getTables=(t=>e.any(s.default.getTables,[t])),e.getColumns=(t=>e.any(s.default.getColumns,[t]))}})("postgres://scoaswzwcohwua:I5YZyVOecjNoHJx-l48p1kvatI@ec2-54-195-240-107.eu-west-1.compute.amazonaws.com:5432/dao1078sdr29iq?&ssl=true&sslfactory=org.postgresql.ssl.NonValidatingFactory");!function(){i(this,void 0,void 0,function*(){try{const e=yield n();console.log(JSON.stringify(e))}catch(e){console.error(e)}})}()},{"./sql":2,"pg-promise":37}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={getTables:Buffer("c2VsZWN0IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgb2JqX2Rlc2NyaXB0aW9uKCh0YWJsZV9zY2hlbWEgfHwgJy4nIHx8IHRhYmxlX25hbWUpOjpyZWdjbGFzcywgJ3BnX2NsYXNzJykgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIHdoZXJlIHRhYmxlX3NjaGVtYSA9ICQxIG9yZGVyIGJ5IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZQ==","base64").toString(),getColumns:Buffer("c2VsZWN0IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgY29sdW1uX25hbWUsIGNvbHVtbl9kZWZhdWx0LCBpc19udWxsYWJsZTo6Ym9vbGVhbiwgZGF0YV90eXBlLCBjb2xfZGVzY3JpcHRpb24oKHRhYmxlX3NjaGVtYSB8fCAnLicgfHwgdGFibGVfbmFtZSk6OnJlZ2NsYXNzLCBvcmRpbmFsX3Bvc2l0aW9uKQpmcm9tIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zCndoZXJlIHRhYmxlX3NjaGVtYSA9ICQxCm9yZGVyIGJ5IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgb3JkaW5hbF9wb3NpdGlvbg==","base64").toString()}},{}],3:[function(e,t,r){function n(e,t){return function(){var r=[].slice.call(arguments),n=e.slice();return n.push.apply(n,r),t.apply(this,n)}}function i(e,t){return function(){var r=[].slice.call(arguments);return r.push.apply(r,e),t.apply(this,r)}}function s(e){return n([].slice.call(arguments,1),e)}function o(e){return i([].slice.call(arguments,1),e)}(r=t.exports=n).pa=i,r.apa=function(e,t,r){return function(){return r.apply(this,e.concat.apply(e,arguments).concat(t))}},r.partial=s,r.partialRight=o,r.curry=function(e){return s(s,e)},r.curryRight=function(e){return s(o,e)}},{}],4:[function(e,t,r){var n=t.exports=function(e){this.size=e||1024,this.buffer=Buffer(this.size+5),this.offset=5,this.headerPosition=0};n.prototype._ensure=function(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=new Buffer(r),t.copy(this.buffer)}},n.prototype.addInt32=function(e){return this._ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this},n.prototype.addInt16=function(e){return this._ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this};var i=function(e,t,r,n){e.write(t,r,n)};3===Buffer.prototype.write.length&&(i=function(e,t,r,n){e.write(t,r)}),n.prototype.addCString=function(e){if(e){var t=Buffer.byteLength(e);this._ensure(t+1),i(this.buffer,e,this.offset,t),this.offset+=t}else this._ensure(1);return this.buffer[this.offset++]=0,this},n.prototype.addChar=function(e){return this._ensure(1),i(this.buffer,e,this.offset,1),this.offset++,this},n.prototype.addString=function(e){e=e||"";var t=Buffer.byteLength(e);return this._ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this},n.prototype.getByteLength=function(){return this.offset-5},n.prototype.add=function(e){return this._ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this},n.prototype.clear=function(){this.offset=5,this.headerPosition=0,this.lastEnd=0},n.prototype.addHeader=function(e,t){var r=this.offset;this.offset=this.headerPosition,this.buffer[this.offset++]=e,this.addInt32(r-(this.headerPosition+1)),this.headerPosition=r,this.offset=r,t||(this._ensure(5),this.offset+=5)},n.prototype.join=function(e){return e&&this.addHeader(e,!0),this.buffer.slice(e?0:5,this.offset)},n.prototype.flush=function(e){var t=this.join(e);return this.clear(),t}},{}],5:[function(e,t,r){function n(e){if(!(this instanceof n))return new n;this._size=e,this._slots=null,this._total=null,e=Math.max(0|+e,1),this._slots=[];for(var t=0;t<e;t+=1)this._slots.push([])}function i(e,t,r){var n=function(){e()?t(n):r()};n()}function s(e){if(!(this instanceof s))return new s(e);if(e.validate&&e.validateAsync)throw new Error("Only one of validate or validateAsync may be specified");e.idleTimeoutMillis=e.idleTimeoutMillis||3e4,e.returnToHead=e.returnToHead||!1,e.refreshIdle=!("refreshIdle"in e)||e.refreshIdle,e.reapInterval=e.reapIntervalMillis||1e3,e.priorityRange=e.priorityRange||1,e.validate=e.validate||function(){return!0},e.max=parseInt(e.max,10),e.min=parseInt(e.min,10),e.max=Math.max(isNaN(e.max)?1:e.max,1),e.min=Math.min(isNaN(e.min)?0:e.min,e.max-1),this._factory=e,this._inUseObjects=[],this._draining=!1,this._waitingClients=new n(e.priorityRange),this._availableObjects=[],this._count=0,this._removeIdleTimer=null,this._removeIdleScheduled=!1,this._ensureMinimum()}n.prototype.size=function(){if(null===this._total){this._total=0;for(var e=0;e<this._size;e+=1)this._total+=this._slots[e].length}return this._total},n.prototype.enqueue=function(e,t){var r;t=t&&0|+t||0,this._total=null,t&&(r=t,(t<0||t>=this._size)&&(t=this._size-1,console.error("invalid priority: "+r+" must be between 0 and "+t))),this._slots[t].push(e)},n.prototype.dequeue=function(e){var t=null;this._total=null;for(var r=0,n=this._slots.length;r<n;r+=1)if(this._slots[r].length){t=this._slots[r].shift();break}return t},s.prototype._log=function(e,t){"function"==typeof this._factory.log?this._factory.log(e,t):this._factory.log&&console.log(t.toUpperCase()+" pool "+this._factory.name+" - "+e)},s.prototype.destroy=function(e){this._count-=1,this._count<0&&(this._count=0),this._availableObjects=this._availableObjects.filter(function(t){return t.obj!==e}),this._inUseObjects=this._inUseObjects.filter(function(t){return t!==e}),this._factory.destroy(e),this._ensureMinimum()},s.prototype._removeIdle=function(){var e,t,r,n,i=[],s=(new Date).getTime();for(this._removeIdleScheduled=!1,e=0,t=this._availableObjects.length;e<t&&this._factory.refreshIdle&&this._count-this._factory.min>i.length;e+=1)s>=(n=this._availableObjects[e].timeout)&&(this._log("removeIdle() destroying obj - now:"+s+" timeout:"+n,"verbose"),i.push(this._availableObjects[e].obj));for(e=0,r=i.length;e<r;e+=1)this.destroy(i[e]);(t=this._availableObjects.length)>0?(this._log("this._availableObjects.length="+t,"verbose"),this._scheduleRemoveIdle()):this._log("removeIdle() all objects removed","verbose")},s.prototype._scheduleRemoveIdle=function(){var e=this;this._removeIdleScheduled||(this._removeIdleScheduled=!0,this._removeIdleTimer=setTimeout(function(){e._removeIdle()},this._factory.reapInterval))},s.prototype._dispense=function(){var e=this,t=null,r=null,n=this._waitingClients.size();if(this._log("dispense() clients="+n+" available="+this._availableObjects.length,"info"),n>0){if(this._factory.validateAsync)return void i(function(){return e._availableObjects.length>0},function(n){e._log("dispense() - reusing obj","verbose"),t=e._availableObjects[0],e._factory.validateAsync(t.obj,function(i){i?(e._availableObjects.shift(),e._inUseObjects.push(t.obj),(r=e._waitingClients.dequeue())(null,t.obj)):(e.destroy(t.obj),n())})},function(){e._count<e._factory.max&&e._createResource()});for(;this._availableObjects.length>0;){if(this._log("dispense() - reusing obj","verbose"),t=this._availableObjects[0],this._factory.validate(t.obj))return this._availableObjects.shift(),this._inUseObjects.push(t.obj),(r=this._waitingClients.dequeue())(null,t.obj);this.destroy(t.obj)}this._count<this._factory.max&&this._createResource()}},s.prototype._createResource=function(){this._count+=1,this._log("createResource() - creating obj - count="+this._count+" min="+this._factory.min+" max="+this._factory.max,"verbose");var e=this;this._factory.create(function(){var t,r,n=e._waitingClients.dequeue();arguments.length>1?(t=arguments[0],r=arguments[1]):(t=arguments[0]instanceof Error?arguments[0]:null,r=arguments[0]instanceof Error?null:arguments[0]),t?(e._count-=1,e._count<0&&(e._count=0),n&&n(t,r),process.nextTick(function(){e._dispense()})):(e._inUseObjects.push(r),n?n(t,r):e.release(r))})},s.prototype._ensureMinimum=function(){var e,t;if(!this._draining&&this._count<this._factory.min)for(t=this._factory.min-this._count,e=0;e<t;e++)this._createResource()},s.prototype.acquire=function(e,t){if(this._draining)throw new Error("pool is draining and cannot accept work");return process.domain&&(e=process.domain.bind(e)),this._waitingClients.enqueue(e,t),this._dispense(),this._count<this._factory.max},s.prototype.borrow=function(e,t){this._log("borrow() is deprecated. use acquire() instead","warn"),this.acquire(e,t)},s.prototype.release=function(e){if(this._availableObjects.some(function(t){return t.obj===e}))this._log("release called twice for the same resource: "+(new Error).stack,"error");else{var t=this._inUseObjects.indexOf(e);if(t<0)this._log("attempt to release an invalid resource: "+(new Error).stack,"error");else{this._inUseObjects.splice(t,1);var r={obj:e,timeout:(new Date).getTime()+this._factory.idleTimeoutMillis};this._factory.returnToHead?this._availableObjects.splice(0,0,r):this._availableObjects.push(r),this._log("timeout: "+r.timeout,"verbose"),this._dispense(),this._scheduleRemoveIdle()}}},s.prototype.returnToPool=function(e){this._log("returnToPool() is deprecated. use release() instead","warn"),this.release(e)},s.prototype.drain=function(e){this._log("draining","info"),this._draining=!0;var t=this,r=function(){t._waitingClients.size()>0?setTimeout(r,100):t._availableObjects.length!==t._count?setTimeout(r,100):e&&e()};r()},s.prototype.destroyAllNow=function(e){this._log("force destroying all objects","info");var t=this._availableObjects;this._availableObjects=[];for(var r=t.shift();null!==r&&void 0!==r;)this.destroy(r.obj),r=t.shift();this._removeIdleScheduled=!1,clearTimeout(this._removeIdleTimer),e&&e()},s.prototype.pooled=function(e,t){var r=this;return function(){var n=arguments,i=n[n.length-1],s="function"==typeof i;r.acquire(function(t,o){if(t)s&&i(t);else{var a=[o].concat(Array.prototype.slice.call(n,0,s?-1:void 0));a.push(function(){r.release(o),s&&i.apply(null,arguments)}),e.apply(null,a)}},t)}},s.prototype.getPoolSize=function(){return this._count},s.prototype.getName=function(){return this._factory.name},s.prototype.availableObjectsCount=function(){return this._availableObjects.length},s.prototype.inUseObjectsCount=function(){return this._inUseObjects.length},s.prototype.waitingClientsCount=function(){return this._waitingClients.size()},s.prototype.getMaxPoolSize=function(){return this._factory.max},s.prototype.getMinPoolSize=function(){return this._factory.min},r.Pool=s},{}],6:[function(e,t,r){"use strict";var n=e("./writer"),i=new n,s=t.exports=new n(!0);Object.defineProperty(s,"local",{get:function(){return new n},enumerable:!0}),Object.defineProperty(s,"global",{get:function(){return console.log=function(){i.log.apply(i,arguments)},console.error=function(){i.error.apply(i,arguments)},console.warn=function(){i.warn.apply(i,arguments)},console.info=function(){i.info.apply(i,arguments)},console.success=function(){i.success.apply(i,arguments)},i},enumerable:!0}),Object.freeze(s)},{"./writer":7}],7:[function(e,t,r){"use strict";function n(e,t,r){return e=r&&"string"==typeof e?e:o.inspect(e),"["+t+"m"+e+"[0m"}function i(e,t,r){return e.isTTY?t.length&&"string"==typeof t[0]?[n(o.format.apply(null,t),r,!0)]:Object.keys(t).map(function(e){return n(t[e],r)}):t}function s(e,t,r){var n=e.color;return n===+n&&n>=0&&n<=256?n:e.bright?r:t}var o=e("util"),a={log:console.log,info:console.info,error:console.error,warn:console.warn};t.exports=function(e){function t(e,t){Object.defineProperty(r[e],"bright",{value:!1,writable:!0}),Object.defineProperty(r[e],"color",{writable:!0}),Object.seal(r[e])}var r=this;this.log=function(){a.log.apply(null,i(process.stdout,arguments,s(r.log,39,97)))},this.error=function(){a.error.apply(null,i(process.stderr,arguments,s(r.error,31,91)))},this.warn=function(){a.warn.apply(null,i(process.stderr,arguments,s(r.warn,33,93)))},this.info=function(){a.info.apply(null,i(process.stdout,arguments,s(r.info,36,96)))},this.success=function(){a.log.apply(null,i(process.stdout,arguments,s(r.success,32,92)))},this.write=function(e,t,r){var n=a.log,s=process.stdout;r&&(n=a.error,s=process.stderr),t!==+t||t<0||t>256?n.apply(null,e):n.apply(null,i(s,e,t))},t("log"),t("error"),t("warn"),t("info"),t("success"),this.setBright=function(e){e=void 0===e||!!e,r.log.bright=e,r.error.bright=e,r.warn.bright=e,r.success.bright=e,r.info.bright=e},e||Object.freeze(this)}},{util:void 0}],8:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,o,a=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)i.call(r,c)&&(a[c]=r[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(r);for(var l=0;l<o.length;l++)s.call(r,o[l])&&(a[o[l]]=r[o[l]])}}return a}},{}],9:[function(e,t,r){var n=e("assert"),i=t.exports=function(e){"number"==typeof e&&(e={headerSize:e}),e=e||{},this.offset=0,this.lastChunk=!1,this.chunk=null,this.chunkLength=0,this.headerSize=e.headerSize||0,this.lengthPadding=e.lengthPadding||0,this.header=null,n(this.headerSize<2,"pre-length header of more than 1 byte length not currently supported")};i.prototype.addChunk=function(e){if(!this.chunk||this.offset===this.chunkLength)return this.chunk=e,this.chunkLength=e.length,void(this.offset=0);var t=e.length,r=this.chunkLength+t;if(r>this.chunk.length){for(var n=2*this.chunk.length;r>=n;)n*=2;var i=new Buffer(n);this.chunk.copy(i),this.chunk=i}e.copy(this.chunk,this.chunkLength),this.chunkLength=r},i.prototype.read=function(){if(this.chunkLength<this.headerSize+4+this.offset)return!1;this.headerSize&&(this.header=this.chunk[this.offset]);var e=this.chunk.readUInt32BE(this.offset+this.headerSize)+this.lengthPadding;if(e>this.chunkLength-(this.offset+4+this.headerSize))return!1;this.offset+=this.headerSize+4;var t=this.chunk.slice(this.offset,this.offset+e);return this.offset+=e,t}},{assert:void 0}],10:[function(e,t,r){"use strict";var n=e("url");t.exports={parse:function(e){var t;if("/"===e.charAt(0))return t=e.split(" "),{host:t[0],database:t[1]};/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/\%25(\d\d)/g,"%$1"));var r=n.parse(e,!0);if(t={},r.query.application_name&&(t.application_name=r.query.application_name),r.query.fallback_application_name&&(t.fallback_application_name=r.query.fallback_application_name),t.port=r.port,"socket:"==r.protocol)return t.host=decodeURI(r.pathname),t.database=r.query.db,t.client_encoding=r.query.encoding,t;t.host=r.hostname;var i=r.pathname;i&&"/"===i.charAt(0)&&(i=r.pathname.slice(1)||null),t.database=i&&decodeURI(i);var s=(r.auth||":").split(":");t.user=s[0],t.password=s.splice(1).join(":");var o=r.query.ssl;return"true"!==o&&"1"!==o||(t.ssl=!0),t}}},{url:void 0}],11:[function(e,t,r){"use strict";function n(e,t){var r=Error.apply(this,arguments);r.name=this.name="SQLParsingError",this.stack=r.stack,this.code=e,this.error=a[e].message,this.position=t,this.message="Error parsing SQL at {line:"+t.line+",col:"+t.column+"}: "+this.error}function i(e){return Array(1+4*e).join(" ")}var s=e("os").EOL,o={unclosedMLC:0,unclosedText:1,unclosedQI:2,multiLineQI:3};Object.freeze(o);var a=[{name:"unclosedMLC",message:"Unclosed multi-line comment."},{name:"unclosedText",message:"Unclosed text block."},{name:"unclosedQI",message:"Unclosed quoted identifier."},{name:"multiLineQI",message:"Multi-line quoted identifiers are not supported."}];(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(e){var t=i((e=e>0?parseInt(e):0)+1);return["SQLParsingError {",t+"code: parsingErrorCode."+a[this.code].name,t+'error: "'+this.error+'"',t+"position: {line: "+this.position.line+", col: "+this.position.column+"}",i(e)+"}"].join(s)},n.prototype.inspect=function(){return this.toString()},t.exports={SQLParsingError:n,parsingErrorCode:o}},{os:void 0}],12:[function(e,t,r){"use strict";var n=e("./parser"),i=e("./error");n.minify.SQLParsingError=i.SQLParsingError,n.minify.parsingErrorCode=i.parsingErrorCode,t.exports=n.minify},{"./error":11,"./parser":13}],13:[function(e,t,r){"use strict";function n(e){for(var t=0,r=0,n=0;t<e.length&&-1!=(t=e.indexOf("\n",t));)t>0&&"\r"===e[t-1]?n++:r++,t++;return r===n?o.EOL:r>n?"\n":"\r\n"}function i(e,t,r){var n=0,i=t,s=0;do{if(-1==(s=e.indexOf(r,s))||t<s+r.length)break;n++,i=t-(s+=r.length)}while(s<t);return{line:n+1,column:i+1}}function s(e){return" "===e||"\t"===e||"\r"===e||"\n"===e}var o=e("os"),a=e("./error"),u=a.parsingErrorCode,c=".,;:()[]=<>+-*/|!?@#";t.exports={minify:function(e,t){function r(){if(y)for(;p<h-1&&s(e[p+1]);)p++}function o(){m&&(f.length&&(f+=" "),m=!1)}function l(t){var r=i(e,p,d);throw new a.SQLParsingError(t,r)}if("string"!=typeof e)throw new TypeError("Input SQL must be a text string.");if(void 0!==t&&"object"!=typeof t)throw new TypeError("Parameter 'options' must be an object.");if(!e.length)return"";var p=0,f="",h=e.length,d=n(e),m=!1,y=t&&t.compress;do{var g=e[p],v=p<h-1?e[p+1]:"";if(s(g)){for(;++p<h&&s(e[p]););p<h&&(m=!0),p--}else if("-"!==g||"-"!==v)if("/"!==g||"*"!==v)if('"'!==g)if("'"!==g)y&&c.indexOf(g)>=0&&(m=!1,r()),o(),f+=g;else{var b=p;do{if((b=e.indexOf("'",b+1))>0){for(var w=b;++w<h&&"'"===e[w];);if((w-b)%2){b=w-1;break}b=w===h?-1:w}}while(b>0);b<0&&l(u.unclosedText),y&&(m=!1),o();var x=e.substr(p,b-p+1),_=x.indexOf(d)>0;_&&(x=x.split(d).map(function(e){return e.replace(/^\s+|\s+$/g,"")}).join("\\n"));var S=x.indexOf("\t")>0;if(_||S){var E=p?e[p-1]:"";if("E"!==E&&"e"!==E){var j=f?f[f.length-1]:"";j&&" "!==j&&c.indexOf(j)<0&&(f+=" "),f+="E"}S&&(x=x.replace(/\t/g,"\\t"))}f+=x,p=b,r()}else(b=e.indexOf('"',p+1))<0&&l(u.unclosedQI),(x=e.substr(p,b-p+1)).indexOf(d)>0&&l(u.multiLineQI),y&&(m=!1),o(),f+=x,p=b,r();else{var P=e.indexOf("*/",p+2);P<0&&l(u.unclosedMLC),p=P+1,r()}else{var O=e.indexOf(d,p+2);if(O<0)break;p=O-1,r()}}while(++p<h);return f},getEOL:n,getIndexPos:i}},{"./error":11,os:void 0}],14:[function(e,t,r){function n(){var e,t,r;if(!this._draining)for(r=this._waitingClients.size(),this._factory.min>0?t=this._factory.min-this._count:r>0&&(t=Math.min(r,this._factory.max-this._count)),e=0;e<t;e++)this._createResource()}var i=e("generic-pool"),s=e("util"),o=e("events").EventEmitter,a=e("object-assign"),u=t.exports=function(t,r){if(!(this instanceof u))return new u(t,r);o.call(this),this.options=a({},t),this.log=this.options.log||function(){},this.Client=this.options.Client||r||e("pg").Client,this.Promise=this.options.Promise||global.Promise,this.options.max=this.options.max||this.options.poolSize||10,this.options.create=this.options.create||this._create.bind(this),this.options.destroy=this.options.destroy||this._destroy.bind(this),this.pool=new i.Pool(this.options),this.pool._ensureMinimum=n,this.onCreate=this.options.onCreate};s.inherits(u,o),u.prototype._promise=function(e,t){if(!e)return new this.Promise(t);t(function(t){process.nextTick(function(){e(null,t)})},function(t){process.nextTick(function(){e(t)})})},u.prototype._promiseNoCallback=function(e,t){return e?t():new this.Promise(t)},u.prototype._destroy=function(e){e._destroying||(e._destroying=!0,e.end())},u.prototype._create=function(e){this.log("connecting new client");var t=new this.Client(this.options);t.on("error",function(e){this.log("connected client error:",e),this.pool.destroy(t),e.client=t,this.emit("error",e,t)}.bind(this)),t.connect(function(r){r?(this.log("client connection error:",r),e(r,null)):(this.log("client connected"),this.emit("connect",t),e(null,t))}.bind(this))},u.prototype.connect=function(e){return this._promiseNoCallback(e,function(t,r){this.log("acquire client begin"),this.pool.acquire(function(n,i){if(n)return this.log("acquire client. error:",n),void(e?e(n,null,function(){}):r(n));this.log("acquire client"),this.emit("acquire",i),i.release=function(e){delete i.release,e?(this.log("destroy client. error:",e),this.pool.destroy(i)):(this.log("release client"),this.pool.release(i))}.bind(this),e?e(null,i,i.release):t(i)}.bind(this))}.bind(this))},u.prototype.take=u.prototype.connect,u.prototype.query=function(e,t,r){return"function"==typeof t&&(r=t,t=void 0),this._promise(r,function(r,n){this.connect(function(i,s,o){if(i)return n(i);s.query(e,t,function(e,t){o(e),e?n(e):r(t)})})}.bind(this))},u.prototype.end=function(e){return this.log("draining pool"),this._promise(e,function(e,t){this.pool.drain(function(){this.log("pool drained, calling destroy all now"),this.pool.destroyAllNow(e)}.bind(this))}.bind(this))}},{events:void 0,"generic-pool":5,"object-assign":8,pg:62,util:void 0}],15:[function(e,t,r){"use strict";class n{constructor(e){if(!e||"object"!=typeof e)throw new TypeError("Adapter requires an api configuration object.");if(this.create=e.create,this.resolve=e.resolve,this.reject=e.reject,this.all=e.all,"function"!=typeof this.create)throw new TypeError("Function 'create' must be specified.");if("function"!=typeof this.resolve)throw new TypeError("Function 'resolve' must be specified.");if("function"!=typeof this.reject)throw new TypeError("Function 'reject' must be specified.");if("function"!=typeof this.all)throw new TypeError("Function 'all' must be specified.")}}t.exports=n},{}],16:[function(e,t,r){"use strict";t.exports=(e=>t=>{const r=e.promise;return function(){const e=t.apply(this,arguments),n=t=>t.done?r.resolve(t.value):r.resolve(t.value).then(t=>n(e.next(t))).catch(t=>n(e.throw(t)));return n(e.next())}})},{}],17:[function(e,t,r){"use strict";class n{constructor(e){this.cn=e.cn,this.dc=e.dc,this.options=e.options,this.db=e.db,this.level=e.level,this.txLevel=e.txLevel,this.parentCtx=null,this.taskCtx=null,this.start=null}connect(e){this.db=e,this.start=new Date}disconnect(){this.db&&(this.db.done(),this.db=null)}clone(){const e=new n(this);return e.parentCtx=this.taskCtx,e}}t.exports=n},{}],18:[function(e,t,r){"use strict";function n(e,t,r){return r.promise((r,n)=>{const i=t.$pool;if(i.pool._draining){t.$destroy();const r=new Error("Connection pool of the database object has been destroyed.");return u.events.error(e.options,r,{dc:e.dc}),void n(r)}i.connect((t,i,c)=>{if(t)u.events.error(e.options,t,{cn:u.utils.getSafeConnection(e.cn),dc:e.dc}),n(t);else{const t=!i.$used;t&&u.utils.addReadProp(i,"$used",!0,!0),i.on("error",s),a(i,e);const n=o(i);r({isFresh:t,client:i,done:()=>{i.end=n,c(),u.events.disconnect(e,i),i.removeListener("error",s)}}),u.events.connect(e,i,t)}})})}function i(e,t){return t.promise((r,n)=>{const i=new t.pgp.pg.Client(e.cn);i.connect(t=>{if(t)u.events.error(e.options,t,{cn:u.utils.getSafeConnection(e.cn),dc:e.dc}),n(t);else{i.on("error",s),a(i,e);const t=o(i);r({isFresh:!0,client:i,done:()=>{i.end=t,i.end(),u.events.disconnect(e,i),i.removeListener("error",s)}}),u.events.connect(e,i,!0)}})})}function s(e){const t=this.$ctx,r=u.utils.getSafeConnection(t.cn);if(u.events.error(t.options,e,{cn:r,dc:t.dc}),t.disconnect(),"function"==typeof t.cnOptions.onLost&&!t.notified){try{t.cnOptions.onLost.call(this,e,{cn:r,dc:t.dc,start:t.start,client:this})}catch(e){u.con.error(e&&e.stack||e)}t.notified=!0}}function o(e){const t=e.end;return e.end=(r=>{u.con.error("Abnormal client.end() call, due to invalid code or failed server connection.\n%s\n",u.utils.getLocalStack(3)),r||t.call(e)}),t}function a(e,t){Object.defineProperty(e,"$ctx",{value:t,writable:!0})}const u={con:e("manakin").local,utils:e("./utils"),events:e("./events")};t.exports=(e=>({pool:(t,r)=>n(t,r,e),direct:t=>i(t,e)}))},{"./events":26,"./utils":51,manakin:6}],19:[function(e,t,r){"use strict";function n(e,t,r){function n(){return new s.Context({cn:e,dc:t,options:r.options})}function o(e,t,r){return"function"==typeof t&&(e=e.then(e=>t.call(r,e))),e}function a(e,t){function n(n,i,o){let l;const p=e.clone();o&&(p.txLevel=p.txLevel>=0?p.txLevel+1:0),p.level=p.level>=0?p.level+1:0,this!==t&&(p.context=this),p.cb=n,void 0!==i&&(l=n,p.cb=i);const f=p.cb;if("function"!=typeof f)return c.reject(new TypeError("Callback function is required for the "+(o?"transaction.":"task.")));void 0===l&&(void 0!==f.tag?l=f.tag:f.name&&(l=f.name));const h=new r.$npm.task.Task(p,l,o,r);return p.taskCtx=h.ctx,a(p,h),p.db?(s.utils.addReadProp(h.ctx,"isFresh",p.db.isFresh),r.$npm.task.execute(p,h,o,r)):r.$npm.connect.pool(p,u).then(e=>(p.connect(e),s.utils.addReadProp(h.ctx,"isFresh",e.isFresh),r.$npm.task.execute(p,h,o,r))).then(e=>(p.disconnect(),e)).catch(e=>(p.disconnect(),c.reject(e)))}t.none=function(e,r){return t.query.call(this,e,r,s.result.none)},t.one=function(e,r,n,i){return o(t.query.call(this,e,r,s.result.one),n,i)},t.many=function(e,r){return t.query.call(this,e,r,s.result.many)},t.oneOrNone=function(e,r,n,i){return o(t.query.call(this,e,r,s.result.one|s.result.none),n,i)},t.manyOrNone=function(e,r){return t.query.call(this,e,r,s.result.many|s.result.none)},t.any=function(e,r){return t.query.call(this,e,r,s.result.any)},t.result=function(e,r,n,i){return o(t.query.call(this,e,r,s.special.cache.resultQuery),n,i)},t.stream=function(e,r){return t.query.call(this,e,r,s.special.cache.streamQuery)},t.func=function(e,r,n){return t.query.call(this,{funcName:e},r,n)},t.proc=function(e,r,n,i){return o(t.func.call(this,e,r,s.result.one|s.result.none),n,i)},t.map=function(e,r,n,i){return t.any.call(this,e,r).then(e=>{const t=e.map(n,i);return s.utils.addReadProp(t,"duration",e.duration,!0),t})},t.each=function(e,r,n,i){return t.any.call(this,e,r).then(e=>(e.forEach(n,i),e))},t.task=function(e,t){return n.call(this,e,t,!1)},t.tx=function(e,t){return n.call(this,e,t,!0)},s.utils.lock(t,!1,e.options),s.events.extend(e.options,t,e.dc),s.utils.lock(t,!0,e.options)}const u=this,c=r.promise,l="string"==typeof e?{connectionString:e}:e;let p=new r.pgp.pg.Pool(l);p.end=p.end.bind(p),p.on("error",i),this.connect=function(e){e=e||{};const t=n();t.cnOptions=e;const i={query:function(e,n,i){if(!t.db)throw new Error("Cannot execute a query on a disconnected client.");return r.$npm.query.call(this,t,e,n,i)},done:()=>{if(!t.db)throw new Error("Cannot invoke done() on a disconnected client.");t.disconnect()}};return(e.direct?r.$npm.connect.direct(t):r.$npm.connect.pool(t,u)).then(e=>(t.connect(e),i.client=e.client,a(t,i),i))},this.query=function(e,t,i){const s=this,o=n();return r.$npm.connect.pool(o,u).then(n=>(o.connect(n),r.$npm.query.call(s,o,e,t,i))).then(e=>(o.disconnect(),e)).catch(e=>(o.disconnect(),c.reject(e)))},s.utils.addReadProp(this,"$config",r,!0),s.utils.addReadProp(this,"$cn",e,!0),s.utils.addReadProp(this,"$dc",t,!0),s.utils.addReadProp(this,"$pool",p,!0),s.utils.addReadProp(this,"$destroy",()=>{p&&(p.pool._draining||p.end(),p.removeListener("error",i),p=null)},!0),a(n(),this),s.dbPool.register(this)}function i(e){const t=e.client.$ctx;s.events.error(t.options,e,{cn:s.utils.getSafeConnection(t.cn),dc:t.dc})}const s={result:e("./result"),special:e("./special"),Context:e("./cnContext"),events:e("./events"),utils:e("./utils"),connect:e("./connect"),dbPool:e("./dbPool"),query:e("./query"),task:e("./task")};t.exports=(e=>{const t=e.$npm;return t.connect=t.connect||s.connect(e),t.query=t.query||s.query(e),t.task=t.task||s.task(e),n})},{"./cnContext":17,"./connect":18,"./dbPool":20,"./events":26,"./query":41,"./result":43,"./special":44,"./task":46,"./utils":51}],20:[function(e,t,r){"use strict";const n={con:e("manakin").local,utils:e("./utils")};class i{constructor(){this.dbMap={},this.dbs=[]}register(e){const t=i.normalizeConnection(e.$cn);t in this.dbMap?e.$config.options.noWarnings||n.con.warn("WARNING: Creating a duplicate database object for the same connection.\n%s\n",n.utils.getLocalStack(5)):this.dbMap[t]=!0,this.dbs.push(e)}shutDown(){this.dbs.forEach(e=>{e.$destroy()}),this.dbs.length=0,this.dbMap={}}static normalizeConnection(e){if("object"==typeof e){const t={},r=Object.keys(e).sort();r.forEach(r=>{t[r]=e[r]}),e=t}return JSON.stringify(e)}}t.exports=new i},{"./utils":51,manakin:6}],21:[function(e,t,r){"use strict";const n={qResult:e("./queryResult"),qFile:e("./queryFile"),prepared:e("./prepared"),paramQuery:e("./paramQuery")};t.exports={QueryResultError:n.qResult.QueryResultError,queryResultErrorCode:n.qResult.queryResultErrorCode,PreparedStatementError:n.prepared,ParameterizedQueryError:n.paramQuery,QueryFileError:n.qFile},Object.freeze(t.exports)},{"./paramQuery":22,"./prepared":23,"./queryFile":24,"./queryResult":25}],22:[function(e,t,r){"use strict";function n(e,t){const r=Error.apply(this,arguments);r.name=this.name="ParameterizedQueryError",this.stack=r.stack,e instanceof i.QueryFileError?(this.error=e,this.message="Failed to initialize 'text' from a QueryFile."):this.message=e,this.result=t}const i={os:e("os"),utils:e("../utils"),QueryFileError:e("./queryFile")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=i.utils.messageGap(e+2),s=["ParameterizedQueryError {",r+'message: "'+this.message+'"',r+"result: {",n+"text: "+JSON.stringify(this.result.text),n+"values: "+JSON.stringify(this.result.values),r+"}"];return this.error&&s.push(r+"error: "+this.error.toString(e+1)),s.push(t+"}"),s.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils":51,"./queryFile":24,os:void 0}],23:[function(e,t,r){"use strict";function n(e,t){const r=Error.apply(this,arguments);r.name=this.name="PreparedStatementError",this.stack=r.stack,e instanceof i.QueryFileError?(this.error=e,this.message="Failed to initialize 'text' from a QueryFile."):this.message=e,this.result=t}const i={os:e("os"),utils:e("../utils"),QueryFileError:e("./queryFile")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=i.utils.messageGap(e+2),s=["PreparedStatementError {",r+'message: "'+this.message+'"',r+"result: {",n+"name: "+JSON.stringify(this.result.name),n+"text: "+JSON.stringify(this.result.text),n+"values: "+JSON.stringify(this.result.values),r+"}"];return this.error&&s.push(r+"error: "+this.error.toString(e+1)),s.push(t+"}"),s.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils":51,"./queryFile":24,os:void 0}],24:[function(e,t,r){"use strict";function n(e,t){const r=Error.apply(this,arguments);r.name=this.name="QueryFileError",this.stack=r.stack,e instanceof i.minify.SQLParsingError?(this.error=e,this.message="Failed to parse the SQL."):this.message=e.message,this.file=t.file,this.options=t.options}const i={os:e("os"),utils:e("../utils"),minify:e("pg-minify")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=["QueryFileError {",r+'message: "'+this.message+'"',r+"options: "+JSON.stringify(this.options),r+'file: "'+this.file+'"'];return this.error&&n.push(r+"error: "+this.error.toString(e+1)),n.push(t+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils":51,os:void 0,"pg-minify":12}],25:[function(e,t,r){"use strict";function n(e,t,r,n){const i=Error.apply(this,arguments);i.name=this.name="QueryResultError",this.stack=i.stack,this.message=o[e].message,this.code=e,this.result=t,this.query=r,this.values=n,this.received=t.rows.length}const i={os:e("os"),utils:e("../utils")},s={noData:0,notEmpty:1,multiple:2};Object.freeze(s);const o=[{name:"noData",message:"No data returned from the query."},{name:"notEmpty",message:"No return data was expected."},{name:"multiple",message:"Multiple rows were not expected."}];(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=["QueryResultError {",r+"code: queryResultErrorCode."+o[this.code].name,r+'message: "'+this.message+'"',r+"received: "+this.received,r+"query: "+("string"==typeof this.query?'"'+this.query+'"':JSON.stringify(this.query))];return void 0!==this.values&&n.push(r+"values: "+JSON.stringify(this.values)),n.push(t+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports={QueryResultError:n,queryResultErrorCode:s}},{"../utils":51,os:void 0}],26:[function(e,t,r){"use strict";const n={con:e("manakin").local,main:e("./"),utils:e("./utils")},i={connect:(e,t,r)=>{if("function"==typeof e.options.connect)try{e.options.connect(t,e.dc,r)}catch(e){i.unexpected("connect",e)}},disconnect:(e,t)=>{if("function"==typeof e.options.disconnect)try{e.options.disconnect(t,e.dc)}catch(e){i.unexpected("disconnect",e)}},query:(e,t)=>{if("function"==typeof e.query)try{e.query(t)}catch(e){return e instanceof Error?e:new n.utils.InternalError(e)}},receive:(e,t,r,i)=>{if("function"==typeof e.receive)try{e.receive(t,r,i)}catch(e){return e instanceof Error?e:new n.utils.InternalError(e)}},task:(e,t)=>{if("function"==typeof e.task)try{e.task(t)}catch(e){i.unexpected("task",e)}},transact:(e,t)=>{if("function"==typeof e.transact)try{e.transact(t)}catch(e){i.unexpected("transact",e)}},error:(e,t,r)=>{if("function"==typeof e.error)try{e.error(t,r)}catch(e){i.unexpected("error",e)}},extend:(e,t,r)=>{if("function"==typeof e.extend)try{e.extend.call(t,t,r)}catch(e){i.unexpected("extend",e)}},unexpected:(e,t)=>{if(!n.main.suppressErrors){const r=t instanceof Error?t.stack:(new Error).stack;n.con.error("Unexpected error in '%s' event handler.\n%s\n",e,r)}}};t.exports=i},{"./":37,"./utils":51,manakin:6}],27:[function(e,t,r){"use strict";function n(e,t,r){if("function"==typeof e)return n(l(e,r),t,r);if(e&&"object"==typeof e){const i=e.formatDBType;if("function"==typeof i)return t|=e._rawDBType?d.raw:0,n(l(i,e),t,r)}const i=!!(t&d.raw);switch(t&=~d.raw){case d.alias:return g.alias(e);case d.name:return g.name(e);case d.json:return g.json(e,i);case d.csv:return g.csv(e);case d.value:return g.value(e)}if(o(e))return c(i),"null";switch(typeof e){case"string":return g.text(e,i);case"boolean":return g.bool(e);case"number":return g.number(e);default:return e instanceof Date?g.date(e,i):e instanceof Array?g.array(e):e instanceof Buffer?g.buffer(e,i):g.json(e,i)}}function i(e){const t=e=>"["+e.map(e=>e instanceof Array?t(e):n(e)).join()+"]";return"array"+t(e)}function s(e){return e instanceof Array?e.map(e=>n(e)).join():void 0===e?"":n(e)}function o(e){return void 0===e||null===e}function a(e){return"'"+e+"'"}function u(e){return e.replace(/'/g,"''")}function c(e){if(e)throw new TypeError("Values null/undefined cannot be used as raw text.")}function l(e,t){for(;"function"==typeof e;)e=e.call(t,t);return e}function p(e,t,r,n){if("string"!=typeof e)throw new TypeError("Parameter 'query' must be a text string.");if(t&&"object"==typeof t){const i=t.formatDBType;if("function"==typeof i)return p(e,l(i,t),r||t._rawDBType,n);if(t instanceof Array)return y.array(e,t,r,n);if(!(t instanceof Date||t instanceof Buffer))return y.object(e,t,r,n)}return void 0===t?e:y.value(e,t,r)}function f(e){return'"'+e.replace(/"/g,'""')+'"'}const h={pgUtils:e("pg/lib/utils"),patterns:e("./patterns")},d={raw:1,alias:2,name:4,json:8,csv:16,value:32},m={"^":d.raw,":raw":d.raw,":alias":d.alias,"~":d.name,":name":d.name,":json":d.json,":csv":d.csv,":value":d.value,"#":d.value},y={object:(e,t,r,i)=>(i=i&&"object"==typeof i?i:{},e.replace(h.patterns.namedParameters,e=>{const s=y.stripName(e.replace(/^\$[{(<[/]|[\s})>\]/]/g,""),r);if(s.name in t)return n(t[s.name],s.fm,t);if("this"===s.name)return n(t,s.fm);if("default"in i){const e=i.default,r="function"==typeof e?e.call(t,s.name,t):e;return n(r,s.fm,t)}if(i.partial)return e;throw new Error("Property '"+s.name+"' doesn't exist.")})),array:(e,t,r,i)=>(i=i&&"object"==typeof i?i:{},e.replace(h.patterns.multipleValues,e=>{const s=y.stripName(e.substr(1),r),o=s.name-1;if(o>=1e5)throw new RangeError("Variable $"+s.name+" exceeds supported maximum of $100000");if(o<t.length)return n(t[o],s.fm);if("default"in i){const e=i.default,r="function"==typeof e?e.call(t,o,t):e;return n(r,s.fm)}if(i.partial)return e;throw new RangeError("Variable $"+s.name+" out of range. Parameters array length: "+t.length)})),value:(e,t,r)=>e.replace(h.patterns.singleValue,e=>{const i=y.stripName(e,r);return n(t,i.fm)}),stripName:(e,t)=>{const r=e.match(h.patterns.hasValidModifier);return r?{name:e.substr(0,r.index),fm:m[r[0]]|(t?d.raw:0)}:{name:e,fm:t?d.raw:null}}},g={text:(e,t)=>(e=l(e),o(e)?(c(t),"null"):("string"!=typeof e&&(e=e.toString()),t?e:a(u(e)))),name:e=>{if(e=l(e)){if("string"==typeof e)return/^\s*\*(\s*)$/.test(e)?e:f(e);if("object"==typeof e){const t=Array.isArray(e)?e:Object.keys(e);if(!t.length)throw new Error("Cannot retrieve sql names from an empty array/object.");return t.map(e=>{if(!e||"string"!=typeof e)throw new Error("Invalid sql name: "+JSON.stringify(e));return f(e)}).join()}}throw new TypeError("Invalid sql name: "+JSON.stringify(e))},alias:e=>{if((e=l(e))&&"string"==typeof e)return f(e);throw new TypeError("Invalid sql alias: "+JSON.stringify(e))},value:e=>{if(e=l(e),o(e))throw new TypeError("Open values cannot be null or undefined.");return u(n(e,d.raw))},buffer:(e,t)=>{if(e=l(e),o(e))return c(t),"null";if(e instanceof Buffer){const r="\\x"+e.toString("hex");return t?r:a(r)}throw new TypeError(a(e)+" is not a Buffer object.")},bool:e=>(e=l(e),o(e)?"null":e?"true":"false"),date:(e,t)=>{if(e=l(e),o(e))return c(t),"null";if(e instanceof Date){const r=h.pgUtils.prepareValue(e);return t?r:a(r)}throw new TypeError(a(e)+" is not a Date object.")},number:e=>{if(e=l(e),o(e))return"null";if("number"!=typeof e)throw new TypeError(a(e)+" is not a number.");return isFinite(e)?e.toString():a(e===Number.POSITIVE_INFINITY?"+Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":"NaN")},array:e=>{if(e=l(e),o(e))return"null";if(e instanceof Array)return i(e);throw new TypeError(a(e)+" is not an Array object.")},csv:e=>s(l(e)),json:(e,t)=>{if(e=l(e),o(e))return c(t),"null";const r=JSON.stringify(e);return t?r:a(u(r))},func:(e,t,r)=>{if(o(e))return c(t),"null";if("function"!=typeof e)throw new TypeError(a(e)+" is not a function.");const i=t?d.raw:null;return n(l(e,r),i,r)},format:(e,t,r)=>(e&&"function"==typeof e.formatDBType&&(e=e.formatDBType.call(e,e)),p(e,t,!1,r))};Object.freeze(g),t.exports={formatQuery:p,formatFunction:function(e,t,r){return(r?"SELECT * FROM ":"select * from ")+e+"("+s(t)+")"},as:g}},{"./patterns":39,"pg/lib/utils":67}],28:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);if("string"==typeof e){const t=s(e);this.name=t.name,"mod"in t&&(this.mod=t.mod),"cnd"in t&&(this.cnd=t.cnd)}else{if(!(e&&"object"==typeof e&&"name"in e))throw new TypeError("Invalid column details.");if(!u.utils.isText(e.name))throw new TypeError("Invalid 'name' value: "+JSON.stringify(e.name)+". A non-empty string was expected.");if(u.utils.isNull(e.prop)&&!a(e.name))throw new TypeError("Invalid 'name' syntax: "+JSON.stringify(e.name)+". A valid variable name was expected.");if(this.name=e.name,!u.utils.isNull(e.prop)){if(!u.utils.isText(e.prop))throw new TypeError("Invalid 'prop' value: "+JSON.stringify(e.prop)+". A non-empty string was expected.");if(!a(e.prop))throw new TypeError("Invalid 'prop' syntax: "+JSON.stringify(e.prop)+". A valid variable name was expected.");e.prop!==e.name&&(this.prop=e.prop)}if(!u.utils.isNull(e.mod)){if("string"!=typeof e.mod||!o(e.mod))throw new TypeError("Invalid 'mod' value: "+JSON.stringify(e.mod)+".");this.mod=e.mod}u.utils.isNull(e.cast)||(this.cast=i(e.cast)),"cnd"in e&&(this.cnd=!!e.cnd),"def"in e&&(this.def=e.def),"function"==typeof e.init&&(this.init=e.init),"function"==typeof e.skip&&(this.skip=e.skip)}const t="${"+(this.prop||this.name)+(this.mod||"")+"}",r=this.cast?"::"+this.cast:"",c=u.formatting.as.alias(this.name);Object.defineProperty(this,"variable",{value:t,enumerable:!0}),Object.defineProperty(this,"castText",{value:r,enumerable:!0}),Object.defineProperty(this,"escapedName",{value:c,enumerable:!0}),Object.freeze(this)}function i(e){if("string"==typeof e){const t=e.replace(/^[:\s]*|\s*$/g,"");if(t)return t}throw new TypeError("Invalid 'cast' value: "+JSON.stringify(e)+".")}function s(e){const t=e.match(u.patterns.validColumn);if(t&&t[0]===e){const t={};"?"===e[0]&&(t.cnd=!0,e=e.substr(1));const r=e.match(u.patterns.hasValidModifier);return r?(t.name=e.substr(0,r.index),t.mod=r[0]):t.name=e,t}throw new TypeError("Invalid column syntax: "+JSON.stringify(e)+".")}function o(e){return-1!==u.patterns.validModifiers.indexOf(e)}function a(e){const t=e.match(u.patterns.validVariable);return!!t&&t[0]===e}const u={os:e("os"),utils:e("../utils"),formatting:e("../formatting"),patterns:e("../patterns")};n.prototype.toString=function(e){e=e>0?parseInt(e):0;const t=u.utils.messageGap(e),r=u.utils.messageGap(e+1),n=[t+"Column {",r+"name: "+JSON.stringify(this.name)];return"prop"in this&&n.push(r+"prop: "+JSON.stringify(this.prop)),"mod"in this&&n.push(r+"mod: "+JSON.stringify(this.mod)),"cast"in this&&n.push(r+"cast: "+JSON.stringify(this.cast)),"cnd"in this&&n.push(r+"cnd: "+JSON.stringify(this.cnd)),"def"in this&&n.push(r+"def: "+JSON.stringify(this.def)),"init"in this&&n.push(r+"init: [Function]"),"skip"in this&&n.push(r+"skip: [Function]"),n.push(t+"}"),n.join(u.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../formatting":27,"../patterns":39,"../utils":51,os:void 0}],29:[function(e,t,r){"use strict";function n(e,t){function r(e,t){const r={source:t,name:e.prop||e.name};return r.exists=r.name in t,r.exists?r.value=t[r.name]:r.value="def"in e?e.def:void 0,r}if(!(this instanceof n))return new n(e,t);if(!e||"object"!=typeof e)throw new TypeError("Invalid parameter 'columns' specified.");let s,o,a,u,c=!0;if(!i.utils.isNull(t)){if("object"!=typeof t)throw new TypeError("Invalid parameter 'options' specified.");i.utils.isNull(t.table)||(t.table instanceof i.TableName?this.table=t.table:this.table=new i.TableName(t.table)),s=t.inherit}if(Array.isArray(e)){const t={};this.columns=e.map(e=>{const r=e instanceof i.Column?e:new i.Column(e);if(r.name in t)throw new Error('Duplicate column name "'+r.name+'".');return t[r.name]=!0,r})}else if(e instanceof i.Column)this.columns=[e];else{this.columns=[];for(let t in e)(s||Object.prototype.hasOwnProperty.call(e,t))&&this.columns.push(new i.Column(t))}Object.freeze(this.columns);for(let e=0;e<this.columns.length;e++){const t=this.columns[e];if(t.prop||t.init||"def"in t){c=!1;break}}Object.defineProperty(this,"names",{get:()=>(o||(o=this.columns.map(e=>e.escapedName).join()),o)}),Object.defineProperty(this,"variables",{get:()=>(a||(a=this.columns.map(e=>e.variable+e.castText).join()),a)}),this.assign=(e=>{const t=e&&e.prefix&&"string"==typeof e.prefix;if(u&&!t)return u;let n=t;const s=e&&e.source&&"object"==typeof e.source;let o=this.columns.filter(t=>{if(t.cnd)return!1;if(t.skip&&(n=!0,s)){const n=r(t,e.source);if(t.skip.call(e.source,n))return!1}return!0});const a=t?i.formatting.as.alias(e.prefix)+".":"";return o=o.map(e=>a+e.escapedName+"="+e.variable+e.castText).join(),n||(u=o),o}),this.extend=(e=>{let t=e;return t instanceof n||(t=new n(e)),new n(this.columns.concat(t.columns),{table:this.table})}),this.merge=(e=>{let t=e;t instanceof n||(t=new n(e));const r={},i=[];return this.columns.forEach((e,t)=>{i.push(e),r[e.name]=t}),t.columns.forEach(e=>{e.name in r?i[r[e.name]]=e:i.push(e)}),new n(i,{table:this.table})}),this.prepare=(e=>{if(c)return e;const t={};return this.columns.forEach(n=>{const i=r(n,e);n.init?t[i.name]=n.init.call(e,i):(i.exists||"def"in n)&&(t[i.name]=i.value)}),t}),Object.freeze(this)}const i={os:e("os"),utils:e("../utils"),formatting:e("../formatting"),TableName:e("./tableName"),Column:e("./column")};n.prototype.toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=["ColumnSet {"];return this.table&&n.push(r+"table: "+this.table),this.columns.length?(n.push(r+"columns: ["),this.columns.forEach(e=>{n.push(e.toString(2))}),n.push(r+"]")):n.push(r+"columns: []"),n.push(t+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../formatting":27,"../utils":51,"./column":28,"./tableName":36,os:void 0}],30:[function(e,t,r){"use strict";const n={concat:e("./methods/concat"),insert:e("./methods/insert"),update:e("./methods/update"),values:e("./methods/values"),sets:e("./methods/sets"),TableName:e("./tableName"),ColumnSet:e("./columnSet"),Column:e("./column")};t.exports=(e=>{const t={insert:(t,r,i)=>{const s=e.options&&e.options.capSQL;return n.insert(t,r,i,s)},update:(t,r,i,s)=>{const o=e.options&&e.options.capSQL;return n.update(t,r,i,s,o)},concat:n.concat,values:n.values,sets:n.sets,TableName:n.TableName,ColumnSet:n.ColumnSet,Column:n.Column};return Object.freeze(t),t})},{"./column":28,"./columnSet":29,"./methods/concat":31,"./methods/insert":32,"./methods/sets":33,"./methods/update":34,"./methods/values":35,"./tableName":36}],31:[function(e,t,r){"use strict";function n(e){return e.replace(/^[\s;]*|[\s;]*$/g,"")}const i={format:e("../../formatting").as.format,QueryFile:e("../../queryFile")};t.exports=function(e){if(!Array.isArray(e))throw new TypeError("Parameter 'queries' must be an array.");return e.map((e,t)=>{if("string"==typeof e)return n(e);if(e&&"object"==typeof e){if(e instanceof i.QueryFile)return n(e.formatDBType());if("query"in e)return n(i.format(e.query,e.values,e.options))}throw new Error("Invalid query element at index "+t+".")}).filter(e=>e).join(";")}},{"../../formatting":27,"../../queryFile":42}],32:[function(e,t,r){"use strict";const n={TableName:e("../tableName"),ColumnSet:e("../columnSet"),formatting:e("../../formatting"),utils:e("../../utils")},i={lowCase:"insert into $1^($2^) values",capCase:"INSERT INTO $1^($2^) VALUES"};t.exports=function(e,t,r,s){if(!e||"object"!=typeof e)throw new TypeError("Invalid parameter 'data' specified.");const o=Array.isArray(e);if(o&&!e.length)throw new TypeError("Cannot generate an INSERT from an empty array.");if(t instanceof n.ColumnSet)n.utils.isNull(r)&&(r=t.table);else{if(o&&n.utils.isNull(t))throw new TypeError("Parameter 'columns' is required when inserting multiple records.");t=new n.ColumnSet(t||e)}if(!t.columns.length)throw new Error("Cannot generate an INSERT without any columns.");if(!r)throw new Error("Table name is unknown.");r instanceof n.TableName||(r=new n.TableName(r));let a=s?i.capCase:i.lowCase;const u=n.formatting.as.format;return a=u(a,[r.name,t.names]),o?a+e.map((e,r)=>{if(!e||"object"!=typeof e)throw new Error("Invalid insert object at index "+r+".");return"("+u(t.variables,t.prepare(e))+")"}).join():a+"("+u(t.variables,t.prepare(e))+")"}},{"../../formatting":27,"../../utils":51,"../columnSet":29,"../tableName":36}],33:[function(e,t,r){"use strict";const n={ColumnSet:e("../columnSet"),format:e("../../formatting").as.format,utils:e("../../utils")};t.exports=function(e,t){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid parameter 'data' specified.");return t instanceof n.ColumnSet||(t=new n.ColumnSet(t||e)),n.format(t.assign({source:e}),t.prepare(e))}},{"../../formatting":27,"../../utils":51,"../columnSet":29}],34:[function(e,t,r){"use strict";const n={TableName:e("../tableName"),ColumnSet:e("../columnSet"),formatting:e("../../formatting"),utils:e("../../utils")},i={single:{lowCase:"update $1^ set ",capCase:"UPDATE $1^ SET "},multi:{lowCase:"update $1^ as $2^ set $3^ from (values$4^) as $5^($6^)",capCase:"UPDATE $1^ AS $2^ SET $3^ FROM (VALUES$4^) AS $5^($6^)"}};t.exports=function(e,t,r,s,o){function a(){if(!r||r instanceof n.TableName||(r=new n.TableName(r)),!r)throw new Error("Table name is unknown.")}function u(e){if(!e.length){if(p)return!0;throw new Error("Cannot generate an UPDATE without any columns.")}}if(!e||"object"!=typeof e)throw new TypeError("Invalid parameter 'data' specified.");const c=Array.isArray(e);if(c&&!e.length)throw new TypeError("Cannot generate an UPDATE from an empty array.");if(t instanceof n.ColumnSet)n.utils.isNull(r)&&(r=t.table);else{if(c&&n.utils.isNull(t))throw new TypeError("Parameter 'columns' is required when updating multiple records.");t=new n.ColumnSet(t||e)}s=s||{};const l=n.formatting.as.format,p="emptyUpdate"in s;if(c){const c=n.formatting.as.alias(n.utils.isNull(s.tableAlias)?"t":s.tableAlias),p=n.formatting.as.alias(n.utils.isNull(s.valueAlias)?"v":s.valueAlias),f=o?i.multi.capCase:i.multi.lowCase,h=t.columns.filter(e=>!e.cnd);if(u(h))return s.emptyUpdate;a();const d=h.map(e=>e.escapedName+"="+p+"."+e.escapedName).join(),m=e.map((e,r)=>{if(!e||"object"!=typeof e)throw new Error("Invalid update object at index "+r+".");return"("+l(t.variables,t.prepare(e))+")"}).join();return l(f,[r.name,c,d,m,p,t.names])}const f=t.assign({source:e});if(u(f))return s.emptyUpdate;a();const h=o?i.single.capCase:i.single.lowCase;return l(h,r.name)+l(f,t.prepare(e))}},{"../../formatting":27,"../../utils":51,"../columnSet":29,"../tableName":36}],35:[function(e,t,r){"use strict";const n={ColumnSet:e("../columnSet"),formatting:e("../../formatting"),utils:e("../../utils")};t.exports=function(e,t){if(!e||"object"!=typeof e)throw new TypeError("Invalid parameter 'data' specified.");const r=Array.isArray(e);if(!(t instanceof n.ColumnSet)){if(r&&n.utils.isNull(t))throw new TypeError("Parameter 'columns' is required when generating multi-row values.");t=new n.ColumnSet(t||e)}if(!t.columns.length)throw new Error("Cannot generate values without any columns.");const i=n.formatting.as.format;return r?e.map((e,r)=>{if(!e||"object"!=typeof e)throw new Error("Invalid object at index "+r+".");return"("+i(t.variables,t.prepare(e))+")"}).join():"("+i(t.variables,t.prepare(e))+")"}},{"../../formatting":27,"../../utils":51,"../columnSet":29}],36:[function(e,t,r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);if(e&&"object"==typeof e&&"table"in e&&(t=e.schema,e=e.table),!i.utils.isText(e))throw new TypeError("Table name must be a non-empty text string.");if(!i.utils.isNull(t)){if("string"!=typeof t)throw new TypeError("Invalid schema name.");t.length>0&&(this.schema=t)}this.table=e,this.name=i.formatting.as.alias(e),this.schema&&(this.name=i.formatting.as.alias(t)+"."+this.name),this._rawDBType=!0,Object.freeze(this)}const i={utils:e("../utils"),formatting:e("../formatting")};n.prototype.formatDBType=function(){return this.name},n.prototype.toString=function(){return this.name},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../formatting":27,"../utils":51}],37:[function(e,t,r){"use strict";if(+process.versions.node.split(".")[0]<4)throw new Error("Minimum Node.js version required by pg-promise is 4.x");t.exports=e("./main")},{"./main":38}],38:[function(e,t,r){"use strict";function n(t){if(i.utils.isNull(t))t={};else{if("object"!=typeof t)throw new TypeError("Invalid initialization options: "+JSON.stringify(t));const e=["pgFormatting","pgNative","promiseLib","noLocking","capSQL","noWarnings","connect","disconnect","query","receive","task","transact","error","extend"];if(!t.noWarnings)for(let r in t)if(-1===e.indexOf(r)){i.con.warn("WARNING: Invalid property '%s' in initialization options.\n%s\n",r,i.utils.getLocalStack(3));break}}let r=i.pg;const n=i.promise(t.promiseLib),o={version:i.package.version,promiseLib:n.promiseLib,promise:n.promise};if(i.utils.addReadProp(o,"$npm",{},!0),i.utils.addReadProp(t,"promiseLib",t.promiseLib),i.utils.addReadProp(t,"pgNative",!!t.pgNative),o.options=t,t.pgNative&&(r=i.pg.native,i.utils.isNull(r)))throw new Error("Failed to initialize Native Bindings.");const a=e("./database")(o),u=(e,t)=>{if(i.utils.isText(e)||e&&"object"==typeof e)return new a(e,t,o);throw new TypeError("Invalid connection details: "+JSON.stringify(e))};return i.utils.addReadProperties(u,s),i.utils.addReadProp(u,"pg",r),i.utils.addReadProp(u,"end",()=>{i.dbPool.shutDown()}),i.utils.addReadProp(u,"helpers",i.helpers(o)),i.utils.addReadProp(u,"spex",o.$npm.spex),o.pgp=u,Object.freeze(o),u}const i={con:e("manakin").local,path:e("path"),pg:e("pg"),minify:e("pg-minify"),adapter:e("./adapter"),result:e("./result"),promise:e("./promise"),formatting:e("./formatting"),helpers:e("./helpers"),queryFile:e("./queryFile"),errors:e("./errors"),utils:e("./utils"),pubUtils:e("./utils/public"),mode:e("./txMode"),types:e("./types"),dbPool:e("./dbPool"),package:e("../package.json")},s={as:i.formatting.as,minify:i.minify,queryResult:i.result,PromiseAdapter:i.adapter,ParameterizedQuery:i.types.ParameterizedQuery,PreparedStatement:i.types.PreparedStatement,QueryFile:i.queryFile,errors:i.errors,utils:i.pubUtils,txMode:i.mode};i.utils.addReadProperties(n,s),t.exports=n},{"../package.json":53,"./adapter":15,"./database":19,"./dbPool":20,"./errors":21,"./formatting":27,"./helpers":30,"./promise":40,"./queryFile":42,"./result":43,"./txMode":47,"./types":48,"./utils":51,"./utils/public":52,manakin:6,path:void 0,pg:62,"pg-minify":12}],39:[function(e,t,r){"use strict";t.exports={namedParameters:/\$(?:({)|(\()|(<)|(\[)|(\/))\s*[a-zA-Z0-9$_]+(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?\s*(?:(?=\2)(?=\3)(?=\4)(?=\5)}|(?=\1)(?=\3)(?=\4)(?=\5)\)|(?=\1)(?=\2)(?=\4)(?=\5)>|(?=\1)(?=\2)(?=\3)(?=\5)]|(?=\1)(?=\2)(?=\3)(?=\4)\/)/g,multipleValues:/\$([1-9][0-9]{0,16}(?![0-9])(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?)/g,singleValue:/\$1(?![0-9])(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?/g,validColumn:/\??[a-zA-Z0-9$_]+(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?/,validVariable:/^[0-9]+|[a-zA-Z0-9$_]+/,hasValidModifier:/\^|~|#|:raw|:alias|:name|:json|:csv|:value/,validModifiers:["^","~","#",":raw",":alias",":name",":json",":csv",":value"],splitDevice:/^([a-zA-Z]:|[\\/]{2}[^\\/]+[\\/]+[^\\/]+)?([\\/])?([\s\S]*?)$/}},{}],40:[function(e,t,r){"use strict";function n(e){let t;if(e instanceof i)return t=function(t){return e.create(t)},t.resolve=e.resolve,t.reject=e.reject,t.all=e.all,t;const r=typeof e;if("function"===r||"object"===r){const r="function"==typeof e.Promise?e.Promise:e;if(t=function(e){return new r(e)},t.resolve=r.resolve,t.reject=r.reject,t.all=r.all,"function"==typeof t.resolve&&"function"==typeof t.reject&&"function"==typeof t.all)return t}throw new TypeError("Invalid promise library specified.")}const i=e("./adapter");t.exports=function(e){const t={promiseLib:e};return e?t.promise=n(e):(t.promise=n(Promise),t.promiseLib=Promise),t}},{"./adapter":15}],41:[function(e,t,r){"use strict";function n(e,t,r,n,h){let d;const m=h.promise;if(n instanceof l){if(n.isStream)return i.stream.call(this,e,t,r,h);d=n.isResult}const y=e.options,g=y.capSQL;let v,b,w=y.pgFormatting,x=w?r:void 0;if(t||(v=new TypeError("Empty or undefined query.")),v||"object"!=typeof t||(t instanceof i.QueryFile?(t.prepare(),t.error?(v=t.error,t=t.file):t=t.query):"funcName"in t?(b=!0,t=t.funcName):(t instanceof a?w=!0:"name"in t?(t=new u(t),w=!0):"text"in t&&(t=new c(t),w=!0),t instanceof a&&!i.utils.isNull(r)&&(t.values=r))),!v&&(w||i.utils.isText(t)||(v=new TypeError(b?"Invalid function name.":"Invalid query format.")),t instanceof a)){const e=t.parse();e instanceof Error?v=e:t=e}if(v||d||(i.utils.isNull(n)?n=i.result.any:(n!==parseInt(n)||(n&f)===f||n<1||n>6)&&(v=new TypeError("Invalid Query Result Mask specified."))),!v&&(!w||b))try{b?(x=void 0,t=i.formatting.formatFunction(t,r,g)):t=i.formatting.formatQuery(t,r)}catch(e){if(b){const e=g?"SELECT * FROM":"select * from";t=e+" "+t+"(...)"}else x=r;v=e instanceof Error?e:new i.utils.InternalError(e)}return m((r,a)=>{function u(){let r;return e.db?r=e.db.client:v=new Error("Loose request outside an expired connection."),{client:r,query:t,params:x,dc:e.dc,ctx:e.ctx}}function c(){const e=u();if(v)return v instanceof o&&(v=v.error),i.events.error(y,v,e),a(v),!0}if(c())return;if(v=i.events.query(y,u()),c())return;const l=Date.now();try{e.db.client.query(t,x,(e,o)=>{let a;if(e||(i.utils.addReadProp(o,"duration",Date.now()-l),i.utils.addReadProp(o.rows,"duration",o.duration,!0),o.rows.length&&(e=(e=i.events.receive(y,o.rows,o,u()))||v)),e)v=e;else if(d)a=o;else{const e=(a=o.rows).length;e?e>1&&n&i.result.one?v=new s(p.multiple,o,t,x):n&(i.result.one|i.result.many)?n&i.result.many||(a=a[0]):v=new s(p.notEmpty,o,t,x):n&i.result.none?a=n&i.result.one?null:n&i.result.many?a:null:v=new s(p.noData,o,t,x)}c()||r(a)})}catch(e){v=e}c()})}const i={utils:e("./utils"),special:e("./special"),QueryFile:e("./queryFile"),formatting:e("./formatting"),result:e("./result"),errors:e("./errors"),events:e("./events"),stream:e("./stream"),types:e("./types")},s=i.errors.QueryResultError,o=i.utils.InternalError,a=i.types.ExternalQuery,u=i.types.PreparedStatement,c=i.types.ParameterizedQuery,l=i.special.SpecialQuery,p=i.errors.queryResultErrorCode,f=i.result.one|i.result.many;t.exports=(e=>(function(t,r,i,s){return n.call(this,t,r,i,s,e)}))},{"./errors":21,"./events":26,"./formatting":27,"./queryFile":42,"./result":43,"./special":44,"./stream":45,"./types":48,"./utils":51}],42:[function(e,t,r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);let r,o,a,u,c,l=e;const p={debug:i.utils.isDev(),minify:!1,compress:!1,noWarnings:!1};t&&"object"==typeof t&&(void 0!==t.debug&&(p.debug=!!t.debug),void 0!==t.minify&&(c="after"===t.minify,p.minify=c?"after":!!t.minify),void 0!==t.compress&&(p.compress=!!t.compress),p.compress&&void 0===t.minify&&(p.minify=!0),void 0!==t.params&&(p.params=t.params),void 0!==t.noWarnings&&(p.noWarnings=!!t.noWarnings)),Object.freeze(p),i.utils.isText(l)&&!i.utils.isPathAbsolute(l)&&(l=i.path.join(i.utils.startDir,l)),p.noWarnings||(l in s?(s[l]++,i.con.warn("WARNING: Creating a duplicate QueryFile object for the same file - \n    %s\n%s\n",l,i.utils.getLocalStack(3))):s[l]=0),this.formatDBType=function(){return this.prepare(!0),this.query},this.prepare=function(e){let t;if(p.debug&&a)try{if((t=i.fs.statSync(l).mtime.getTime())===u)return;a=!1}catch(t){if(r=void 0,a=!1,o=t,e)throw o;return}if(!a)try{r=i.fs.readFileSync(l,"utf8"),u=t||i.fs.statSync(l).mtime.getTime(),p.minify&&!c&&(r=i.minify(r,{compress:p.compress})),void 0!==p.params&&(r=i.format(r,p.params,{partial:!0})),p.minify&&c&&(r=i.minify(r,{compress:p.compress})),a=!0,o=void 0}catch(t){if(r=void 0,o=new i.QueryFileError(t,this),e)throw o}},Object.defineProperty(this,"query",{get:()=>r}),Object.defineProperty(this,"error",{get:()=>o}),Object.defineProperty(this,"file",{get:()=>e}),Object.defineProperty(this,"options",{get:()=>p}),this.prepare()}const i={fs:e("fs"),os:e("os"),path:e("path"),con:e("manakin").local,minify:e("pg-minify"),utils:e("./utils"),format:e("./formatting").as.format,QueryFileError:e("./errors/queryFile")},s={};n.prototype.toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e+1),r=["QueryFile {"];return this.prepare(),r.push(t+'file: "'+this.file+'"'),r.push(t+"options: "+JSON.stringify(this.options)),this.error?r.push(t+"error: "+this.error.toString(e+1)):r.push(t+'query: "'+this.query+'"'),r.push(i.utils.messageGap(e)+"}"),r.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"./errors/queryFile":24,"./formatting":27,"./utils":51,fs:void 0,manakin:6,os:void 0,path:void 0,"pg-minify":12}],43:[function(e,t,r){"use strict";const n={one:1,many:2,none:4,any:6};Object.freeze(n),t.exports=n},{}],44:[function(e,t,r){"use strict";class n{constructor(e){this.isStream="stream"===e,this.isResult="result"===e}}const i={resultQuery:new n("result"),streamQuery:new n("stream")};t.exports={SpecialQuery:n,cache:i}},{}],45:[function(e,t,r){"use strict";const n={events:e("./events"),utils:e("./utils")};t.exports=function(e,t,r,i){function s(e){return e instanceof n.utils.InternalError?e.error:e}function o(){let r;return e.db?r=e.db.client:u=new Error("Loose request outside an expired connection."),{client:r,dc:e.dc,query:t.text,params:t.values,ctx:e.ctx}}const a=i.promise;if(e.options.pgNative)return a.reject(new Error("Streaming doesn't work with Native Bindings."));if(!n.utils.isObject(t,["state","_reading"]))return a.reject(new TypeError("Invalid or missing stream object."));if(t._reading||"initialized"!==t.state)return a.reject(new Error("Invalid stream state."));if("function"!=typeof r)return a.reject(new TypeError("Invalid or missing stream initialization callback."));let u=n.events.query(e.options,o());if(u)return u=s(u),n.events.error(e.options,u,o()),a.reject(u);let c,l,p,f=0;try{c=e.db.client.query(t),l=c._fetch,c._fetch=((t,r)=>{l.call(c,t,(t,i)=>{if(!t&&i.length){f+=i.length;const t=o();u||(u=n.events.receive(e.options,i,void 0,t)),u&&c.close()}return r(t,i)})}),p=Date.now(),r.call(this,c)}catch(e){u=e}return u?(c._fetch=l,u=s(u),n.events.error(e.options,u,o()),a.reject(u)):a((t,r)=>{function i(t){t=s(t),n.events.error(e.options,t,o()),r(t)}c.once("end",()=>{c._fetch=l,u?i(u):t({processed:f,duration:Date.now()-p})}),c.once("error",e=>{c._fetch=l,i(e)})})}},{"./events":26,"./utils":51}],46:[function(e,t,r){"use strict";function n(e,t,r,n){this.ctx=e.ctx={},i.utils.addReadProp(this.ctx,"isTX",r),"context"in e&&i.utils.addReadProp(this.ctx,"context",e.context),i.utils.addReadProp(this.ctx,"connected",!e.db),i.utils.addReadProp(this.ctx,"tag",t),i.utils.addReadProp(this.ctx,"dc",e.dc),i.utils.addReadProp(this.ctx,"level",e.level),r&&i.utils.addReadProp(this.ctx,"txLevel",e.txLevel),i.utils.addReadProp(this.ctx,"parent",e.parentCtx),this.query=function(t,i,s){if(!e.db)throw new Error("Unexpected call outside of "+(r?"transaction.":"task."));return n.$npm.query.call(this,e,t,i,s)},this.batch=function(e,t){return n.$npm.spex.batch.call(this,e,t)},this.page=function(e,t,r){return n.$npm.spex.page.call(this,e,t,r)},this.sequence=function(e,t,r,i){return n.$npm.spex.sequence.call(this,e,t,r,i)}}const i={spex:e("spex"),utils:e("./utils"),mode:e("./txMode"),events:e("./events"),query:e("./query"),async:e("./async")},s=(e,t,r,n)=>{function s(){let r,s=e.cb;"GeneratorFunction"===s.constructor.name&&(s=n.$npm.async(s));try{r=s.call(t,t)}catch(t){return i.events.error(e.options,t,{client:e.db.client,dc:e.dc,ctx:e.ctx}),l.reject(t)}return r&&"function"==typeof r.then?r:l.resolve(r)}function o(t,n,s){const o=e.ctx;t?i.utils.addReadProp(o,"start",new Date):(o.finish=new Date,o.success=n,o.result=s,o.duration=o.finish-o.start,i.utils.lock(o,!0)),(r?i.events.transact:i.events.task)(e.options,{client:e.db.client,dc:e.dc,ctx:o})}function a(){return c("commit","release savepoint")}function u(){return c("rollback","rollback to savepoint")}function c(r,n){return e.txLevel?t.none((m?n.toUpperCase():n)+" "+d):t.none(m?r.toUpperCase():r)}const l=n.promise;let p,f,h,d;const m=e.options.capSQL;return o(!0),r?(d="level_"+e.txLevel,(!e.txLevel&&e.cb.txMode instanceof i.mode.TransactionMode?c(e.cb.txMode.begin(m),"savepoint"):c("begin","savepoint")).then(()=>s().then(e=>(p=e,h=!0,a()),e=>(f=e,u())).then(()=>h?(o(!1,!0,p),p):(o(!1,!1,f),l.reject(f)),e=>(o(!1,!1,e),l.reject(e))),e=>(o(!1,!1,e),l.reject(e)))):s().then(e=>(o(!1,!0,e),e)).catch(e=>(o(!1,!1,e),l.reject(e)))};t.exports=(e=>{const t=e.$npm;return t.query=t.query||i.query(e),t.async=t.async||i.async(e),t.spex=t.spex||i.spex(e.promiseLib),{Task:n,execute:s}})},{"./async":16,"./events":26,"./query":41,"./txMode":47,"./utils":51,spex:84}],47:[function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);e&&"object"==typeof e&&(t=e.readOnly,r=e.deferrable,e=e.tiLevel);let s,o,a,u,c="begin";if((e=e>0?parseInt(e):0)>0&&e<4){const t=["serializable","repeatable read","read committed"];s="isolation level "+t[e-1]}t?o="read only":void 0!==t&&(o="read write"),e===i.serializable&&t&&(r?a="deferrable":void 0!==r&&(a="not deferrable")),s&&(c+=" "+s),o&&(c+=" "+o),a&&(c+=" "+a),u=c.toUpperCase(),this.begin=(e=>e?u:c)}const i={none:0,serializable:1,repeatableRead:2,readCommitted:3};Object.freeze(i),t.exports={isolationLevel:i,TransactionMode:n},Object.freeze(t.exports)},{}],48:[function(e,t,r){"use strict";const n={utils:e("../utils"),PS:e("./prepared"),PQ:e("./parameterized")};class i{}i.prototype.inspect=function(){return this.toString()},n.utils.inherits(n.PS,i),n.utils.inherits(n.PQ,i),t.exports={ExternalQuery:i,PreparedStatement:n.PS,ParameterizedQuery:n.PQ}},{"../utils":51,"./parameterized":49,"./prepared":50}],49:[function(e,t,r){"use strict";function n(e,t){function r(e){Array.isArray(e)?e.length?o.values=e:delete o.values:i.utils.isNull(e)?delete o.values:o.values=[e]}if(!(this instanceof n))return new n(e,t);let s,o={},a=!0;const u={text:e,binary:void 0,rowMode:void 0};r(t),Object.defineProperty(this,"text",{get:()=>u.text,set:e=>{e!==u.text&&(u.text=e,a=!0)}}),Object.defineProperty(this,"values",{get:()=>o.values,set:e=>{r(e)}}),Object.defineProperty(this,"binary",{get:()=>u.binary,set:e=>{e!==u.binary&&(u.binary=e,a=!0)}}),Object.defineProperty(this,"rowMode",{get:()=>u.rowMode,set:e=>{e!==u.rowMode&&(u.rowMode=e,a=!0)}}),Object.defineProperty(this,"error",{get:()=>s}),i.utils.isObject(e,["text"])&&(u.text=e.text,u.binary=e.binary,u.rowMode=e.rowMode,r(e.values)),this.parse=(()=>{const e=u.text instanceof i.QueryFile?u.text:null;if(!a&&!e)return o;const t=[],r=o.values;return o={name:u.name},a=!0,s=void 0,e?(e.prepare(),e.error?(o.text=u.text,t.push(e.error)):o.text=e.query):o.text=u.text,i.utils.isText(o.text)||t.push("Property 'text' must be a non-empty text string."),i.utils.isNull(r)||(o.values=r),void 0!==u.binary&&(o.binary=u.binary),void 0!==u.rowMode&&(o.rowMode=u.rowMode),t.length?s=new i.errors.ParameterizedQueryError(t[0],o):(a=!1,o)})}const i={os:e("os"),utils:e("../utils"),errors:e("../errors"),QueryFile:e("../queryFile")};n.prototype.toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e+1),r=this.parse(),n=["ParameterizedQuery {"];return i.utils.isText(r.text)&&n.push(t+'text: "'+r.text+'"'),void 0!==this.values&&n.push(t+"values: "+JSON.stringify(this.values)),void 0!==this.binary&&n.push(t+"binary: "+JSON.stringify(this.binary)),void 0!==this.rowMode&&n.push(t+"rowMode: "+JSON.stringify(this.rowMode)),void 0!==this.error&&n.push(t+"error: "+this.error.toString(e+1)),n.push(i.utils.messageGap(e)+"}"),n.join(i.os.EOL)},t.exports=n},{"../errors":21,"../queryFile":42,"../utils":51,os:void 0}],50:[function(e,t,r){"use strict";function n(e,t,r){function s(e){Array.isArray(e)?e.length?a.values=e:delete a.values:i.utils.isNull(e)?delete a.values:a.values=[e]}if(!(this instanceof n))return new n(e,t,r);let o,a={},u=!0;const c={name:e,text:t,binary:void 0,rowMode:void 0,rows:void 0};s(r),Object.defineProperty(this,"name",{get:()=>c.name,set:e=>{e!==c.name&&(c.name=e,u=!0)}}),Object.defineProperty(this,"text",{get:()=>c.text,set:e=>{e!==c.text&&(c.text=e,u=!0)}}),Object.defineProperty(this,"values",{get:()=>a.values,set:e=>{s(e)}}),Object.defineProperty(this,"binary",{get:()=>c.binary,set:e=>{e!==c.binary&&(c.binary=e,u=!0)}}),Object.defineProperty(this,"rowMode",{get:()=>c.rowMode,set:e=>{e!==c.rowMode&&(c.rowMode=e,u=!0)}}),Object.defineProperty(this,"rows",{get:()=>c.rows,set:e=>{e!==c.rows&&(c.rows=e,u=!0)}}),Object.defineProperty(this,"error",{get:()=>o}),i.utils.isObject(e,["name"])&&(c.name=e.name,c.text=e.text,c.binary=e.binary,c.rowMode=e.rowMode,c.rows=e.rows,s(e.values)),this.parse=(()=>{const e=c.text instanceof i.QueryFile?c.text:null;if(!u&&!e)return a;const t=[],r=a.values;return a={name:c.name},u=!0,o=void 0,i.utils.isText(a.name)||t.push("Property 'name' must be a non-empty text string."),e?(e.prepare(),e.error?(a.text=c.text,t.push(e.error)):a.text=e.query):a.text=c.text,i.utils.isText(a.text)||t.push("Property 'text' must be a non-empty text string."),i.utils.isNull(r)||(a.values=r),void 0!==c.binary&&(a.binary=c.binary),void 0!==c.rowMode&&(a.rowMode=c.rowMode),void 0!==c.rows&&(a.rows=c.rows),t.length?o=new i.errors.PreparedStatementError(t[0],a):(u=!1,a)})}const i={os:e("os"),utils:e("../utils"),errors:e("../errors"),QueryFile:e("../queryFile")};n.prototype.toString=function(e){e=e>0?parseInt(e):0;const t=i.utils.messageGap(e+1),r=this.parse(),n=["PreparedStatement {",t+"name: "+JSON.stringify(this.name)];return i.utils.isText(r.text)&&n.push(t+'text: "'+r.text+'"'),void 0!==this.values&&n.push(t+"values: "+JSON.stringify(this.values)),void 0!==this.binary&&n.push(t+"binary: "+JSON.stringify(this.binary)),void 0!==this.rowMode&&n.push(t+"rowMode: "+JSON.stringify(this.rowMode)),void 0!==this.rows&&n.push(t+"rows: "+JSON.stringify(this.rows)),this.error&&n.push(t+"error: "+this.error.toString(e+1)),n.push(i.utils.messageGap(e)+"}"),n.join(i.os.EOL)},t.exports=n},{"../errors":21,"../queryFile":42,"../utils":51,os:void 0}],51:[function(e,t,r){"use strict";function n(e,t,r,n){Object.defineProperty(e,t,{value:r,configurable:!1,enumerable:!n,writable:!1})}const i={path:e("path"),patterns:e("../patterns")},s={InternalError:function(e){this.error=e},getLocalStack:function(e){return(new Error).stack.split("\n").slice(e).filter(e=>e.match(/\(.*(\\+|\/+).*\)/)).join("\n")},isPathAbsolute:function(e){if("win32"===process.platform){const t=i.patterns.splitDevice.exec(e),r=t[1]||"",n=!!r&&":"!==r.charAt(1);return!!t[2]||n}return"/"===e.charAt(0)},lock:function(e,t,r){if(!r||!r.noLocking)if(t)Object.freeze(e);else{const t={writable:!1,configurable:!1,enumerable:!0};for(let r in e)Object.defineProperty(e,r,t)}},isText:function(e){return e&&"string"==typeof e&&/\S/.test(e)},isNull:function(e){return null===e||void 0===e},isDev:function(){return-1!==(global.process.env.NODE_ENV||"").toLowerCase().indexOf("dev")},isObject:function(e,t){if(e&&"object"==typeof e){for(let r=0;r<t.length;r++)if(!(t[r]in e))return!1;return!0}return!1},addReadProp:n,addReadProperties:function(e,t){for(let r in t)n(e,r,t[r])},getSafeConnection:function(e){if("object"==typeof e){const t=JSON.parse(JSON.stringify(e));return"string"==typeof t.password&&(t.password=t.password.replace(/./g,"#")),t}return e.replace(/:(?![/])([^@]+)/,(e,t)=>":"+new Array(t.length+1).join("#"))},messageGap:function(e){return Array(1+4*e).join(" ")},inherits:function(e,t){e.prototype.__proto__=t.prototype}},o=process.argv[1];s.startDir=o?i.path.dirname(o):process.cwd(),Object.freeze(s),t.exports=s},{"../patterns":39,path:void 0}],52:[function(e,t,r){"use strict";function n(e){return(e=e.replace(/[-_\s.]+(.)?/g,(e,t)=>t?t.toUpperCase():"")).substr(0,1).toLowerCase()+e.substr(1)}function i(e){return e=e.replace(/[^a-zA-Z0-9$_\-\s.]/g,"").replace(/^[0-9_\-\s.]+/,""),n(e)}function s(e,t,r,n){const o={};return u.fs.readdirSync(e).forEach(a=>{let c;const l=u.path.join(e,a);try{c=u.fs.statSync(l)}catch(e){if(t.ignoreErrors)return;throw e}if(c.isDirectory()){if(t.recursive){const e=i(a),u=n?n+"."+e:e,c=s(l,t,r,u);if(Object.keys(c).length){if((!e.length||e in o)&&!t.ignoreErrors)throw new Error("Empty or duplicate camelized folder name: "+l);o[e]=c}}}else if(".sql"===u.path.extname(a).toLowerCase()){const e=i(a.replace(/\.[^/.]+$/,""));if((!e.length||e in o)&&!t.ignoreErrors)throw new Error("Empty or duplicate camelized file name: "+l);if(o[e]=l,r){const t=r(l,e,n?n+"."+e:e);void 0!==t&&(o[e]=t)}}}),o}function o(e,t,r){if(!u.utils.isText(e))throw new TypeError("Parameter 'dir' must be a non-empty text string.");return t&&"object"==typeof t||(t={}),r="function"==typeof r?r:null,s(e,t,r,"")}function a(e,t){function r(e,n){let i="",s=0;const o=u.utils.messageGap(n);for(let a in e){const u=e[a];s&&(i+=","),u&&"object"==typeof u?(i+=c+o+a+": {",i+=r(u,n+1),i+=c+o+"}"):(i+=c+o+a+": ",i+=t?t(u,a,e):JSON.stringify(u)),s++}return i}if(!e||"object"!=typeof e)throw new TypeError("Parameter 'obj' must be a non-null object.");return t="function"==typeof t?t:null,"{"+r(e,1)+c+"}"}const u={fs:e("fs"),path:e("path"),utils:e("./"),package:e("../../package.json")},c=e("os").EOL;t.exports={camelize:n,camelizeVar:i,enumSql:o,objectToCode:a,buildSqlModule:function(t){if(u.utils.isText(t)){const r=u.utils.isPathAbsolute(t)?t:u.path.join(u.utils.startDir,t);t=e(r)}else if(u.utils.isNull(t)){const r=u.path.join(u.utils.startDir,"sql-config.json");if(!u.fs.existsSync(r))throw new Error("Default SQL configuration file not found: "+r);t=e(r)}else if(!t||"object"!=typeof t)throw new TypeError("Invalid parameter 'config' specified.");if(!u.utils.isText(t.dir))throw new Error("Property 'dir' must be a non-empty string.");let r=0;const n=o(t.dir,{recursive:t.recursive,ignoreErrors:t.ignoreErrors},()=>{r++});let i="./loadSql",s="load";t.module&&"object"==typeof t.module&&(u.utils.isText(t.module.path)&&(i=t.module.path),u.utils.isText(t.module.name)&&(s=t.module.name));const l=new Date,p="/////////////////////////////////////////////////////////////////////////"+c+"// This file was automatically generated by pg-promise v."+u.package.version+c+"//"+c+"// Generated on: "+l.toLocaleDateString()+", at "+l.toLocaleTimeString()+c+"// Total files: "+r+c+"//"+c+"// API: http://vitaly-t.github.io/pg-promise/utils.html#.buildSqlModule"+c+"/////////////////////////////////////////////////////////////////////////"+c+c+"'use strict';"+c+c+"const "+s+" = require('"+i+"');"+c+c+"module.exports = "+a(n,e=>s+"("+JSON.stringify(e)+")")+";";if(u.utils.isText(t.output)){let e=t.output;u.utils.isPathAbsolute(e)||(e=u.path.join(u.utils.startDir,e)),u.fs.writeFileSync(e,p)}return p}},Object.freeze(t.exports)},{"../../package.json":53,"./":51,fs:void 0,os:void 0,path:void 0}],53:[function(e,t,r){t.exports={_args:[[{raw:"pg-promise@^6.3.0",scope:null,escapedName:"pg-promise",name:"pg-promise",rawSpec:"^6.3.0",spec:">=6.3.0 <7.0.0",type:"range"},"/Users/evgenytomsen/prj/recredia/postgres-to-json-schema"]],_from:"pg-promise@>=6.3.0 <7.0.0",_id:"pg-promise@6.3.0",_inCache:!0,_location:"/pg-promise",_nodeVersion:"4.8.3",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/pg-promise-6.3.0.tgz_1498943955116_0.34558538836427033"},_npmUser:{name:"vitaly.tomilov",email:"vitaly.tomilov@gmail.com"},_npmVersion:"2.15.11",_phantomChildren:{},_requested:{raw:"pg-promise@^6.3.0",scope:null,escapedName:"pg-promise",name:"pg-promise",rawSpec:"^6.3.0",spec:">=6.3.0 <7.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/pg-promise/-/pg-promise-6.3.0.tgz",_shasum:"9dca24e7449b4592b2190047c2f86fcae5e54864",_shrinkwrap:null,_spec:"pg-promise@^6.3.0",_where:"/Users/evgenytomsen/prj/recredia/postgres-to-json-schema",author:{name:"Vitaly Tomilov",email:"vitaly.tomilov@gmail.com"},bugs:{url:"https://github.com/vitaly-t/pg-promise/issues",email:"vitaly.tomilov@gmail.com"},dependencies:{manakin:"0.4",pg:"^6.4.0","pg-minify":"0.4",spex:"1.2"},description:"Promises interface for PostgreSQL",devDependencies:{"@types/node":"^7.0.33",JSONStream:"1.3",bluebird:"3.5",coveralls:"2.11",eslint:"^4.1.1",istanbul:"0.4","jasmine-node":"1.14",jsdoc:"3.4","pg-query-stream":"1.x",typescript:"2.4"},directories:{},dist:{shasum:"9dca24e7449b4592b2190047c2f86fcae5e54864",tarball:"https://registry.npmjs.org/pg-promise/-/pg-promise-6.3.0.tgz"},engines:{node:">=4.0",npm:">=2.15"},files:["lib","typescript"],gitHead:"cf9a55dad99967b845bb91fa9f7da79a1e4ff20e",homepage:"https://github.com/vitaly-t/pg-promise",keywords:["pg","promise","postgres"],license:"MIT",main:"lib/index.js",maintainers:[{name:"vitaly.tomilov",email:"vitaly.tomilov@gmail.com"}],name:"pg-promise",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/vitaly-t/pg-promise.git"},scripts:{coverage:"istanbul cover ./node_modules/jasmine-node/bin/jasmine-node test",doc:"jsdoc -c ./jsdoc/jsDoc.json ./jsdoc/README.md",lint:"eslint ./lib ./test/*.js ./test/db",test:"jasmine-node test","test-native":"jasmine-node test --config PG_NATIVE true",travis:"npm run lint && istanbul cover ./node_modules/jasmine-node/bin/jasmine-node test --captureExceptions && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"},typings:"typescript/pg-promise.d.ts",version:"6.3.0"}},{}],54:[function(e,t,r){function n(e){return String(e)}var i=e("./lib/textParsers"),s=e("./lib/binaryParsers"),o=e("./lib/arrayParser");r.getTypeParser=function(e,t){return t=t||"text",a[t]?a[t][e]||n:n},r.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),a[t][e]=r},r.arrayParser=o;var a={text:{},binary:{}};i.init(function(e,t){a.text[e]=t}),s.init(function(e,t){a.binary[e]=t})},{"./lib/arrayParser":55,"./lib/binaryParsers":56,"./lib/textParsers":57}],55:[function(e,t,r){var n=e("postgres-array");t.exports={create:function(e,t){return{parse:function(){return n.parse(e,t)}}}}},{"postgres-array":70}],56:[function(e,t,r){var n=function(e,t,r,n,i){r=r||0,n=n||!1,i=i||function(e,t,r){return e*Math.pow(2,r)+t};var s=r>>3,o=function(e){return n?255&~e:e},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a>>=r%8);var c=0;r%8+t>=8&&(c=i(0,o(e[s])&a,u));for(var l=t+r>>3,p=s+1;p<l;p++)c=i(c,o(e[p]),8);var f=(t+r)%8;return f>0&&(c=i(c,o(e[l])>>8-f,f)),c},i=function(e,t,r){var i=Math.pow(2,r-1)-1,s=n(e,1),o=n(e,r,1);if(0===o)return 0;var a=1,u=n(e,t,r+1,!1,function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)a/=2,(t&1<<r-n)>0&&(e+=a);return e});return o==Math.pow(2,r+1)-1?0===u?0===s?1/0:-1/0:NaN:(0===s?1:-1)*Math.pow(2,o-i)*u},s=function(e){return 1==n(e,1)?-1*(n(e,15,1,!0)+1):n(e,15,1)},o=function(e){return 1==n(e,1)?-1*(n(e,31,1,!0)+1):n(e,31,1)},a=function(e){return i(e,23,8)},u=function(e){return i(e,52,11)},c=function(e){var t=n(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,n(e,16,16)),i=0,s=n(e,16),o=0;o<s;o++)i+=n(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,n(e,16,48));return(0===t?1:-1)*Math.round(i*a)/a},l=function(e,t){var r=n(t,1),i=n(t,63,1),s=new Date((0===r?1:-1)*i/1e3+9466848e5);return e||s.setTime(s.getTime()+6e4*s.getTimezoneOffset()),s.usec=i%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(e){this.usec=e},s.getUTCMicroSeconds=function(){return this.usec},s},p=function(e){for(var t=n(e,32),r=(n(e,32,32),n(e,32,64)),i=96,s=[],o=0;o<t;o++)s[o]=n(e,32,i),i+=32,i+=32;var a=function(t){var r=n(e,32,i);if(i+=32,4294967295==r)return null;var s;return 23==t||20==t?(s=n(e,8*r,i),i+=8*r,s):25==t?s=e.toString(this.encoding,i>>3,(i+=r<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},u=function(e,t){var r,n=[];if(e.length>1){var i=e.shift();for(r=0;r<i;r++)n[r]=u(e,t);e.unshift(i)}else for(r=0;r<e[0];r++)n[r]=a(t);return n};return u(s,r)},f=function(e){return e.toString("utf8")},h=function(e){return null===e?null:n(e,8)>0};t.exports={init:function(e){e(21,s),e(23,o),e(26,o),e(1700,c),e(700,a),e(701,u),e(16,h),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,p),e(1007,p),e(1016,p),e(1008,p),e(1009,p),e(25,f)}}},{}],57:[function(e,t,r){function n(e){return function(t){return null===t?t:e(t)}}function i(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function s(e){return e?u.parse(e,i):null}function o(e){return e?u.parse(e,n(c.partialRight(parseInt,10))):null}function a(e){return e?u.parse(e,n(function(e){return w(e).trim()})):null}var u=e("postgres-array"),c=e("ap"),l=e("./arrayParser"),p=e("postgres-date"),f=e("postgres-interval"),h=e("postgres-bytea"),d=function(e){return e?l.create(e,function(e){return null!==e&&(e=_(e)),e}).parse():null},m=function(e){return e?l.create(e,function(e){return null!==e&&(e=parseFloat(e)),e}).parse():null},y=function(e){return e?l.create(e).parse():null},g=function(e){return e?l.create(e,function(e){return null!==e&&(e=p(e)),e}).parse():null},v=function(e){var t=y(e);return t?t.map(function(e){return h(e)}):t},b=function(e){return parseInt(e,10)},w=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},x=function(e){var t=y(e);return t?t.map(function(e){return JSON.parse(e)}):t},_=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},S=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,i=2;i<e.length-1;i++)n||(t+=e[i]),")"!==e[i]?n&&","!==e[i]&&(r+=e[i]):n=!0;var s=_(t);return s.radius=parseFloat(r),s};t.exports={init:function(e){e(20,w),e(21,b),e(23,b),e(26,b),e(700,parseFloat),e(701,parseFloat),e(16,i),e(1082,p),e(1114,p),e(1184,p),e(600,_),e(651,y),e(718,S),e(1e3,s),e(1001,v),e(1005,o),e(1007,o),e(1028,o),e(1016,a),e(1017,d),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,f),e(17,h),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,x),e(3807,x),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},{"./arrayParser":55,ap:3,"postgres-array":70,"postgres-bytea":71,"postgres-date":72,"postgres-interval":73}],58:[function(e,t,r){var n=e("crypto"),i=e("events").EventEmitter,s=e("util"),o=e("pgpass"),a=e("./type-overrides"),u=e("./connection-parameters"),c=e("./utils"),l=e("./query"),p=e("./defaults"),f=e("./connection"),h=function(e){i.call(this),this.connectionParameters=new u(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,this.password=this.connectionParameters.password,this.replication=this.connectionParameters.replication;var t=e||{};this._types=new a(t.types),this._ending=!1,this._connecting=!1,this._connectionError=!1,this.connection=t.connection||new f({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,client_encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||p.binary,this.encoding=this.connectionParameters.client_encoding||"utf8",this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1};s.inherits(h,i),h.prototype.connect=function(e){function t(e){return function(t){null!==r.password?e(t):o(r.connectionParameters,function(n){void 0!==n&&(r.connectionParameters.password=r.password=n),e(t)})}}var r=this,n=this.connection;this._connecting=!0,this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),n.on("authenticationCleartextPassword",t(function(){n.password(r.password)})),n.on("authenticationMD5Password",t(function(e){var t=h.md5(r.password+r.user),i="md5"+h.md5(Buffer.concat([new Buffer(t),e.salt]));n.password(i)})),n.once("backendKeyData",function(e){r.processID=e.processID,r.secretKey=e.secretKey}),n.once("readyForQuery",function(){r._connecting=!1,n.on("rowDescription",function(e){r.activeQuery.handleRowDescription(e)}),n.on("dataRow",function(e){r.activeQuery.handleDataRow(e)}),n.on("portalSuspended",function(e){r.activeQuery.handlePortalSuspended(n)}),n.on("emptyQuery",function(e){r.activeQuery.handleEmptyQuery(n)}),n.on("commandComplete",function(e){r.activeQuery.handleCommandComplete(e,n)}),n.on("parseComplete",function(e){r.activeQuery.name&&(n.parsedStatements[r.activeQuery.name]=!0)}),n.on("copyInResponse",function(e){r.activeQuery.handleCopyInResponse(r.connection)}),n.on("copyData",function(e){r.activeQuery.handleCopyData(e,r.connection)}),n.on("notification",function(e){r.emit("notification",e)}),e&&(e(null,r),e=null),r.emit("connect")}),n.on("readyForQuery",function(){var e=r.activeQuery;r.activeQuery=null,r.readyForQuery=!0,r._pulseQueryQueue(),e&&e.handleReadyForQuery(n)}),n.on("error",function(t){if(this.activeQuery){var i=r.activeQuery;return this.activeQuery=null,i.handleError(t,n)}if(this._connecting&&(this._connectionError=!0),!e)return this.emit("error",t);n.end(),e(t),e=null}.bind(this)),n.once("end",function(){if(e){var t=new Error("Connection terminated");return e(t),void(e=null)}if(this.activeQuery){var r=new Error("Connection terminated");this.activeQuery.handleError(r,n),this.activeQuery=null}this._ending||this._connectionError||this.emit("error",new Error("Connection terminated unexpectedly")),this.emit("end")}.bind(this)),n.on("notice",function(e){r.emit("notice",e)})},h.prototype.getStartupConf=function(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),t},h.prototype.cancel=function(e,t){if(e.activeQuery==t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(e.processID,e.secretKey)})}else-1!=e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)},h.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},h.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)},h.prototype.escapeIdentifier=function(e){for(var t='"',r=0;r<e.length;r++){var n=e[r];t+='"'===n?n+n:n}return t+='"'},h.prototype.escapeLiteral=function(e){for(var t=!1,r="'",n=0;n<e.length;n++){var i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r=" E"+r),r},h.prototype._pulseQueryQueue=function(){!0===this.readyForQuery&&(this.activeQuery=this.queryQueue.shift(),this.activeQuery?(this.readyForQuery=!1,this.hasExecuted=!0,this.activeQuery.submit(this.connection)):this.hasExecuted&&(this.activeQuery=null,this.emit("drain")))},h.prototype.copyFrom=function(e){throw new Error("For PostgreSQL COPY TO/COPY FROM support npm install pg-copy-streams")},h.prototype.copyTo=function(e){throw new Error("For PostgreSQL COPY TO/COPY FROM support npm install pg-copy-streams")};var d=c.deprecateEventEmitter(l);h.prototype.query=function(e,t,r){var n="function"==typeof e.submit?e:new d(e,t,r);return this.binary&&!n.binary&&(n.binary=!0),n._result&&(n._result._getTypeParser=this._types.getTypeParser.bind(this._types)),this.queryQueue.push(n),this._pulseQueryQueue(),n},h.prototype.end=function(e){this._ending=!0,this.connection.end(),e&&this.connection.once("end",e)},h.md5=function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")},h.Query=l,t.exports=h},{"./connection":60,"./connection-parameters":59,"./defaults":61,"./query":64,"./type-overrides":66,"./utils":67,crypto:void 0,events:void 0,pgpass:69,util:void 0}],59:[function(e,t,r){e("url");var n=e("dns"),i=e("./defaults"),s=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||i[e]},o=e("pg-connection-string").parse,a=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0}return i.ssl},u=function(e){(e="string"==typeof e?o(e):e||{}).connectionString&&(e=o(e.connectionString)),this.user=s("user",e),this.database=s("database",e),this.port=parseInt(s("port",e),10),this.host=s("host",e),this.password=s("password",e),this.binary=s("binary",e),this.ssl=void 0===e.ssl?a():e.ssl,this.client_encoding=s("client_encoding",e),this.replication=s("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=s("application_name",e,"PGAPPNAME"),this.fallback_application_name=s("fallback_application_name",e,!1)},c=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},l=function(e,t,r){var n=t[r];n&&e.push(r+"="+c(n))};u.prototype.getLibpqConnectionString=function(e){var t=[];l(t,this,"user"),l(t,this,"password"),l(t,this,"port"),l(t,this,"application_name"),l(t,this,"fallback_application_name");var r="object"==typeof this.ssl?this.ssl:{sslmode:this.ssl};if(l(t,r,"sslmode"),l(t,r,"sslca"),l(t,r,"sslkey"),l(t,r,"sslcert"),this.database&&t.push("dbname="+c(this.database)),this.replication&&t.push("replication="+c(this.replication)),this.host&&t.push("host="+c(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+c(this.client_encoding)),n.lookup(this.host,function(r,n){return r?e(r,null):(t.push("hostaddr="+c(n)),e(null,t.join(" ")))})},t.exports=u},{"./defaults":61,dns:void 0,"pg-connection-string":10,url:void 0}],60:[function(e,t,r){var n=e("net"),i=e("events").EventEmitter,s=e("util"),o=e("buffer-writer"),a=e("packet-reader"),u="indexOf"in Buffer.prototype?function(e,t,r){return e.indexOf(t,r)}:function(e,t,r){for(var n=r,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},c=function(e){i.call(this),e=e||{},this.stream=e.stream||new n.Stream,this._keepAlive=e.keepAlive,this.lastBuffer=!1,this.lastOffset=0,this.buffer=null,this.offset=null,this.encoding=e.client_encoding||"utf8",this.parsedStatements={},this.writer=new o,this.ssl=e.ssl||!1,this._ending=!1,this._mode=0,this._emitMessage=!1,this._reader=new a({headerSize:1,lengthPadding:-4});var t=this;this.on("newListener",function(e){"message"==e&&(t._emitMessage=!0)})};s.inherits(c,i),c.prototype.connect=function(t,r){"closed"===this.stream.readyState?this.stream.connect(t,r):"open"==this.stream.readyState&&this.emit("connect");var n=this;if(this.stream.on("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0),n.emit("connect")}),this.stream.on("error",function(e){n._ending&&"ECONNRESET"==e.code||n.emit("error",e)}),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(t){if("S"!=t.toString("utf8"))return n.emit("error",new Error("The server does not support SSL connections"));var i=e("tls");n.stream=i.connect({socket:n.stream,servername:r,rejectUnauthorized:n.ssl.rejectUnauthorized,ca:n.ssl.ca,pfx:n.ssl.pfx,key:n.ssl.key,passphrase:n.ssl.passphrase,cert:n.ssl.cert,NPNProtocols:n.ssl.NPNProtocols}),n.attachListeners(n.stream),n.emit("sslconnect"),n.stream.on("error",function(e){n.emit("error",e)})})},c.prototype.attachListeners=function(e){var t=this;e.on("data",function(e){t._reader.addChunk(e);for(var r=t._reader.read();r;){var n=t.parseMessage(r);t._emitMessage&&t.emit("message",n),t.emit(n.name,n),r=t._reader.read()}}),e.on("end",function(){t.emit("end")})},c.prototype.requestSsl=function(){var e=this.writer.addInt16(1234).addInt16(5679).flush(),t=e.length+4,r=(new o).addInt32(t).add(e).join();this.stream.write(r)},c.prototype.startup=function(e){var t=this.writer.addInt16(3).addInt16(0);Object.keys(e).forEach(function(r){var n=e[r];t.addCString(r).addCString(n)}),t.addCString("client_encoding").addCString("'utf-8'");var r=t.addCString("").flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.cancel=function(e,t){var r=this.writer.addInt16(1234).addInt16(5678).addInt32(e).addInt32(t).flush(),n=r.length+4,i=(new o).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.password=function(e){this._send(112,this.writer.addCString(e))},c.prototype._send=function(e,t){return!!this.stream.writable&&(!0!==t?this.stream.write(this.writer.flush(e)):void this.writer.addHeader(e))},c.prototype.query=function(e){this.stream.write(this.writer.addCString(e).flush(81))},c.prototype.parse=function(e,t){e.name=e.name||"",e.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied",e.name,"(",e.name.length,")"),console.error("This can cause conflicts and silent errors executing queries")),e.types=e.types||[];for(var r=e.types.length,n=this.writer.addCString(e.name).addCString(e.text).addInt16(r),i=0;i<r;i++)n.addInt32(e.types[i]);this._send(80,t)},c.prototype.bind=function(e,t){(e=e||{}).portal=e.portal||"",e.statement=e.statement||"",e.binary=e.binary||!1;for(var r=e.values||[],n=r.length,i=!1,s=0;s<n;s++)i|=r[s]instanceof Buffer;var o=this.writer.addCString(e.portal).addCString(e.statement);if(i)for(o.addInt16(n),s=0;s<n;s++)o.addInt16(r[s]instanceof Buffer);else o.addInt16(0);o.addInt16(n);for(var a=0;a<n;a++){var u=r[a];null===u||void 0===u?o.addInt32(-1):u instanceof Buffer?(o.addInt32(u.length),o.add(u)):(o.addInt32(Buffer.byteLength(u)),o.addString(u))}e.binary?(o.addInt16(1),o.addInt16(1)):o.addInt16(0),this._send(66,t)},c.prototype.execute=function(e,t){(e=e||{}).portal=e.portal||"",e.rows=e.rows||"",this.writer.addCString(e.portal).addInt32(e.rows),this._send(69,t)};var l=Buffer(0);c.prototype.flush=function(){this.writer.add(l),this._send(72)},c.prototype.sync=function(){this.writer.flush(0),this.writer.add(l),this._ending=!0,this._send(83)},c.prototype.end=function(){this.writer.add(l),this._ending=!0,this._send(88)},c.prototype.close=function(e,t){this.writer.addCString(e.type+(e.name||"")),this._send(67,t)},c.prototype.describe=function(e,t){this.writer.addCString(e.type+(e.name||"")),this._send(68,t)},c.prototype.sendCopyFromChunk=function(e){this.stream.write(this.writer.add(e).flush(100))},c.prototype.endCopyFrom=function(){this.stream.write(this.writer.add(l).flush(99))},c.prototype.sendCopyFail=function(e){this.writer.addCString(e),this._send(102)};var p=function(e,t){this.name=e,this.length=t};c.prototype.parseMessage=function(e){this.offset=0;var t=e.length+4;switch(this._reader.header){case 82:return this.parseR(e,t);case 83:return this.parseS(e,t);case 75:return this.parseK(e,t);case 67:return this.parseC(e,t);case 90:return this.parseZ(e,t);case 84:return this.parseT(e,t);case 68:return this.parseD(e,t);case 69:return this.parseE(e,t);case 78:return this.parseN(e,t);case 49:return new p("parseComplete",t);case 50:return new p("bindComplete",t);case 51:return new p("closeComplete",t);case 65:return this.parseA(e,t);case 110:return new p("noData",t);case 73:return new p("emptyQuery",t);case 115:return new p("portalSuspended",t);case 71:return this.parseG(e,t);case 72:return this.parseH(e,t);case 87:return new p("replicationStart",t);case 99:return new p("copyDone",t);case 100:return this.parsed(e,t)}},c.prototype.parseR=function(e,t){var r=new p("authenticationOk",t);if(8===r.length)return 3===this.parseInt32(e)&&(r.name="authenticationCleartextPassword"),r;if(12===r.length&&5===this.parseInt32(e))return r.name="authenticationMD5Password",r.salt=new Buffer(4),e.copy(r.salt,0,this.offset,this.offset+4),this.offset+=4,r;throw new Error("Unknown authenticationOk message type"+s.inspect(r))},c.prototype.parseS=function(e,t){var r=new p("parameterStatus",t);return r.parameterName=this.parseCString(e),r.parameterValue=this.parseCString(e),r},c.prototype.parseK=function(e,t){var r=new p("backendKeyData",t);return r.processID=this.parseInt32(e),r.secretKey=this.parseInt32(e),r},c.prototype.parseC=function(e,t){var r=new p("commandComplete",t);return r.text=this.parseCString(e),r},c.prototype.parseZ=function(e,t){var r=new p("readyForQuery",t);return r.name="readyForQuery",r.status=this.readString(e,1),r};c.prototype.parseT=function(e,t){var r=new p("rowDescription",t);r.fieldCount=this.parseInt16(e);for(var n=[],i=0;i<r.fieldCount;i++)n.push(this.parseField(e));return r.fields=n,r};var f=function(){this.name=null,this.tableID=null,this.columnID=null,this.dataTypeID=null,this.dataTypeSize=null,this.dataTypeModifier=null,this.format=null};c.prototype.parseField=function(e){var t=new f;return t.name=this.parseCString(e),t.tableID=this.parseInt32(e),t.columnID=this.parseInt16(e),t.dataTypeID=this.parseInt32(e),t.dataTypeSize=this.parseInt16(e),t.dataTypeModifier=this.parseInt32(e),0===this.parseInt16(e)?(this._mode=0,t.format="text"):(this._mode=1,t.format="binary"),t};var h=function(e,t){this.name="dataRow",this.length=e,this.fieldCount=t,this.fields=[]};c.prototype.parseD=function(e,t){for(var r=this.parseInt16(e),n=new h(t,r),i=0;i<r;i++)n.fields.push(this._readValue(e));return n},c.prototype._readValue=function(e){var t=this.parseInt32(e);return-1===t?null:0===this._mode?this.readString(e,t):this.readBytes(e,t)},c.prototype.parseE=function(e,t){for(var r,n,i={},s=new p("error",t),o=this.readString(e,1);"\0"!=o;)i[o]=this.parseCString(e),o=this.readString(e,1);if("error"===s.name){r=new Error(i.M);for(n in s)s.hasOwnProperty(n)&&(r[n]=s[n])}else(r=s).message=i.M;return r.severity=i.S,r.code=i.C,r.detail=i.D,r.hint=i.H,r.position=i.P,r.internalPosition=i.p,r.internalQuery=i.q,r.where=i.W,r.schema=i.s,r.table=i.t,r.column=i.c,r.dataType=i.d,r.constraint=i.n,r.file=i.F,r.line=i.L,r.routine=i.R,r},c.prototype.parseN=function(e,t){var r=this.parseE(e,t);return r.name="notice",r},c.prototype.parseA=function(e,t){var r=new p("notification",t);return r.processId=this.parseInt32(e),r.channel=this.parseCString(e),r.payload=this.parseCString(e),r},c.prototype.parseG=function(e,t){var r=new p("copyInResponse",t);return this.parseGH(e,r)},c.prototype.parseH=function(e,t){var r=new p("copyOutResponse",t);return this.parseGH(e,r)},c.prototype.parseGH=function(e,t){var r=0!==e[this.offset];this.offset++,t.binary=r;var n=this.parseInt16(e);t.columnTypes=[];for(var i=0;i<n;i++)t.columnTypes.push(this.parseInt16(e));return t},c.prototype.parsed=function(e,t){var r=new p("copyData",t);return r.chunk=this.readBytes(e,r.length-4),r},c.prototype.parseInt32=function(e){var t=e.readInt32BE(this.offset,!0);return this.offset+=4,t},c.prototype.parseInt16=function(e){var t=e.readInt16BE(this.offset,!0);return this.offset+=2,t},c.prototype.readString=function(e,t){return e.toString(this.encoding,this.offset,this.offset+=t)},c.prototype.readBytes=function(e,t){return e.slice(this.offset,this.offset+=t)},c.prototype.parseCString=function(e){var t=this.offset,r=u(e,0,t);return this.offset=r+1,e.toString(this.encoding,t,r)},t.exports=c},{"buffer-writer":4,events:void 0,net:void 0,"packet-reader":9,tls:void 0,util:void 0}],61:[function(e,t,r){t.exports={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:"win32"===process.platform?process.env.USERNAME:process.env.USER,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,poolSize:10,poolIdleTimeout:3e4,reapIntervalMillis:1e3,returnToHead:!1,poolLog:!1,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,parseInputDatesAsUTC:!1};var n=e("pg-types"),i=n.getTypeParser(20,"text"),s=n.getTypeParser(1016,"text");t.exports.__defineSetter__("parseInt8",function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):i),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):s)})},{"pg-types":54}],62:[function(e,t,r){var n=e("events").EventEmitter,i=e("util"),s=e("./client"),o=e("./defaults"),a=e("./connection"),u=e("./connection-parameters"),c=e("./pool-factory"),l=function(t){n.call(this),this.defaults=o,this.Client=t,this.Query=this.Client.Query,this.Pool=c(this.Client),this._pools=[],this.Connection=a,this.types=e("pg-types")};i.inherits(l,n),l.prototype.end=i.deprecate(function(){var e=this,t=Object.keys(this._pools),r=t.length;0===r?e.emit("end"):t.forEach(function(t){var n=e._pools[t];delete e._pools[t],n.pool.drain(function(){n.pool.destroyAllNow(function(){0===--r&&e.emit("end")})})})},"PG.end is deprecated - please see the upgrade guide at https://node-postgres.com/guides/upgrading"),l.prototype.connect=i.deprecate(function(e,t){"function"==typeof e&&(t=e,e=null),"string"==typeof e&&(e=new u(e)),(e=e||{}).max=e.max||e.poolSize||o.poolSize,e.idleTimeoutMillis=e.idleTimeoutMillis||e.poolIdleTimeout||o.poolIdleTimeout,e.log=e.log||e.poolLog||o.poolLog;var r=JSON.stringify(e);this._pools[r]=this._pools[r]||new this.Pool(e);var n=this._pools[r];return n.listeners("error").length||n.on("error",function(e){this.emit("error",e,e.client)}.bind(this)),n.connect(t)},"PG.connect is deprecated - please see the upgrade guide at https://node-postgres.com/guides/upgrading"),l.prototype.cancel=i.deprecate(function(e,t,r){if(t.native)return t.cancel(r);var n=e;"function"==typeof n&&(n=o),new this.Client(n).cancel(t,r)},"PG.cancel is deprecated - use client.cancel instead"),void 0!==process.env.NODE_PG_FORCE_NATIVE||(t.exports=new l(s))},{"./client":58,"./connection":60,"./connection-parameters":59,"./defaults":61,"./pool-factory":63,events:void 0,"pg-types":54,util:void 0}],63:[function(e,t,r){e("./client");var n=e("util"),i=e("pg-pool");t.exports=function(e){var t=function(t){var r={Client:e};for(var n in t)r[n]=t[n];i.call(this,r)};return n.inherits(t,i),t}},{"./client":58,"pg-pool":14,util:void 0}],64:[function(e,t,r){var n=e("events").EventEmitter,i=e("util"),s=e("./result"),o=e("./utils"),a=function(e,t,r){if(!(this instanceof a))return new a(e,t,r);e=o.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.stream=e.stream,this.portal=e.portal||"",this.callback=e.callback,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new s(e.rowMode,e.types),this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null,n.call(this)};i.inherits(a,n),a._on=a.on,a._once=a.once,a.prototype.then=function(e,t){return this._getPromise().then(e,t)},a.prototype.catch=function(e){return this._getPromise().catch(e)},a.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){var r=function(t){this.removeListener("error",n),this.removeListener("end",r),e(t)},n=function(e){this.removeListener("error",n),this.removeListener("end",r),t(e)};this._on("end",r),this._on("error",n)}.bind(this)),this._promise)},a.prototype.promise=i.deprecate(function(){return this._getPromise()},"Query.promise() is deprecated - see the upgrade guide at https://node-postgres.com/guides/upgrading"),a.prototype.requiresPreparation=function(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))},a.prototype.handleRowDescription=function(e){this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length},a.prototype.handleDataRow=function(e){var t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}},a.prototype.handleCommandComplete=function(e,t){this._result.addCommandComplete(e),this.isPreparedStatement&&t.sync()},a.prototype.handleEmptyQuery=function(e){this.isPreparedStatement&&e.sync()},a.prototype.handleReadyForQuery=function(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._result),this.emit("end",this._result)},a.prototype.handleError=function(e,t){if(this.isPreparedStatement&&t.sync(),this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)},a.prototype.submit=function(e){this.requiresPreparation()?this.prepare(e):e.query(this.text)},a.prototype.hasBeenParsed=function(e){return this.name&&e.parsedStatements[this.name]},a.prototype.handlePortalSuspended=function(e){this._getRows(e,this.rows)},a.prototype._getRows=function(e,t){e.execute({portal:this.portalName,rows:t},!0),e.flush()},a.prototype.prepare=function(e){var t=this;this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:t.text,name:t.name,types:t.types},!0),t.values&&(t.values=t.values.map(o.prepareValue)),e.bind({portal:t.portalName,statement:t.name,values:t.values,binary:t.binary},!0),e.describe({type:"P",name:t.portalName||""},!0),this._getRows(e,this.rows)},a.prototype.handleCopyInResponse=function(e){this.stream?this.stream.startStreamingToConnection(e):e.sendCopyFail("No source stream defined")},a.prototype.handleCopyData=function(e,t){var r=e.chunk;this.stream&&this.stream.handleChunk(r)},t.exports=a},{"./result":65,"./utils":67,events:void 0,util:void 0}],65:[function(e,t,r){var n=e("pg-types"),i=function(e){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=[],this.RowCtor=null,this.rowAsArray="array"==e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)},s=/([A-Za-z]+) ?(\d+ )?(\d+)?/;i.prototype.addCommandComplete=function(e){var t;(t=e.text?s.exec(e.text):s.exec(e.command))&&(this.command=t[1],t[3]?(this.rowCount=parseInt(t[3]||e.value,10),this.oid=parseInt(t[2],10)):this.rowCount=parseInt(t[2],10))},i.prototype._parseRowAsArray=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];null!==i?t.push(this._parsers[r](i)):t.push(null)}return t},i.prototype.parseRow=function(e){return new this.RowCtor(this._parsers,e)},i.prototype.addRow=function(e){this.rows.push(e)};var o=function(e,t){return"\nthis['"+e.replace(/'/g,"\\'")+"'] = rowData["+t+"] == null ? null : parsers["+t+"](rowData["+t+"]);"};i.prototype.addFields=function(e){this.fields.length&&(this.fields=[],this._parsers=[]);for(var t="",r=0;r<e.length;r++){var n=e[r];this.fields.push(n);var i=this._getTypeParser(n.dataTypeID,n.format||"text");this._parsers.push(i),t+=o(n.name,r)}this.rowAsArray||(this.RowCtor=Function("parsers","rowData",t))},i.prototype._getTypeParser=n.getTypeParser,t.exports=i},{"pg-types":54}],66:[function(e,t,r){function n(e){this._types=e||i,this.text={},this.binary={}}var i=e("pg-types");n.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},n.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},t.exports=n},{"pg-types":54}],67:[function(e,t,r){function n(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function i(e){for(var t="{",r=0;r<e.length;r++)r>0&&(t+=","),null===e[r]||void 0===e[r]?t+="NULL":Array.isArray(e[r])?t+=i(e[r]):t+=n(p(e[r]));return t+="}"}function s(e,t){if(e.toPostgres&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),p(e.toPostgres(p),t)}return JSON.stringify(e)}function o(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function a(e){var t=-e.getTimezoneOffset(),r=o(e.getFullYear(),4)+"-"+o(e.getMonth()+1,2)+"-"+o(e.getDate(),2)+"T"+o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3);return t<0?(r+="-",t*=-1):r+="+",r+o(Math.floor(t/60),2)+":"+o(t%60,2)}function u(e){return o(e.getUTCFullYear(),4)+"-"+o(e.getUTCMonth()+1,2)+"-"+o(e.getUTCDate(),2)+"T"+o(e.getUTCHours(),2)+":"+o(e.getUTCMinutes(),2)+":"+o(e.getUTCSeconds(),2)+"."+o(e.getUTCMilliseconds(),3)+"+00:00"}var c=e("util"),l=e("./defaults"),p=function(e,t){return e instanceof Buffer?e:e instanceof Date?l.parseInputDatesAsUTC?u(e):a(e):Array.isArray(e)?i(e):null===e||void 0===e?null:"object"==typeof e?s(e,t):e.toString()},f="Using the automatically created return value from client.query as an event emitter is deprecated and will be removed in pg@7.0. Please see the upgrade guide at https://node-postgres.com/guides/upgrading";t.exports={prepareValue:function(e){return p(e)},normalizeQueryConfig:function(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e},deprecateEventEmitter:function(e){var t=function(){e.apply(this,arguments)};return c.inherits(t,e),t.prototype._on=t.prototype.on,t.prototype._once=t.prototype.once,t.prototype.on=c.deprecate(t.prototype.on,f),t.prototype.once=c.deprecate(t.prototype.once,f),t}}},{"./defaults":61,util:void 0}],68:[function(e,t,r){"use strict";function n(e){return(e&p)==f}function i(){if(l instanceof o&&!0===l.writable){var e=Array.prototype.slice.call(arguments).concat("\n");l.write(u.format.apply(u,e))}}var s=e("path"),o=e("stream").Stream,a=e("split"),u=e("util"),c="win32"===process.platform,l=process.stderr,p=61440,f=32768,h=["host","port","database","user","password"],d=h.length,m=h[d-1];Object.defineProperty(t.exports,"isWin",{get:function(){return c},set:function(e){c=e}}),t.exports.warnTo=function(e){var t=l;return l=e,t},t.exports.getFileName=function(e){return(e=e||process.env).PGPASSFILE||(c?s.join(e.APPDATA,"postgresql","pgpass.conf"):s.join(e.HOME,".pgpass"))},t.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!c||(t=t||"<unkn>",n(e.mode)?!(63&e.mode)||(i('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):(i('WARNING: password file "%s" is not a plain file',t),!1)))};var y=t.exports.match=function(e,t){return h.slice(0,-1).reduce(function(r,n,i){return 1==i&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])},!0)};t.exports.getPassword=function(e,t,r){var n,s=t.pipe(new a),o=function(e){t.destroy(),i("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",o),s.on("data",function(t){var r=g(t);r&&v(r)&&y(e,r)&&(n=r[m],s.end())}).on("end",function(){t.destroy(),r(n)}).on("error",o)};var g=t.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,i=0,s={},o=function(t,r,n){var i=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),s[h[t]]=i},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),r=e.charAt(a),n==d-1){o(n,i);break}a>=0&&":"==t&&"\\"!==r&&(o(n,i,a+1),i=a+2,n+=1)}return s=Object.keys(s).length===d?s:null},v=t.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<h.length;r+=1)if(!(0,t[r])(e[h[r]]||""))return!1;return!0}},{path:void 0,split:87,stream:void 0,util:void 0}],69:[function(e,t,r){"use strict";e("path");var n=e("fs"),i=e("./helper.js");t.exports=function(e,t){var r=i.getFileName();n.stat(r,function(s,o){if(s||!i.usePgPass(o,r))return t(void 0);var a=n.createReadStream(r);i.getPassword(e,a,t)})},t.exports.warnTo=i.warnTo},{"./helper.js":68,fs:void 0,path:void 0}],70:[function(e,t,r){"use strict";function n(e,t){this.source=e,this.transform=t||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}function i(e){return e}r.parse=function(e,t){return new n(e,t).parse()},n.prototype.isEof=function(){return this.position>=this.source.length},n.prototype.nextCharacter=function(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}},n.prototype.record=function(e){this.recorded.push(e)},n.prototype.newEntry=function(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])},n.prototype.parse=function(e){for(var t,r,i;!this.isEof();)if("{"!==(t=this.nextCharacter()).value||i){if("}"!==t.value||i)'"'!==t.value||t.escaped?","!==t.value||i?this.record(t.value):this.newEntry():(i&&this.newEntry(!0),i=!i);else if(!--this.dimension&&(this.newEntry(),e))return this.entries}else++this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}},{}],71:[function(e,t,r){"use strict";t.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")}},{}],72:[function(e,t,r){"use strict";function n(e){var t=o.exec(e),r=parseInt(t[1],10),n=parseInt(t[2],10)-1,i=t[3],s=new Date(r,n,i);return s.setFullYear(r),s}function i(e){var t=a.exec(e.split(" ")[1]);if(t){var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}}var s=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?/,o=/^(\d{1,})-(\d{2})-(\d{2})$/,a=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,u=/BC$/,c=/^-?infinity$/;t.exports=function(e){if(c.test(e))return Number(e.replace("i","I"));var t=s.exec(e);if(!t)return o.test(e)?n(e):null;var r=u.test(e),a=parseInt(t[1],10),l=a>0&&a<100;a=(r?"-":"")+a;var p=parseInt(t[2],10)-1,f=t[3],h=parseInt(t[4],10),d=parseInt(t[5],10),m=parseInt(t[6],10),y=t[7];y=y?1e3*parseFloat(y):0;var g,v=i(e);if(null!=v){var b=Date.UTC(a,p,f,h,d,m,y);g=new Date(b-v)}else g=new Date(a,p,f,h,d,m,y);return l&&g.setUTCFullYear(a),g}},{}],73:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);o(this,s(e))}function i(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function s(e){if(!e)return{};var t=p.exec(e),r="-"===t[8];return Object.keys(f).reduce(function(e,n){var s=f[n],o=t[s];return o&&(o="milliseconds"===n?i(o):parseInt(o,10))?(r&&~h.indexOf(n)&&(o*=-1),e[n]=o,e):e},{})}var o=e("xtend/mutable");t.exports=n;var a=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var e=a.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map(function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t+="."+String(1e3*this.milliseconds).replace(/[0]+$/g,"")),t+" "+e},this).join(" ")};var u={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},c=["years","months","days"],l=["hours","minutes","seconds"];n.prototype.toISO=function(){function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t+="."+String(1e3*this.milliseconds).replace(/[0]+$/g,"")),t+u[e]}return"P"+c.map(e,this).join("")+"T"+l.map(e,this).join("")};var p=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d).?(\\d{1,6})?"].map(function(e){return"("+e+")?"}).join("\\s*")),f={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},h=["hours","minutes","seconds"]},{"xtend/mutable":89}],74:[function(e,t,r){"use strict";function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);if(this.create=e,this.resolve=t,this.reject=r,"function"!=typeof e)throw new TypeError("Adapter requires a function to create a promise.");if("function"!=typeof t)throw new TypeError("Adapter requires a function to resolve a promise.");if("function"!=typeof r)throw new TypeError("Adapter requires a function to reject a promise.")}t.exports=n},{}],75:[function(e,t,r){"use strict";function n(e,t,r){this.data=e,this.getErrors=function(){for(var r=new Array(t.length),s=0;s<t.length;s++)r[s]=e[t[s]].result,r[s]instanceof n&&(r[s]=r[s].getErrors());return i.utils.extend(r,"$isErrorList",!0),r};for(var s=this.getErrors(),o=s[0];o&&o.$isErrorList;)o=o[0];this.first=o,o instanceof Error?this.message=o.message:("string"!=typeof o&&(o=i.u.inspect(o)),this.message=o),this.stat={total:e.length,succeeded:e.length-s.length,failed:s.length,duration:r},Error.captureStackTrace(this,n)}var i={u:e("util"),os:e("os"),utils:e("../utils/static")};i.u.inherits(n,Error),n.prototype.name="BatchError",n.prototype.toString=function(e){e=e>0?parseInt(e):0;var t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=i.utils.messageGap(e+2),s=["BatchError {",r+"stat: { total: "+this.stat.total+", succeeded: "+this.stat.succeeded+", failed: "+this.stat.failed+", duration: "+this.stat.duration+" }",r+"errors: ["],o=0;return this.data.forEach(function(t,r){!t.success&&o<5&&(s.push(n+r+": "+i.utils.formatError(t.result,e+2)),o++)}),s.push(r+"]"),s.push(t+"}"),s.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils/static":86,os:void 0,util:void 0}],76:[function(e,t,r){"use strict";var n={BatchError:e("./batch"),PageError:e("./page"),SequenceError:e("./sequence")};t.exports={BatchError:n.BatchError,PageError:n.PageError,SequenceError:n.SequenceError},Object.freeze(t.exports)},{"./batch":75,"./page":77,"./sequence":78}],77:[function(e,t,r){"use strict";function n(e,t,r,o){this.index=e.index,this.duration=o,this.error=e.error,"source"in e&&(this.source=e.source),"dest"in e&&(this.dest=e.dest),this.error instanceof Error?this.message=this.error.message:(this.message=this.error,"string"!=typeof this.message&&(this.message=i.u.inspect(this.message))),t?(r=r?"'"+r+"'":"<anonymous>",this.reason=i.u.format(s[t],r,e.index)):this.reason=i.u.format(s[t],e.index),Error.captureStackTrace(this,n)}var i={u:e("util"),os:e("os"),utils:e("../utils/static")},s={0:"Page with index %d rejected.",1:"Source %s returned a rejection at index %d.",2:"Source %s threw an error at index %d.",3:"Destination %s returned a rejection at index %d.",4:"Destination %s threw an error at index %d.",5:"Source %s returned a non-array value at index %d."};i.u.inherits(n,Error),n.prototype.name="PageError",n.prototype.toString=function(e){e=e>0?parseInt(e):0;var t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=["PageError {",r+"message: "+JSON.stringify(this.message),r+"reason: "+this.reason,r+"index: "+this.index,r+"duration: "+this.duration];return n.push(r+"error: "+i.utils.formatError(this.error,e+1)),n.push(t+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils/static":86,os:void 0,util:void 0}],78:[function(e,t,r){"use strict";function n(e,t,r,o){this.index=e.index,this.duration=o,this.error=e.error,this.error instanceof Error?this.message=this.error.message:(this.message=this.error,"string"!=typeof this.message&&(this.message=i.u.inspect(this.message))),"source"in e?this.source=e.source:this.dest=e.dest,r=r?"'"+r+"'":"<anonymous>",this.reason=i.u.format(s[t],r,e.index),Error.captureStackTrace(this,n)}var i={u:e("util"),os:e("os"),utils:e("../utils/static")},s={0:"Source %s returned a rejection at index %d.",1:"Source %s threw an error at index %d.",2:"Destination %s returned a rejection at index %d.",3:"Destination %s threw an error at index %d."};i.u.inherits(n,Error),n.prototype.name="SequenceError",n.prototype.toString=function(e){e=e>0?parseInt(e):0;var t=i.utils.messageGap(e),r=i.utils.messageGap(e+1),n=["SequenceError {",r+"message: "+JSON.stringify(this.message),r+"reason: "+this.reason,r+"index: "+this.index,r+"duration: "+this.duration];return n.push(r+"error: "+i.utils.formatError(this.error,e+1)),n.push(t+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},t.exports=n},{"../utils/static":86,os:void 0,util:void 0}],79:[function(e,t,r){"use strict";function n(e,t,r){var n=r.promise,s=r.utils;if(!Array.isArray(e))return n.reject(new TypeError("Method 'batch' requires an array of values."));if(!e.length){var o=[];return s.extend(o,"duration",0),n.resolve(o)}t=s.wrap(t);var a=this,u=Date.now();return n(function(r,n){function o(e,o,h){function d(t){var r=o?{success:!1}:f[e];o&&(f[e]=r,l.push(e)),r.result=t,r.origin={success:o,result:h}}function m(){if(!--p)if(l.length){if(l.sort(),l.length<f.length)for(var e=0,t=0;e<f.length;e++)e===l[t]?t++:f[e]={success:!0,result:f[e]};n(new i(f,l,Date.now()-u))}else s.extend(f,"duration",Date.now()-u),r(f);return null}if(t){var y,g=Date.now(),v=e?g-c:void 0;c=g;try{y=t.call(a,e,o,h,v)}catch(e){d(e)}s.isPromise(y)?y.then(m).catch(function(e){d(e),m()}):m()}else m()}var c,l=[],p=e.length,f=new Array(p);e.forEach(function(e,t){s.resolve.call(a,e,null,function(e){f[t]=e,o(t,!0,e)},function(e){f[t]={success:!1,result:e},l.push(t),o(t,!1,e)})})})}var i=e("../errors/batch");t.exports=function(e){return function(t,r){return r&&"object"==typeof r?n.call(this,t,r.cb,e):n.call(this,t,r,e)}}},{"../errors/batch":75}],80:[function(e,t,r){"use strict";function n(e,t,r,n){var s=n.promise,o=n.spex,a=n.utils;if("function"!=typeof e)return s.reject(new TypeError("Parameter 'source' must be a function."));r=r>0?parseInt(r):0,e=a.wrap(e),t=a.wrap(t);var u,c,l,p=this,f=Date.now(),h=0;return s(function(n,s){function d(m){function y(){return r===++m?g():d(m),null}function g(){n({pages:m,total:h,duration:Date.now()-f})}function v(e,t,r){e.index=m,s(new i(e,t,r,Date.now()-f))}var b=Date.now(),w=m?b-c:void 0;c=b,a.resolve.call(p,e,[m,u,w],function(r){void 0===r?g():r instanceof Array?o.batch(r).then(function(e){if(u=e,h+=e.length,t){var r,n=Date.now(),i=m?n-l:void 0;l=n;try{r=t.call(p,m,e,i)}catch(r){return void v({error:r,dest:e},4,t.name)}a.isPromise(r)?r.then(y).catch(function(r){v({error:r,dest:e},3,t.name)}):y()}else y();return null}).catch(function(e){v({error:e},0)}):v({error:new Error("Unexpected data returned from the source."),source:u},5,e.name)},function(t,r){v({error:t,source:u},r?1:2,e.name)})}d(0)})}var i=e("../errors/page");t.exports=function(e){return function(t,r,i){return r&&"object"==typeof r?n.call(this,t,r.dest,r.limit,e):n.call(this,t,r,i,e)}}},{"../errors/page":77}],81:[function(e,t,r){"use strict";function n(e,t,r,n,s){var o=s.promise,a=s.utils;if("function"!=typeof e)return o.reject(new TypeError("Parameter 'source' must be a function."));r=r>0?parseInt(r):0,e=a.wrap(e),t=a.wrap(t);var u,c,l,p=this,f=[],h=Date.now();return o(function(s,d){function m(y){function g(e){r===++y?v():e?m(y):o.resolve().then(function(){return m(y),null})}function v(){var e=Date.now()-h;n?a.extend(f,"duration",e):f={total:y,duration:e},s(f)}function b(e,t,r){e.index=y,d(new i(e,t,r,Date.now()-h))}var w=Date.now(),x=y?w-c:void 0;c=w,a.resolve.call(p,e,[y,u,x],function(e,r){if(void 0===(u=e))v();else if(n&&f.push(u),t){var i,s=Date.now(),o=y?s-l:void 0;l=s;try{i=t.call(p,y,u,o)}catch(e){return void b({error:e,dest:u},3,t.name)}a.isPromise(i)?i.then(function(){return g(!0),null}).catch(function(e){b({error:e,dest:u},2,t.name)}):g(r)}else g(r)},function(t,r){b({error:t,source:u},r?0:1,e.name)})}m(0)})}var i=e("../errors/sequence");t.exports=function(e){return function(t,r,i,s){return r&&"object"==typeof r?n.call(this,t,r.dest,r.limit,r.track,e):n.call(this,t,r,i,s,e)}}},{"../errors/sequence":78}],82:[function(e,t,r){"use strict";var n={read:e("./read")};t.exports=function(e){var t={read:n.read(e)};return Object.freeze(t),t}},{"./read":83}],83:[function(e,t,r){"use strict";function n(e,t,r,n,i){var s=i.promise,o=i.utils;if(!o.isReadableStream(e))return s.reject(new TypeError("Readable stream is required."));if("function"!=typeof t)return s.reject(new TypeError("Invalid stream receiver."));n=n>0?parseInt(n):null,t=o.wrap(t);var a,u,c,l,p=this,f=0,h=0,d=Date.now(),m=0;return s(function(i,s){function y(){u=!0,w()}function g(){r||x()}function v(){x()}function b(e){_(e)}function w(){if(u&&!l&&!c){u=!1,c=!0;var r,i=[];do{(r=e.read(n))&&(i.push(r),h+=r.length||0,f++)}while(r);if(i.length){var s,d=Date.now(),y=m?d-a:void 0;a=d;try{s=t.call(p,m++,i,y)}catch(e){return void _(e)}o.isPromise(s)?s.then(function(){return c=!1,w(),null}).catch(function(e){_(e)}):(c=!1,w())}else c=!1}}function x(){S(),i({calls:m,reads:f,length:h,duration:Date.now()-d})}function _(e){l=!0,S(),s(e)}function S(){e.removeListener("readable",y),e.removeListener("close",v),e.removeListener("error",b),e.removeListener("end",g)}e.on("readable",y),e.on("end",g),e.on("close",v),e.on("error",b)})}t.exports=function(e){return function(t,r,i,s){return i&&"object"==typeof i?n.call(this,t,r,i.closable,i.readSize,e):n.call(this,t,r,i,s,e)}}},{}],84:[function(e,t,r){"use strict";function n(e){var t={},r=i(e),n={spex:t,promise:r,utils:s.utils(r)};return t.errors=s.errors,t.batch=s.batch(n),t.page=s.page(n),t.sequence=s.sequence(n),t.stream=s.stream(n),n.utils.extend(t,"$p",r),Object.freeze(t),t}function i(e){if(e){var t;if(e instanceof n.PromiseAdapter)return t=function(t){return e.create(t)},t.resolve=e.resolve,t.reject=e.reject,t;var r=typeof e;if("function"===r||"object"===r){var i="function"==typeof e.Promise?e.Promise:e;if(t=function(e){return new i(e)},t.resolve=i.resolve,t.reject=i.reject,"function"==typeof t.resolve&&"function"==typeof t.reject)return t}}throw new TypeError("Invalid promise library specified.")}var s={utils:e("./utils"),batch:e("./ext/batch"),page:e("./ext/page"),sequence:e("./ext/sequence"),stream:e("./ext/stream"),errors:e("./errors")};n.PromiseAdapter=e("./adapter"),Object.freeze(n),t.exports=n},{"./adapter":74,"./errors":76,"./ext/batch":79,"./ext/page":80,"./ext/sequence":81,"./ext/stream":82,"./utils":85}],85:[function(e,t,r){"use strict";var n=e("./static");t.exports=function(e){function t(t){return function(){function r(t){return t.done?e.resolve(t.value):e.resolve(t.value).then(function(e){return r(n.next(e))},function(e){return r(n.throw(e))})}var n=t.apply(this,arguments);return r(n.next())}}var r={formatError:n.formatError,isPromise:n.isPromise,isReadableStream:n.isReadableStream,messageGap:n.messageGap,extend:n.extend,resolve:function(e,n,i,s){function o(){for(;"function"==typeof e;){"GeneratorFunction"===e.constructor.name&&(e=t(e));try{e=n?e.apply(a,n):e.call(a)}catch(e){return void s(e,!1)}}r.isPromise(e)?e.then(function(t){return u=!0,e=t,o(),null}).catch(function(e){s(e,!0)}):i(e,u)}var a=this,u=!1;o()},wrap:function(e){return"function"==typeof e?"GeneratorFunction"===e.constructor.name?t(e):e:null}};return r}},{"./static":86}],86:[function(e,t,r){"use strict";function n(e){return Array(1+4*e).join(" ")}var i=e("stream"),s=e("util");t.exports={formatError:function(e,t){var r=["BatchError","PageError","SequenceError"],i=s.inspect(e);if(e instanceof Error)if(-1===r.indexOf(e.name)){var o=n(t);i=i.split("\n").map(function(e,t){return(t?o:"")+e}).join("\n")}else i=e.toString(t);return i},isPromise:function(e){return e&&"function"==typeof e.then},isReadableStream:function(e){return e instanceof i.Stream&&"function"==typeof e._read&&"object"==typeof e._readableState},messageGap:n,extend:function(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!1,enumerable:!1,writable:!1})}}},{stream:void 0,util:void 0}],87:[function(e,t,r){var n=e("through"),i=e("string_decoder").StringDecoder;t.exports=function(e,t,r){function s(e,r){if(t){try{r=t(r)}catch(t){return e.emit("error",t)}void 0!==r&&e.queue(r)}else e.queue(r)}function o(t,r){var n=((null!=u?u:"")+r).split(e);u=n.pop(),c&&u.length>c&&t.emit("error",new Error("maximum buffer reached"));for(var i=0;i<n.length;i++)s(t,n[i])}var a=new i,u="",c=r&&r.maxLength,l=!r||!1!==r.trailing;return"function"==typeof e&&(t=e,e=null),e||(e=/\r?\n/),n(function(e){o(this,a.write(e))},function(){a.end&&o(this,a.end()),l&&null!=u&&s(this,u),this.queue(null)})}},{string_decoder:void 0,through:88}],88:[function(e,t,r){function n(e,t,r){function n(){for(;u.length&&!l.paused;){var e=u.shift();if(null===e)return l.emit("end");l.emit("data",e)}}function s(){l.writable=!1,t.call(l),!l.readable&&l.autoDestroy&&l.destroy()}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var o=!1,a=!1,u=[],c=!1,l=new i;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(r&&!1===r.autoDestroy),l.write=function(t){return e.call(this,t),!l.paused},l.queue=l.push=function(e){return c?l:(null===e&&(c=!0),u.push(e),n(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&process.nextTick(function(){l.destroy()})}),l.end=function(e){if(!o)return o=!0,arguments.length&&l.write(e),s(),l},l.destroy=function(){if(!a)return a=!0,o=!0,u.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),n(),l.paused||l.emit("drain"),l},l}var i=e("stream");t.exports=n,n.through=n},{stream:void 0}],89:[function(e,t,r){t.exports=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},{}]},{},[1])(1)});