!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).main=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";function n(t,e){let r=`\t"${t}": {\n`;switch(e){case"integer":case"bigint":r+=`\t\t\t"type": "number"\n\t\t}`;break;case"character varying":r+=`\t\t\t"type": "string"\n\t\t}`;break;case"timestamp without time zone":r+=`\t\t\t"type": "number",\n`,r+=`\t\t\t"format": "date-time"\n\t\t}`;break;case"time without time zone":r+=`\t\t\t"type": "string",\n`,r+=`\t\t\t"pattern": "^0?([0-9][0-2]?):([0-5][0-9])$"\n\t\t}`;break;case"uuid":r+=`\t\t\t"type": "string",\n`,r+=`\t\t\t"pattern": "^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$"\n\t\t}`;break;case"date":r+=`\t\t\t"type": "string",\n`,r+=`\t\t\t"format": "date-time"\n\t\t}`;break;case"double precision":r+=`\t\t\t"type": "number"\n\t\t}`;break;case"bytea":r+=`\t\t\t"type": "string"\n\t\t}`;break;default:return console.error(`Unknown type ${e}" for the field ${t}`),""}return r}function i(t,e){let r="";const i=[];let o;for(var s in e)(o=`\t${n(s,e[s].data_type)}`)&&r&&(r+=`,\n`),r+=o,e[s].is_nullable||i.push(s);return`{\n\t"title": "${t}",\n\t"type": "object",\n\t"properties": {\n${r}\n\t},\n\t"required": ${JSON.stringify(i)},\n\t"additionalProperties": true\n}`}function o(t){return s(this,void 0,void 0,function*(){const e=f(p)(t),r=yield Promise.all([e.getTables("public"),e.getColumns("public"),e.getConstraints("public")]);return{tables:r[0],columns:r[1],constraints:r[2]}})}var s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r(function(e){e(t.value)}).then(s,a)}u((n=n.apply(t,e||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0});const a=t("./sql"),u=t("lodash.groupby"),c=t("lodash.transform"),l=t("lodash.keyby"),f=t("pg-promise"),p={pgNative:!1,extend:t=>{t.getTables=(e=>t.any(a.default.getTables,[e])),t.getColumns=(e=>t.any(a.default.getColumns,[e])),t.getConstraints=(e=>t.any(a.default.getConstraints,[e]))}};r.generateSchema=function(t,e){return s(this,void 0,void 0,function*(){try{const n=yield o(t),s=u(n.columns,"table_name"),a=c(l(n.tables,"table_name"),(t,e,r)=>{t[r]=Object.assign({},e,{columns:l(s[r],"column_name")})});c(u(n.constraints,"table_name"),(t,e,r)=>{t[r]=u(e,"column_name")});for(var r in a)fs.writeFileSync(`${e}/${r}.table.json`,i(r,a[r].columns))}catch(t){console.error(t)}})}},{"./sql":2,"lodash.groupby":6,"lodash.keyby":7,"lodash.transform":8,"pg-promise":40}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={getTables:Buffer("c2VsZWN0IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgb2JqX2Rlc2NyaXB0aW9uKCh0YWJsZV9zY2hlbWEgfHwgJy4nIHx8IHRhYmxlX25hbWUpOjpyZWdjbGFzcywgJ3BnX2NsYXNzJykgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIHdoZXJlIHRhYmxlX3NjaGVtYSA9ICQxIG9yZGVyIGJ5IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZQ==","base64").toString(),getColumns:Buffer("c2VsZWN0IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgY29sdW1uX25hbWUsIGNvbHVtbl9kZWZhdWx0LCBpc19udWxsYWJsZTo6Ym9vbGVhbiwgZGF0YV90eXBlLCBjb2xfZGVzY3JpcHRpb24oKHRhYmxlX3NjaGVtYSB8fCAnLicgfHwgdGFibGVfbmFtZSk6OnJlZ2NsYXNzLCBvcmRpbmFsX3Bvc2l0aW9uKQpmcm9tIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zCndoZXJlIHRhYmxlX3NjaGVtYSA9ICQxCm9yZGVyIGJ5IHRhYmxlX3NjaGVtYSwgdGFibGVfbmFtZSwgb3JkaW5hbF9wb3NpdGlvbg==","base64").toString(),getConstraints:Buffer("c2VsZWN0CiAgY29hbGVzY2UodGFibGVfc2NoZW1hLCByZWZlcmVuY2VkX3NjaGVtYSkgYXMgdGFibGVfc2NoZW1hLAogIGNvYWxlc2NlKHRhYmxlX25hbWUsIHJlZmVyZW5jZWRfdGFibGUpIGFzIHRhYmxlX25hbWUsCiAgY29hbGVzY2UoY29sdW1uX25hbWUsIHJlZmVyZW5jZWRfY29sdW1uKSBhcyBjb2x1bW5fbmFtZSwKICBjb25zdHJhaW50X3NjaGVtYSwKICBjb25zdHJhaW50X25hbWUsCiAgY29uc3RyYWludF90eXBlLAogIGNoZWNrX2NsYXVzZSwKICByZWZlcmVuY2VkX3NjaGVtYSwKICByZWZlcmVuY2VkX3RhYmxlLAogIHJlZmVyZW5jZWRfY29sdW1uCiAgCmZyb20gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlX2NvbnN0cmFpbnRzCm5hdHVyYWwgZnVsbCBqb2luIGluZm9ybWF0aW9uX3NjaGVtYS5rZXlfY29sdW1uX3VzYWdlCm5hdHVyYWwgZnVsbCBqb2luIGluZm9ybWF0aW9uX3NjaGVtYS5jaGVja19jb25zdHJhaW50cwppbm5lciBqb2luICgKICBzZWxlY3QKICAgIHRhYmxlX3NjaGVtYSBhcyByZWZlcmVuY2VkX3NjaGVtYSwKICAgIHRhYmxlX25hbWUgYXMgcmVmZXJlbmNlZF90YWJsZSwKICAgIGNvbHVtbl9uYW1lIGFzIHJlZmVyZW5jZWRfY29sdW1uLAogICAgY29uc3RyYWludF9uYW1lCiAgZnJvbSBpbmZvcm1hdGlvbl9zY2hlbWEuY29uc3RyYWludF9jb2x1bW5fdXNhZ2UKKSBhcyByZWZlcmVuY2VkX2NvbHVtbnMgdXNpbmcgKGNvbnN0cmFpbnRfbmFtZSkKCndoZXJlIGNvbnN0cmFpbnRfc2NoZW1hID0gJDEKb3JkZXIgYnkgdGFibGVfc2NoZW1hLCB0YWJsZV9uYW1lLCBvcmRpbmFsX3Bvc2l0aW9u","base64").toString()}},{}],3:[function(t,e,r){function n(t,e){return function(){var r=[].slice.call(arguments),n=t.slice();return n.push.apply(n,r),e.apply(this,n)}}function i(t,e){return function(){var r=[].slice.call(arguments);return r.push.apply(r,t),e.apply(this,r)}}function o(t){return n([].slice.call(arguments,1),t)}function s(t){return i([].slice.call(arguments,1),t)}(r=e.exports=n).pa=i,r.apa=function(t,e,r){return function(){return r.apply(this,t.concat.apply(t,arguments).concat(e))}},r.partial=o,r.partialRight=s,r.curry=function(t){return o(o,t)},r.curryRight=function(t){return o(s,t)}},{}],4:[function(t,e,r){var n=e.exports=function(t){this.size=t||1024,this.buffer=Buffer(this.size+5),this.offset=5,this.headerPosition=0};n.prototype._ensure=function(t){if(this.buffer.length-this.offset<t){var e=this.buffer,r=e.length+(e.length>>1)+t;this.buffer=new Buffer(r),e.copy(this.buffer)}},n.prototype.addInt32=function(t){return this._ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this},n.prototype.addInt16=function(t){return this._ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this};var i=function(t,e,r,n){t.write(e,r,n)};3===Buffer.prototype.write.length&&(i=function(t,e,r,n){t.write(e,r)}),n.prototype.addCString=function(t){if(t){var e=Buffer.byteLength(t);this._ensure(e+1),i(this.buffer,t,this.offset,e),this.offset+=e}else this._ensure(1);return this.buffer[this.offset++]=0,this},n.prototype.addChar=function(t){return this._ensure(1),i(this.buffer,t,this.offset,1),this.offset++,this},n.prototype.addString=function(t){t=t||"";var e=Buffer.byteLength(t);return this._ensure(e),this.buffer.write(t,this.offset),this.offset+=e,this},n.prototype.getByteLength=function(){return this.offset-5},n.prototype.add=function(t){return this._ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this},n.prototype.clear=function(){this.offset=5,this.headerPosition=0,this.lastEnd=0},n.prototype.addHeader=function(t,e){var r=this.offset;this.offset=this.headerPosition,this.buffer[this.offset++]=t,this.addInt32(r-(this.headerPosition+1)),this.headerPosition=r,this.offset=r,e||(this._ensure(5),this.offset+=5)},n.prototype.join=function(t){return t&&this.addHeader(t,!0),this.buffer.slice(t?0:5,this.offset)},n.prototype.flush=function(t){var e=this.join(t);return this.clear(),e}},{}],5:[function(t,e,r){function n(t){if(!(this instanceof n))return new n;this._size=t,this._slots=null,this._total=null,t=Math.max(0|+t,1),this._slots=[];for(var e=0;e<t;e+=1)this._slots.push([])}function i(t,e,r){var n=function(){t()?e(n):r()};n()}function o(t){if(!(this instanceof o))return new o(t);if(t.validate&&t.validateAsync)throw new Error("Only one of validate or validateAsync may be specified");t.idleTimeoutMillis=t.idleTimeoutMillis||3e4,t.returnToHead=t.returnToHead||!1,t.refreshIdle=!("refreshIdle"in t)||t.refreshIdle,t.reapInterval=t.reapIntervalMillis||1e3,t.priorityRange=t.priorityRange||1,t.validate=t.validate||function(){return!0},t.max=parseInt(t.max,10),t.min=parseInt(t.min,10),t.max=Math.max(isNaN(t.max)?1:t.max,1),t.min=Math.min(isNaN(t.min)?0:t.min,t.max-1),this._factory=t,this._inUseObjects=[],this._draining=!1,this._waitingClients=new n(t.priorityRange),this._availableObjects=[],this._count=0,this._removeIdleTimer=null,this._removeIdleScheduled=!1,this._ensureMinimum()}n.prototype.size=function(){if(null===this._total){this._total=0;for(var t=0;t<this._size;t+=1)this._total+=this._slots[t].length}return this._total},n.prototype.enqueue=function(t,e){var r;e=e&&0|+e||0,this._total=null,e&&(r=e,(e<0||e>=this._size)&&(e=this._size-1,console.error("invalid priority: "+r+" must be between 0 and "+e))),this._slots[e].push(t)},n.prototype.dequeue=function(t){var e=null;this._total=null;for(var r=0,n=this._slots.length;r<n;r+=1)if(this._slots[r].length){e=this._slots[r].shift();break}return e},o.prototype._log=function(t,e){"function"==typeof this._factory.log?this._factory.log(t,e):this._factory.log&&console.log(e.toUpperCase()+" pool "+this._factory.name+" - "+t)},o.prototype.destroy=function(t){this._count-=1,this._count<0&&(this._count=0),this._availableObjects=this._availableObjects.filter(function(e){return e.obj!==t}),this._inUseObjects=this._inUseObjects.filter(function(e){return e!==t}),this._factory.destroy(t),this._ensureMinimum()},o.prototype._removeIdle=function(){var t,e,r,n,i=[],o=(new Date).getTime();for(this._removeIdleScheduled=!1,t=0,e=this._availableObjects.length;t<e&&this._factory.refreshIdle&&this._count-this._factory.min>i.length;t+=1)o>=(n=this._availableObjects[t].timeout)&&(this._log("removeIdle() destroying obj - now:"+o+" timeout:"+n,"verbose"),i.push(this._availableObjects[t].obj));for(t=0,r=i.length;t<r;t+=1)this.destroy(i[t]);(e=this._availableObjects.length)>0?(this._log("this._availableObjects.length="+e,"verbose"),this._scheduleRemoveIdle()):this._log("removeIdle() all objects removed","verbose")},o.prototype._scheduleRemoveIdle=function(){var t=this;this._removeIdleScheduled||(this._removeIdleScheduled=!0,this._removeIdleTimer=setTimeout(function(){t._removeIdle()},this._factory.reapInterval))},o.prototype._dispense=function(){var t=this,e=null,r=null,n=this._waitingClients.size();if(this._log("dispense() clients="+n+" available="+this._availableObjects.length,"info"),n>0){if(this._factory.validateAsync)return void i(function(){return t._availableObjects.length>0},function(n){t._log("dispense() - reusing obj","verbose"),e=t._availableObjects[0],t._factory.validateAsync(e.obj,function(i){i?(t._availableObjects.shift(),t._inUseObjects.push(e.obj),(r=t._waitingClients.dequeue())(null,e.obj)):(t.destroy(e.obj),n())})},function(){t._count<t._factory.max&&t._createResource()});for(;this._availableObjects.length>0;){if(this._log("dispense() - reusing obj","verbose"),e=this._availableObjects[0],this._factory.validate(e.obj))return this._availableObjects.shift(),this._inUseObjects.push(e.obj),(r=this._waitingClients.dequeue())(null,e.obj);this.destroy(e.obj)}this._count<this._factory.max&&this._createResource()}},o.prototype._createResource=function(){this._count+=1,this._log("createResource() - creating obj - count="+this._count+" min="+this._factory.min+" max="+this._factory.max,"verbose");var t=this;this._factory.create(function(){var e,r,n=t._waitingClients.dequeue();arguments.length>1?(e=arguments[0],r=arguments[1]):(e=arguments[0]instanceof Error?arguments[0]:null,r=arguments[0]instanceof Error?null:arguments[0]),e?(t._count-=1,t._count<0&&(t._count=0),n&&n(e,r),process.nextTick(function(){t._dispense()})):(t._inUseObjects.push(r),n?n(e,r):t.release(r))})},o.prototype._ensureMinimum=function(){var t,e;if(!this._draining&&this._count<this._factory.min)for(e=this._factory.min-this._count,t=0;t<e;t++)this._createResource()},o.prototype.acquire=function(t,e){if(this._draining)throw new Error("pool is draining and cannot accept work");return process.domain&&(t=process.domain.bind(t)),this._waitingClients.enqueue(t,e),this._dispense(),this._count<this._factory.max},o.prototype.borrow=function(t,e){this._log("borrow() is deprecated. use acquire() instead","warn"),this.acquire(t,e)},o.prototype.release=function(t){if(this._availableObjects.some(function(e){return e.obj===t}))this._log("release called twice for the same resource: "+(new Error).stack,"error");else{var e=this._inUseObjects.indexOf(t);if(e<0)this._log("attempt to release an invalid resource: "+(new Error).stack,"error");else{this._inUseObjects.splice(e,1);var r={obj:t,timeout:(new Date).getTime()+this._factory.idleTimeoutMillis};this._factory.returnToHead?this._availableObjects.splice(0,0,r):this._availableObjects.push(r),this._log("timeout: "+r.timeout,"verbose"),this._dispense(),this._scheduleRemoveIdle()}}},o.prototype.returnToPool=function(t){this._log("returnToPool() is deprecated. use release() instead","warn"),this.release(t)},o.prototype.drain=function(t){this._log("draining","info"),this._draining=!0;var e=this,r=function(){e._waitingClients.size()>0?setTimeout(r,100):e._availableObjects.length!==e._count?setTimeout(r,100):t&&t()};r()},o.prototype.destroyAllNow=function(t){this._log("force destroying all objects","info");var e=this._availableObjects;this._availableObjects=[];for(var r=e.shift();null!==r&&void 0!==r;)this.destroy(r.obj),r=e.shift();this._removeIdleScheduled=!1,clearTimeout(this._removeIdleTimer),t&&t()},o.prototype.pooled=function(t,e){var r=this;return function(){var n=arguments,i=n[n.length-1],o="function"==typeof i;r.acquire(function(e,s){if(e)o&&i(e);else{var a=[s].concat(Array.prototype.slice.call(n,0,o?-1:void 0));a.push(function(){r.release(s),o&&i.apply(null,arguments)}),t.apply(null,a)}},e)}},o.prototype.getPoolSize=function(){return this._count},o.prototype.getName=function(){return this._factory.name},o.prototype.availableObjectsCount=function(){return this._availableObjects.length},o.prototype.inUseObjectsCount=function(){return this._inUseObjects.length},o.prototype.waitingClientsCount=function(){return this._waitingClients.size()},o.prototype.getMaxPoolSize=function(){return this._factory.max},o.prototype.getMinPoolSize=function(){return this._factory.min},r.Pool=o},{}],6:[function(t,e,r){function n(t,e,r,n){for(var i=-1,o=t?t.length:0;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function l(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function p(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(t){var e=-1,r=t?t.length:0;for(this.__data__=new h;++e<r;)this.add(t[e])}function y(t){this.__data__=new p(t)}function m(t,e){var r=Ie(t)||Z(t)?s(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!re.call(t,o)||i&&("length"==o||M(o,n))||r.push(o);return r}function v(t,e){for(var r=t.length;r--;)if(J(t[r][0],e))return r;return-1}function g(t,e,r,n){return Se(t,function(t,i,o){e(n,t,r(t),o)}),n}function b(t,e){for(var r=0,n=(e=Q(e,t)?[e]:k(e)).length;null!=t&&r<n;)t=t[B(e[r++])];return r&&r==n?t:void 0}function w(t,e){return null!=t&&e in Object(t)}function _(t,e,r,n,i){return t===e||(null==t||null==e||!et(t)&&!rt(e)?t!==t&&e!==e:j(t,e,_,r,n,i))}function j(t,e,r,n,i,o){var s=Ie(t),a=Ie(e),c=gt,l=gt;s||(c=(c=Oe(t))==vt?Ot:c),a||(l=(l=Oe(e))==vt?Ot:l);var f=c==Ot&&!u(t),p=l==Ot&&!u(e),h=c==l;if(h&&!f)return o||(o=new y),s||Te(t)?N(t,e,r,n,i,o):A(t,e,c,r,n,i,o);if(!(i&dt)){var d=f&&re.call(t,"__wrapped__"),m=p&&re.call(e,"__wrapped__");if(d||m){var v=d?t.value():t,g=m?e.value():e;return o||(o=new y),r(v,g,n,i,o)}}return!!h&&(o||(o=new y),q(t,e,r,n,i,o))}function x(t,e,r,n){var i=r.length,o=i,s=!n;if(null==t)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=r[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var f=new y;if(n)var p=n(c,l,u,t,e,f);if(!(void 0===p?_(l,c,n,ht|dt,f):p))return!1}}return!0}function S(t){return!(!et(t)||G(t))&&(K(t)||u(t)?ie:Mt).test(U(t))}function E(t){return"function"==typeof t?t:null==t?ut:"object"==typeof t?Ie(t)?C(t[0],t[1]):P(t):ct(t)}function O(t){if(!$(t))return ce(t);var e=[];for(var r in Object(t))re.call(t,r)&&"constructor"!=r&&e.push(r);return e}function P(t){var e=F(t);return 1==e.length&&e[0][2]?V(e[0][0],e[0][1]):function(r){return r===t||x(r,t,e)}}function C(t,e){return Q(t)&&W(e)?V(B(t),e):function(r){var n=ot(r,t);return void 0===n&&n===e?st(r,t):_(e,n,void 0,ht|dt)}}function I(t){return function(e){return b(e,t)}}function T(t){if("string"==typeof t)return t;if(nt(t))return xe?xe.call(t):"";var e=t+"";return"0"==e&&1/t==-yt?"-0":e}function k(t){return Ie(t)?t:Pe(t)}function N(t,e,r,n,o,s){var a=o&dt,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var f=-1,p=!0,h=o&ht?new d:void 0;for(s.set(t,e),s.set(e,t);++f<u;){var y=t[f],m=e[f];if(n)var v=a?n(m,y,f,e,t,s):n(y,m,f,t,e,s);if(void 0!==v){if(v)continue;p=!1;break}if(h){if(!i(e,function(t,e){if(!h.has(e)&&(y===t||r(y,t,n,o,s)))return h.add(e)})){p=!1;break}}else if(y!==m&&!r(y,m,n,o,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function A(t,e,r,n,i,o,s){switch(r){case Nt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kt:return!(t.byteLength!=e.byteLength||!n(new se(t),new se(e)));case bt:case wt:case Et:return J(+t,+e);case _t:return t.name==e.name&&t.message==e.message;case Pt:case It:return t==e+"";case St:var a=c;case Ct:var u=o&dt;if(a||(a=l),t.size!=e.size&&!u)return!1;var f=s.get(t);if(f)return f==e;o|=ht,s.set(t,e);var p=N(a(t),a(e),n,i,o,s);return s.delete(t),p;case Tt:if(je)return je.call(t)==je.call(e)}return!1}function q(t,e,r,n,i,o){var s=i&dt,a=at(t),u=a.length;if(u!=at(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:re.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=s;++c<u;){var d=t[l=a[c]],y=e[l];if(n)var m=s?n(y,d,l,e,t,o):n(d,y,l,t,e,o);if(!(void 0===m?d===y||r(d,y,n,i,o):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(p=!1)}return o.delete(t),o.delete(e),p}function R(t,e){var r=t.__data__;return z(e)?r["string"==typeof e?"string":"hash"]:r.map}function F(t){for(var e=at(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,W(i)]}return e}function L(t,e){var r=a(t,e);return S(r)?r:void 0}function D(t,e,r){for(var n,i=-1,o=(e=Q(e,t)?[e]:k(e)).length;++i<o;){var s=B(e[i]);if(!(n=null!=t&&r(t,s)))break;t=t[s]}return n||!!(o=t?t.length:0)&&tt(o)&&M(s,o)&&(Ie(t)||Z(t))}function M(t,e){return!!(e=null==e?mt:e)&&("number"==typeof t||Qt.test(t))&&t>-1&&t%1==0&&t<e}function Q(t,e){if(Ie(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!nt(t))||(qt.test(t)||!At.test(t)||null!=e&&t in Object(e))}function z(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function G(t){return!!te&&te in t}function $(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ht)}function W(t){return t===t&&!et(t)}function V(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function B(t){if("string"==typeof t||nt(t))return t;var e=t+"";return"0"==e&&1/t==-yt?"-0":e}function U(t){if(null!=t){try{return ee.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Y(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(ft);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Y.Cache||h),r}function J(t,e){return t===e||t!==t&&e!==e}function Z(t){return H(t)&&re.call(t,"callee")&&(!ae.call(t,"callee")||ne.call(t)==vt)}function X(t){return null!=t&&tt(t.length)&&!K(t)}function H(t){return rt(t)&&X(t)}function K(t){var e=et(t)?ne.call(t):"";return e==jt||e==xt}function tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function rt(t){return!!t&&"object"==typeof t}function nt(t){return"symbol"==typeof t||rt(t)&&ne.call(t)==Tt}function it(t){return null==t?"":T(t)}function ot(t,e,r){var n=null==t?void 0:b(t,e);return void 0===n?r:n}function st(t,e){return null!=t&&D(t,e,w)}function at(t){return X(t)?m(t):O(t)}function ut(t){return t}function ct(t){return Q(t)?o(B(t)):I(t)}var lt=200,ft="Expected a function",pt="__lodash_hash_undefined__",ht=1,dt=2,yt=1/0,mt=9007199254740991,vt="[object Arguments]",gt="[object Array]",bt="[object Boolean]",wt="[object Date]",_t="[object Error]",jt="[object Function]",xt="[object GeneratorFunction]",St="[object Map]",Et="[object Number]",Ot="[object Object]",Pt="[object RegExp]",Ct="[object Set]",It="[object String]",Tt="[object Symbol]",kt="[object ArrayBuffer]",Nt="[object DataView]",At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,Rt=/^\./,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,Dt=/\\(\\)?/g,Mt=/^\[object .+?Constructor\]$/,Qt=/^(?:0|[1-9]\d*)$/,zt={};zt["[object Float32Array]"]=zt["[object Float64Array]"]=zt["[object Int8Array]"]=zt["[object Int16Array]"]=zt["[object Int32Array]"]=zt["[object Uint8Array]"]=zt["[object Uint8ClampedArray]"]=zt["[object Uint16Array]"]=zt["[object Uint32Array]"]=!0,zt[vt]=zt[gt]=zt[kt]=zt[bt]=zt[Nt]=zt[wt]=zt[_t]=zt[jt]=zt[St]=zt[Et]=zt[Ot]=zt[Pt]=zt[Ct]=zt[It]=zt["[object WeakMap]"]=!1;var Gt="object"==typeof global&&global&&global.Object===Object&&global,$t="object"==typeof self&&self&&self.Object===Object&&self,Wt=Gt||$t||Function("return this")(),Vt="object"==typeof r&&r&&!r.nodeType&&r,Bt=Vt&&"object"==typeof e&&e&&!e.nodeType&&e,Ut=Bt&&Bt.exports===Vt&&Gt.process,Yt=function(){try{return Ut&&Ut.binding("util")}catch(t){}}(),Jt=Yt&&Yt.isTypedArray,Zt=Array.prototype,Xt=Function.prototype,Ht=Object.prototype,Kt=Wt["__core-js_shared__"],te=function(){var t=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ee=Xt.toString,re=Ht.hasOwnProperty,ne=Ht.toString,ie=RegExp("^"+ee.call(re).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=Wt.Symbol,se=Wt.Uint8Array,ae=Ht.propertyIsEnumerable,ue=Zt.splice,ce=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),le=L(Wt,"DataView"),fe=L(Wt,"Map"),pe=L(Wt,"Promise"),he=L(Wt,"Set"),de=L(Wt,"WeakMap"),ye=L(Object,"create"),me=U(le),ve=U(fe),ge=U(pe),be=U(he),we=U(de),_e=oe?oe.prototype:void 0,je=_e?_e.valueOf:void 0,xe=_e?_e.toString:void 0;f.prototype.clear=function(){this.__data__=ye?ye(null):{}},f.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},f.prototype.get=function(t){var e=this.__data__;if(ye){var r=e[t];return r===pt?void 0:r}return re.call(e,t)?e[t]:void 0},f.prototype.has=function(t){var e=this.__data__;return ye?void 0!==e[t]:re.call(e,t)},f.prototype.set=function(t,e){return this.__data__[t]=ye&&void 0===e?pt:e,this},p.prototype.clear=function(){this.__data__=[]},p.prototype.delete=function(t){var e=this.__data__,r=v(e,t);return!(r<0||(r==e.length-1?e.pop():ue.call(e,r,1),0))},p.prototype.get=function(t){var e=this.__data__,r=v(e,t);return r<0?void 0:e[r][1]},p.prototype.has=function(t){return v(this.__data__,t)>-1},p.prototype.set=function(t,e){var r=this.__data__,n=v(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},h.prototype.clear=function(){this.__data__={hash:new f,map:new(fe||p),string:new f}},h.prototype.delete=function(t){return R(this,t).delete(t)},h.prototype.get=function(t){return R(this,t).get(t)},h.prototype.has=function(t){return R(this,t).has(t)},h.prototype.set=function(t,e){return R(this,t).set(t,e),this},d.prototype.add=d.prototype.push=function(t){return this.__data__.set(t,pt),this},d.prototype.has=function(t){return this.__data__.has(t)},y.prototype.clear=function(){this.__data__=new p},y.prototype.delete=function(t){return this.__data__.delete(t)},y.prototype.get=function(t){return this.__data__.get(t)},y.prototype.has=function(t){return this.__data__.has(t)},y.prototype.set=function(t,e){var r=this.__data__;if(r instanceof p){var n=r.__data__;if(!fe||n.length<lt-1)return n.push([t,e]),this;r=this.__data__=new h(n)}return r.set(t,e),this};var Se=function(t,e){return function(r,n){if(null==r)return r;if(!X(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&!1!==n(s[o],o,s););return r}}(function(t,e){return t&&Ee(t,e,at)}),Ee=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===r(o[u],u,o))break}return e}}(),Oe=function(t){return ne.call(t)};(le&&Oe(new le(new ArrayBuffer(1)))!=Nt||fe&&Oe(new fe)!=St||pe&&"[object Promise]"!=Oe(pe.resolve())||he&&Oe(new he)!=Ct||de&&"[object WeakMap]"!=Oe(new de))&&(Oe=function(t){var e=ne.call(t),r=e==Ot?t.constructor:void 0,n=r?U(r):void 0;if(n)switch(n){case me:return Nt;case ve:return St;case ge:return"[object Promise]";case be:return Ct;case we:return"[object WeakMap]"}return e});var Pe=Y(function(t){t=it(t);var e=[];return Rt.test(t)&&e.push(""),t.replace(Ft,function(t,r,n,i){e.push(n?i.replace(Dt,"$1"):r||t)}),e}),Ce=function(t,e){return function(r,i){var o=Ie(r)?n:g,s=e?e():{};return o(r,t,E(i,2),s)}}(function(t,e,r){re.call(t,r)?t[r].push(e):t[r]=[e]});Y.Cache=h;var Ie=Array.isArray,Te=Jt?function(t){return function(e){return t(e)}}(Jt):function(t){return rt(t)&&tt(t.length)&&!!zt[ne.call(t)]};e.exports=Ce},{}],7:[function(t,e,r){function n(t,e,r,n){for(var i=-1,o=t?t.length:0;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function l(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function f(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function p(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(t){var e=-1,r=t?t.length:0;for(this.__data__=new h;++e<r;)this.add(t[e])}function y(t){this.__data__=new p(t)}function m(t,e){var r=Ie(t)||Z(t)?s(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!re.call(t,o)||i&&("length"==o||M(o,n))||r.push(o);return r}function v(t,e){for(var r=t.length;r--;)if(J(t[r][0],e))return r;return-1}function g(t,e,r,n){return Se(t,function(t,i,o){e(n,t,r(t),o)}),n}function b(t,e){for(var r=0,n=(e=Q(e,t)?[e]:k(e)).length;null!=t&&r<n;)t=t[B(e[r++])];return r&&r==n?t:void 0}function w(t,e){return null!=t&&e in Object(t)}function _(t,e,r,n,i){return t===e||(null==t||null==e||!et(t)&&!rt(e)?t!==t&&e!==e:j(t,e,_,r,n,i))}function j(t,e,r,n,i,o){var s=Ie(t),a=Ie(e),c=gt,l=gt;s||(c=(c=Oe(t))==vt?Ot:c),a||(l=(l=Oe(e))==vt?Ot:l);var f=c==Ot&&!u(t),p=l==Ot&&!u(e),h=c==l;if(h&&!f)return o||(o=new y),s||Te(t)?N(t,e,r,n,i,o):A(t,e,c,r,n,i,o);if(!(i&dt)){var d=f&&re.call(t,"__wrapped__"),m=p&&re.call(e,"__wrapped__");if(d||m){var v=d?t.value():t,g=m?e.value():e;return o||(o=new y),r(v,g,n,i,o)}}return!!h&&(o||(o=new y),q(t,e,r,n,i,o))}function x(t,e,r,n){var i=r.length,o=i,s=!n;if(null==t)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=r[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var f=new y;if(n)var p=n(c,l,u,t,e,f);if(!(void 0===p?_(l,c,n,ht|dt,f):p))return!1}}return!0}function S(t){return!(!et(t)||G(t))&&(K(t)||u(t)?ie:Mt).test(U(t))}function E(t){return"function"==typeof t?t:null==t?ut:"object"==typeof t?Ie(t)?C(t[0],t[1]):P(t):ct(t)}function O(t){if(!$(t))return ce(t);var e=[];for(var r in Object(t))re.call(t,r)&&"constructor"!=r&&e.push(r);return e}function P(t){var e=F(t);return 1==e.length&&e[0][2]?V(e[0][0],e[0][1]):function(r){return r===t||x(r,t,e)}}function C(t,e){return Q(t)&&W(e)?V(B(t),e):function(r){var n=ot(r,t);return void 0===n&&n===e?st(r,t):_(e,n,void 0,ht|dt)}}function I(t){return function(e){return b(e,t)}}function T(t){if("string"==typeof t)return t;if(nt(t))return xe?xe.call(t):"";var e=t+"";return"0"==e&&1/t==-yt?"-0":e}function k(t){return Ie(t)?t:Pe(t)}function N(t,e,r,n,o,s){var a=o&dt,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var f=-1,p=!0,h=o&ht?new d:void 0;for(s.set(t,e),s.set(e,t);++f<u;){var y=t[f],m=e[f];if(n)var v=a?n(m,y,f,e,t,s):n(y,m,f,t,e,s);if(void 0!==v){if(v)continue;p=!1;break}if(h){if(!i(e,function(t,e){if(!h.has(e)&&(y===t||r(y,t,n,o,s)))return h.add(e)})){p=!1;break}}else if(y!==m&&!r(y,m,n,o,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function A(t,e,r,n,i,o,s){switch(r){case Nt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case kt:return!(t.byteLength!=e.byteLength||!n(new se(t),new se(e)));case bt:case wt:case Et:return J(+t,+e);case _t:return t.name==e.name&&t.message==e.message;case Pt:case It:return t==e+"";case St:var a=c;case Ct:var u=o&dt;if(a||(a=l),t.size!=e.size&&!u)return!1;var f=s.get(t);if(f)return f==e;o|=ht,s.set(t,e);var p=N(a(t),a(e),n,i,o,s);return s.delete(t),p;case Tt:if(je)return je.call(t)==je.call(e)}return!1}function q(t,e,r,n,i,o){var s=i&dt,a=at(t),u=a.length;if(u!=at(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:re.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=s;++c<u;){var d=t[l=a[c]],y=e[l];if(n)var m=s?n(y,d,l,e,t,o):n(d,y,l,t,e,o);if(!(void 0===m?d===y||r(d,y,n,i,o):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(p=!1)}return o.delete(t),o.delete(e),p}function R(t,e){var r=t.__data__;return z(e)?r["string"==typeof e?"string":"hash"]:r.map}function F(t){for(var e=at(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,W(i)]}return e}function L(t,e){var r=a(t,e);return S(r)?r:void 0}function D(t,e,r){for(var n,i=-1,o=(e=Q(e,t)?[e]:k(e)).length;++i<o;){var s=B(e[i]);if(!(n=null!=t&&r(t,s)))break;t=t[s]}return n||!!(o=t?t.length:0)&&tt(o)&&M(s,o)&&(Ie(t)||Z(t))}function M(t,e){return!!(e=null==e?mt:e)&&("number"==typeof t||Qt.test(t))&&t>-1&&t%1==0&&t<e}function Q(t,e){if(Ie(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!nt(t))||(qt.test(t)||!At.test(t)||null!=e&&t in Object(e))}function z(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function G(t){return!!te&&te in t}function $(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ht)}function W(t){return t===t&&!et(t)}function V(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function B(t){if("string"==typeof t||nt(t))return t;var e=t+"";return"0"==e&&1/t==-yt?"-0":e}function U(t){if(null!=t){try{return ee.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Y(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(ft);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Y.Cache||h),r}function J(t,e){return t===e||t!==t&&e!==e}function Z(t){return H(t)&&re.call(t,"callee")&&(!ae.call(t,"callee")||ne.call(t)==vt)}function X(t){return null!=t&&tt(t.length)&&!K(t)}function H(t){return rt(t)&&X(t)}function K(t){var e=et(t)?ne.call(t):"";return e==jt||e==xt}function tt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function et(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function rt(t){return!!t&&"object"==typeof t}function nt(t){return"symbol"==typeof t||rt(t)&&ne.call(t)==Tt}function it(t){return null==t?"":T(t)}function ot(t,e,r){var n=null==t?void 0:b(t,e);return void 0===n?r:n}function st(t,e){return null!=t&&D(t,e,w)}function at(t){return X(t)?m(t):O(t)}function ut(t){return t}function ct(t){return Q(t)?o(B(t)):I(t)}var lt=200,ft="Expected a function",pt="__lodash_hash_undefined__",ht=1,dt=2,yt=1/0,mt=9007199254740991,vt="[object Arguments]",gt="[object Array]",bt="[object Boolean]",wt="[object Date]",_t="[object Error]",jt="[object Function]",xt="[object GeneratorFunction]",St="[object Map]",Et="[object Number]",Ot="[object Object]",Pt="[object RegExp]",Ct="[object Set]",It="[object String]",Tt="[object Symbol]",kt="[object ArrayBuffer]",Nt="[object DataView]",At=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/,Rt=/^\./,Ft=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lt=/[\\^$.*+?()[\]{}|]/g,Dt=/\\(\\)?/g,Mt=/^\[object .+?Constructor\]$/,Qt=/^(?:0|[1-9]\d*)$/,zt={};zt["[object Float32Array]"]=zt["[object Float64Array]"]=zt["[object Int8Array]"]=zt["[object Int16Array]"]=zt["[object Int32Array]"]=zt["[object Uint8Array]"]=zt["[object Uint8ClampedArray]"]=zt["[object Uint16Array]"]=zt["[object Uint32Array]"]=!0,zt[vt]=zt[gt]=zt[kt]=zt[bt]=zt[Nt]=zt[wt]=zt[_t]=zt[jt]=zt[St]=zt[Et]=zt[Ot]=zt[Pt]=zt[Ct]=zt[It]=zt["[object WeakMap]"]=!1;var Gt="object"==typeof global&&global&&global.Object===Object&&global,$t="object"==typeof self&&self&&self.Object===Object&&self,Wt=Gt||$t||Function("return this")(),Vt="object"==typeof r&&r&&!r.nodeType&&r,Bt=Vt&&"object"==typeof e&&e&&!e.nodeType&&e,Ut=Bt&&Bt.exports===Vt&&Gt.process,Yt=function(){try{return Ut&&Ut.binding("util")}catch(t){}}(),Jt=Yt&&Yt.isTypedArray,Zt=Array.prototype,Xt=Function.prototype,Ht=Object.prototype,Kt=Wt["__core-js_shared__"],te=function(){var t=/[^.]+$/.exec(Kt&&Kt.keys&&Kt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ee=Xt.toString,re=Ht.hasOwnProperty,ne=Ht.toString,ie=RegExp("^"+ee.call(re).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=Wt.Symbol,se=Wt.Uint8Array,ae=Ht.propertyIsEnumerable,ue=Zt.splice,ce=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),le=L(Wt,"DataView"),fe=L(Wt,"Map"),pe=L(Wt,"Promise"),he=L(Wt,"Set"),de=L(Wt,"WeakMap"),ye=L(Object,"create"),me=U(le),ve=U(fe),ge=U(pe),be=U(he),we=U(de),_e=oe?oe.prototype:void 0,je=_e?_e.valueOf:void 0,xe=_e?_e.toString:void 0;f.prototype.clear=function(){this.__data__=ye?ye(null):{}},f.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},f.prototype.get=function(t){var e=this.__data__;if(ye){var r=e[t];return r===pt?void 0:r}return re.call(e,t)?e[t]:void 0},f.prototype.has=function(t){var e=this.__data__;return ye?void 0!==e[t]:re.call(e,t)},f.prototype.set=function(t,e){return this.__data__[t]=ye&&void 0===e?pt:e,this},p.prototype.clear=function(){this.__data__=[]},p.prototype.delete=function(t){var e=this.__data__,r=v(e,t);return!(r<0||(r==e.length-1?e.pop():ue.call(e,r,1),0))},p.prototype.get=function(t){var e=this.__data__,r=v(e,t);return r<0?void 0:e[r][1]},p.prototype.has=function(t){return v(this.__data__,t)>-1},p.prototype.set=function(t,e){var r=this.__data__,n=v(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},h.prototype.clear=function(){this.__data__={hash:new f,map:new(fe||p),string:new f}},h.prototype.delete=function(t){return R(this,t).delete(t)},h.prototype.get=function(t){return R(this,t).get(t)},h.prototype.has=function(t){return R(this,t).has(t)},h.prototype.set=function(t,e){return R(this,t).set(t,e),this},d.prototype.add=d.prototype.push=function(t){return this.__data__.set(t,pt),this},d.prototype.has=function(t){return this.__data__.has(t)},y.prototype.clear=function(){this.__data__=new p},y.prototype.delete=function(t){return this.__data__.delete(t)},y.prototype.get=function(t){return this.__data__.get(t)},y.prototype.has=function(t){return this.__data__.has(t)},y.prototype.set=function(t,e){var r=this.__data__;if(r instanceof p){var n=r.__data__;if(!fe||n.length<lt-1)return n.push([t,e]),this;r=this.__data__=new h(n)}return r.set(t,e),this};var Se=function(t,e){return function(r,n){if(null==r)return r;if(!X(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&!1!==n(s[o],o,s););return r}}(function(t,e){return t&&Ee(t,e,at)}),Ee=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===r(o[u],u,o))break}return e}}(),Oe=function(t){return ne.call(t)};(le&&Oe(new le(new ArrayBuffer(1)))!=Nt||fe&&Oe(new fe)!=St||pe&&"[object Promise]"!=Oe(pe.resolve())||he&&Oe(new he)!=Ct||de&&"[object WeakMap]"!=Oe(new de))&&(Oe=function(t){var e=ne.call(t),r=e==Ot?t.constructor:void 0,n=r?U(r):void 0;if(n)switch(n){case me:return Nt;case ve:return St;case ge:return"[object Promise]";case be:return Ct;case we:return"[object WeakMap]"}return e});var Pe=Y(function(t){t=it(t);var e=[];return Rt.test(t)&&e.push(""),t.replace(Ft,function(t,r,n,i){e.push(n?i.replace(Dt,"$1"):r||t)}),e}),Ce=function(t,e){return function(r,i){var o=Ie(r)?n:g,s=e?e():{};return o(r,t,E(i,2),s)}}(function(t,e,r){t[r]=e});Y.Cache=h;var Ie=Array.isArray,Te=Jt?function(t){return function(e){return t(e)}}(Jt):function(t){return rt(t)&&tt(t.length)&&!!zt[ne.call(t)]};e.exports=Ce},{}],8:[function(t,e,r){function n(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););return t}function i(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function a(t,e){return null==t?void 0:t[e]}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function c(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function l(t,e){return function(r){return t(e(r))}}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function p(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function h(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function d(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function y(t){var e=-1,r=t?t.length:0;for(this.__data__=new d;++e<r;)this.add(t[e])}function m(t){this.__data__=new h(t)}function v(t,e){var r=ke(t)||H(t)?s(t.length,String):[],n=r.length,i=!!n;for(var o in t)!e&&!ie.call(t,o)||i&&("length"==o||z(o,n))||r.push(o);return r}function g(t,e){for(var r=t.length;r--;)if(X(t[r][0],e))return r;return-1}function b(t){return nt(t)?le(t):{}}function w(t,e){return t&&Ce(t,e,ct)}function _(t,e){for(var r=0,n=(e=G(e,t)?[e]:A(e)).length;null!=t&&r<n;)t=t[Y(e[r++])];return r&&r==n?t:void 0}function j(t,e){return null!=t&&e in Object(t)}function x(t,e,r,n,i){return t===e||(null==t||null==e||!nt(t)&&!it(e)?t!==t&&e!==e:S(t,e,x,r,n,i))}function S(t,e,r,n,i,o){var s=ke(t),a=ke(e),c=wt,l=wt;s||(c=(c=Ie(t))==bt?Ct:c),a||(l=(l=Ie(e))==bt?Ct:l);var f=c==Ct&&!u(t),p=l==Ct&&!u(e),h=c==l;if(h&&!f)return o||(o=new m),s||Ne(t)?q(t,e,r,n,i,o):R(t,e,c,r,n,i,o);if(!(i&mt)){var d=f&&ie.call(t,"__wrapped__"),y=p&&ie.call(e,"__wrapped__");if(d||y){var v=d?t.value():t,g=y?e.value():e;return o||(o=new m),r(v,g,n,i,o)}}return!!h&&(o||(o=new m),F(t,e,r,n,i,o))}function E(t,e,r,n){var i=r.length,o=i,s=!n;if(null==t)return!o;for(t=Object(t);i--;){var a=r[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=r[i])[0],c=t[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in t))return!1}else{var f=new m;if(n)var p=n(c,l,u,t,e,f);if(!(void 0===p?x(l,c,n,yt|mt,f):p))return!1}}return!0}function O(t){return!(!nt(t)||W(t))&&(et(t)||u(t)?se:zt).test(J(t))}function P(t){return"function"==typeof t?t:null==t?lt:"object"==typeof t?ke(t)?T(t[0],t[1]):I(t):ft(t)}function C(t){if(!V(t))return he(t);var e=[];for(var r in Object(t))ie.call(t,r)&&"constructor"!=r&&e.push(r);return e}function I(t){var e=D(t);return 1==e.length&&e[0][2]?U(e[0][0],e[0][1]):function(r){return r===t||E(r,t,e)}}function T(t,e){return G(t)&&B(e)?U(Y(t),e):function(r){var n=at(r,t);return void 0===n&&n===e?ut(r,t):x(e,n,void 0,yt|mt)}}function k(t){return function(e){return _(e,t)}}function N(t){if("string"==typeof t)return t;if(ot(t))return Pe?Pe.call(t):"";var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function A(t){return ke(t)?t:Te(t)}function q(t,e,r,n,o,s){var a=o&mt,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var f=-1,p=!0,h=o&yt?new y:void 0;for(s.set(t,e),s.set(e,t);++f<u;){var d=t[f],m=e[f];if(n)var v=a?n(m,d,f,e,t,s):n(d,m,f,t,e,s);if(void 0!==v){if(v)continue;p=!1;break}if(h){if(!i(e,function(t,e){if(!h.has(e)&&(d===t||r(d,t,n,o,s)))return h.add(e)})){p=!1;break}}else if(d!==m&&!r(d,m,n,o,s)){p=!1;break}}return s.delete(t),s.delete(e),p}function R(t,e,r,n,i,o,s){switch(r){case qt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case At:return!(t.byteLength!=e.byteLength||!n(new ue(t),new ue(e)));case _t:case jt:case Pt:return X(+t,+e);case xt:return t.name==e.name&&t.message==e.message;case It:case kt:return t==e+"";case Ot:var a=c;case Tt:var u=o&mt;if(a||(a=f),t.size!=e.size&&!u)return!1;var l=s.get(t);if(l)return l==e;o|=yt,s.set(t,e);var p=q(a(t),a(e),n,i,o,s);return s.delete(t),p;case Nt:if(Oe)return Oe.call(t)==Oe.call(e)}return!1}function F(t,e,r,n,i,o){var s=i&mt,a=ct(t),u=a.length;if(u!=ct(e).length&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:ie.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=s;++c<u;){var d=t[l=a[c]],y=e[l];if(n)var m=s?n(y,d,l,e,t,o):n(d,y,l,t,e,o);if(!(void 0===m?d===y||r(d,y,n,i,o):m)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var v=t.constructor,g=e.constructor;v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g)&&(p=!1)}return o.delete(t),o.delete(e),p}function L(t,e){var r=t.__data__;return $(e)?r["string"==typeof e?"string":"hash"]:r.map}function D(t){for(var e=ct(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,B(i)]}return e}function M(t,e){var r=a(t,e);return O(r)?r:void 0}function Q(t,e,r){for(var n,i=-1,o=(e=G(e,t)?[e]:A(e)).length;++i<o;){var s=Y(e[i]);if(!(n=null!=t&&r(t,s)))break;t=t[s]}return n||!!(o=t?t.length:0)&&rt(o)&&z(s,o)&&(ke(t)||H(t))}function z(t,e){return!!(e=null==e?gt:e)&&("number"==typeof t||Gt.test(t))&&t>-1&&t%1==0&&t<e}function G(t,e){if(ke(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ot(t))||(Ft.test(t)||!Rt.test(t)||null!=e&&t in Object(e))}function $(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function W(t){return!!re&&re in t}function V(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)}function B(t){return t===t&&!nt(t)}function U(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Y(t){if("string"==typeof t||ot(t))return t;var e=t+"";return"0"==e&&1/t==-vt?"-0":e}function J(t){if(null!=t){try{return ne.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Z(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(ht);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Z.Cache||d),r}function X(t,e){return t===e||t!==t&&e!==e}function H(t){return tt(t)&&ie.call(t,"callee")&&(!fe.call(t,"callee")||oe.call(t)==bt)}function K(t){return null!=t&&rt(t.length)&&!et(t)}function tt(t){return it(t)&&K(t)}function et(t){var e=nt(t)?oe.call(t):"";return e==St||e==Et}function rt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=gt}function nt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function it(t){return!!t&&"object"==typeof t}function ot(t){return"symbol"==typeof t||it(t)&&oe.call(t)==Nt}function st(t){return null==t?"":N(t)}function at(t,e,r){var n=null==t?void 0:_(t,e);return void 0===n?r:n}function ut(t,e){return null!=t&&Q(t,e,j)}function ct(t){return K(t)?v(t):C(t)}function lt(t){return t}function ft(t){return G(t)?o(Y(t)):k(t)}var pt=200,ht="Expected a function",dt="__lodash_hash_undefined__",yt=1,mt=2,vt=1/0,gt=9007199254740991,bt="[object Arguments]",wt="[object Array]",_t="[object Boolean]",jt="[object Date]",xt="[object Error]",St="[object Function]",Et="[object GeneratorFunction]",Ot="[object Map]",Pt="[object Number]",Ct="[object Object]",It="[object RegExp]",Tt="[object Set]",kt="[object String]",Nt="[object Symbol]",At="[object ArrayBuffer]",qt="[object DataView]",Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,Lt=/^\./,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mt=/[\\^$.*+?()[\]{}|]/g,Qt=/\\(\\)?/g,zt=/^\[object .+?Constructor\]$/,Gt=/^(?:0|[1-9]\d*)$/,$t={};$t["[object Float32Array]"]=$t["[object Float64Array]"]=$t["[object Int8Array]"]=$t["[object Int16Array]"]=$t["[object Int32Array]"]=$t["[object Uint8Array]"]=$t["[object Uint8ClampedArray]"]=$t["[object Uint16Array]"]=$t["[object Uint32Array]"]=!0,$t[bt]=$t[wt]=$t[At]=$t[_t]=$t[qt]=$t[jt]=$t[xt]=$t[St]=$t[Ot]=$t[Pt]=$t[Ct]=$t[It]=$t[Tt]=$t[kt]=$t["[object WeakMap]"]=!1;var Wt="object"==typeof global&&global&&global.Object===Object&&global,Vt="object"==typeof self&&self&&self.Object===Object&&self,Bt=Wt||Vt||Function("return this")(),Ut="object"==typeof r&&r&&!r.nodeType&&r,Yt=Ut&&"object"==typeof e&&e&&!e.nodeType&&e,Jt=Yt&&Yt.exports===Ut&&Wt.process,Zt=function(){try{return Jt&&Jt.binding("util")}catch(t){}}(),Xt=Zt&&Zt.isTypedArray,Ht=Array.prototype,Kt=Function.prototype,te=Object.prototype,ee=Bt["__core-js_shared__"],re=function(){var t=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ne=Kt.toString,ie=te.hasOwnProperty,oe=te.toString,se=RegExp("^"+ne.call(ie).replace(Mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=Bt.Symbol,ue=Bt.Uint8Array,ce=l(Object.getPrototypeOf,Object),le=Object.create,fe=te.propertyIsEnumerable,pe=Ht.splice,he=l(Object.keys,Object),de=M(Bt,"DataView"),ye=M(Bt,"Map"),me=M(Bt,"Promise"),ve=M(Bt,"Set"),ge=M(Bt,"WeakMap"),be=M(Object,"create"),we=J(de),_e=J(ye),je=J(me),xe=J(ve),Se=J(ge),Ee=ae?ae.prototype:void 0,Oe=Ee?Ee.valueOf:void 0,Pe=Ee?Ee.toString:void 0;p.prototype.clear=function(){this.__data__=be?be(null):{}},p.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},p.prototype.get=function(t){var e=this.__data__;if(be){var r=e[t];return r===dt?void 0:r}return ie.call(e,t)?e[t]:void 0},p.prototype.has=function(t){var e=this.__data__;return be?void 0!==e[t]:ie.call(e,t)},p.prototype.set=function(t,e){return this.__data__[t]=be&&void 0===e?dt:e,this},h.prototype.clear=function(){this.__data__=[]},h.prototype.delete=function(t){var e=this.__data__,r=g(e,t);return!(r<0||(r==e.length-1?e.pop():pe.call(e,r,1),0))},h.prototype.get=function(t){var e=this.__data__,r=g(e,t);return r<0?void 0:e[r][1]},h.prototype.has=function(t){return g(this.__data__,t)>-1},h.prototype.set=function(t,e){var r=this.__data__,n=g(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},d.prototype.clear=function(){this.__data__={hash:new p,map:new(ye||h),string:new p}},d.prototype.delete=function(t){return L(this,t).delete(t)},d.prototype.get=function(t){return L(this,t).get(t)},d.prototype.has=function(t){return L(this,t).has(t)},d.prototype.set=function(t,e){return L(this,t).set(t,e),this},y.prototype.add=y.prototype.push=function(t){return this.__data__.set(t,dt),this},y.prototype.has=function(t){return this.__data__.has(t)},m.prototype.clear=function(){this.__data__=new h},m.prototype.delete=function(t){return this.__data__.delete(t)},m.prototype.get=function(t){return this.__data__.get(t)},m.prototype.has=function(t){return this.__data__.has(t)},m.prototype.set=function(t,e){var r=this.__data__;if(r instanceof h){var n=r.__data__;if(!ye||n.length<pt-1)return n.push([t,e]),this;r=this.__data__=new d(n)}return r.set(t,e),this};var Ce=function(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===r(o[u],u,o))break}return e}}(),Ie=function(t){return oe.call(t)};(de&&Ie(new de(new ArrayBuffer(1)))!=qt||ye&&Ie(new ye)!=Ot||me&&"[object Promise]"!=Ie(me.resolve())||ve&&Ie(new ve)!=Tt||ge&&"[object WeakMap]"!=Ie(new ge))&&(Ie=function(t){var e=oe.call(t),r=e==Ct?t.constructor:void 0,n=r?J(r):void 0;if(n)switch(n){case we:return qt;case _e:return Ot;case je:return"[object Promise]";case xe:return Tt;case Se:return"[object WeakMap]"}return e});var Te=Z(function(t){t=st(t);var e=[];return Lt.test(t)&&e.push(""),t.replace(Dt,function(t,r,n,i){e.push(n?i.replace(Qt,"$1"):r||t)}),e});Z.Cache=d;var ke=Array.isArray,Ne=Xt?function(t){return function(e){return t(e)}}(Xt):function(t){return it(t)&&rt(t.length)&&!!$t[oe.call(t)]};e.exports=function(t,e,r){var i=ke(t)||Ne(t);if(e=P(e,4),null==r)if(i||nt(t)){var o=t.constructor;r=i?ke(t)?new o:[]:et(o)?b(ce(t)):{}}else r={};return(i?n:w)(t,function(t,n,i){return e(r,t,n,i)}),r}},{}],9:[function(t,e,r){"use strict";var n=t("./writer"),i=new n,o=e.exports=new n(!0);Object.defineProperty(o,"local",{get:function(){return new n},enumerable:!0}),Object.defineProperty(o,"global",{get:function(){return console.log=function(){i.log.apply(i,arguments)},console.error=function(){i.error.apply(i,arguments)},console.warn=function(){i.warn.apply(i,arguments)},console.info=function(){i.info.apply(i,arguments)},console.success=function(){i.success.apply(i,arguments)},i},enumerable:!0}),Object.freeze(o)},{"./writer":10}],10:[function(t,e,r){"use strict";function n(t,e,r){return t=r&&"string"==typeof t?t:s.inspect(t),"["+e+"m"+t+"[0m"}function i(t,e,r){return t.isTTY?e.length&&"string"==typeof e[0]?[n(s.format.apply(null,e),r,!0)]:Object.keys(e).map(function(t){return n(e[t],r)}):e}function o(t,e,r){var n=t.color;return n===+n&&n>=0&&n<=256?n:t.bright?r:e}var s=t("util"),a={log:console.log,info:console.info,error:console.error,warn:console.warn};e.exports=function(t){function e(t,e){Object.defineProperty(r[t],"bright",{value:!1,writable:!0}),Object.defineProperty(r[t],"color",{writable:!0}),Object.seal(r[t])}var r=this;this.log=function(){a.log.apply(null,i(process.stdout,arguments,o(r.log,39,97)))},this.error=function(){a.error.apply(null,i(process.stderr,arguments,o(r.error,31,91)))},this.warn=function(){a.warn.apply(null,i(process.stderr,arguments,o(r.warn,33,93)))},this.info=function(){a.info.apply(null,i(process.stdout,arguments,o(r.info,36,96)))},this.success=function(){a.log.apply(null,i(process.stdout,arguments,o(r.success,32,92)))},this.write=function(t,e,r){var n=a.log,o=process.stdout;r&&(n=a.error,o=process.stderr),e!==+e||e<0||e>256?n.apply(null,t):n.apply(null,i(o,t,e))},e("log"),e("error"),e("warn"),e("info"),e("success"),this.setBright=function(t){t=void 0===t||!!t,r.log.bright=t,r.error.bright=t,r.warn.bright=t,r.success.bright=t,r.info.bright=t},t||Object.freeze(this)}},{util:void 0}],11:[function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,a=n(t),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)i.call(r,c)&&(a[c]=r[c]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(r);for(var l=0;l<s.length;l++)o.call(r,s[l])&&(a[s[l]]=r[s[l]])}}return a}},{}],12:[function(t,e,r){var n=t("assert"),i=e.exports=function(t){"number"==typeof t&&(t={headerSize:t}),t=t||{},this.offset=0,this.lastChunk=!1,this.chunk=null,this.chunkLength=0,this.headerSize=t.headerSize||0,this.lengthPadding=t.lengthPadding||0,this.header=null,n(this.headerSize<2,"pre-length header of more than 1 byte length not currently supported")};i.prototype.addChunk=function(t){if(!this.chunk||this.offset===this.chunkLength)return this.chunk=t,this.chunkLength=t.length,void(this.offset=0);var e=t.length,r=this.chunkLength+e;if(r>this.chunk.length){for(var n=2*this.chunk.length;r>=n;)n*=2;var i=new Buffer(n);this.chunk.copy(i),this.chunk=i}t.copy(this.chunk,this.chunkLength),this.chunkLength=r},i.prototype.read=function(){if(this.chunkLength<this.headerSize+4+this.offset)return!1;this.headerSize&&(this.header=this.chunk[this.offset]);var t=this.chunk.readUInt32BE(this.offset+this.headerSize)+this.lengthPadding;if(t>this.chunkLength-(this.offset+4+this.headerSize))return!1;this.offset+=this.headerSize+4;var e=this.chunk.slice(this.offset,this.offset+t);return this.offset+=t,e}},{assert:void 0}],13:[function(t,e,r){"use strict";var n=t("url");e.exports={parse:function(t){var e;if("/"===t.charAt(0))return e=t.split(" "),{host:e[0],database:e[1]};/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/\%25(\d\d)/g,"%$1"));var r=n.parse(t,!0);if(e={},r.query.application_name&&(e.application_name=r.query.application_name),r.query.fallback_application_name&&(e.fallback_application_name=r.query.fallback_application_name),e.port=r.port,"socket:"==r.protocol)return e.host=decodeURI(r.pathname),e.database=r.query.db,e.client_encoding=r.query.encoding,e;e.host=r.hostname;var i=r.pathname;i&&"/"===i.charAt(0)&&(i=r.pathname.slice(1)||null),e.database=i&&decodeURI(i);var o=(r.auth||":").split(":");e.user=o[0],e.password=o.splice(1).join(":");var s=r.query.ssl;return"true"!==s&&"1"!==s||(e.ssl=!0),e}}},{url:void 0}],14:[function(t,e,r){"use strict";function n(t,e){var r=Error.apply(this,arguments);r.name=this.name="SQLParsingError",this.stack=r.stack,this.code=t,this.error=a[t].message,this.position=e,this.message="Error parsing SQL at {line:"+e.line+",col:"+e.column+"}: "+this.error}function i(t){return Array(1+4*t).join(" ")}var o=t("os").EOL,s={unclosedMLC:0,unclosedText:1,unclosedQI:2,multiLineQI:3};Object.freeze(s);var a=[{name:"unclosedMLC",message:"Unclosed multi-line comment."},{name:"unclosedText",message:"Unclosed text block."},{name:"unclosedQI",message:"Unclosed quoted identifier."},{name:"multiLineQI",message:"Multi-line quoted identifiers are not supported."}];(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(t){var e=i((t=t>0?parseInt(t):0)+1);return["SQLParsingError {",e+"code: parsingErrorCode."+a[this.code].name,e+'error: "'+this.error+'"',e+"position: {line: "+this.position.line+", col: "+this.position.column+"}",i(t)+"}"].join(o)},n.prototype.inspect=function(){return this.toString()},e.exports={SQLParsingError:n,parsingErrorCode:s}},{os:void 0}],15:[function(t,e,r){"use strict";var n=t("./parser"),i=t("./error");n.minify.SQLParsingError=i.SQLParsingError,n.minify.parsingErrorCode=i.parsingErrorCode,e.exports=n.minify},{"./error":14,"./parser":16}],16:[function(t,e,r){"use strict";function n(t){for(var e=0,r=0,n=0;e<t.length&&-1!=(e=t.indexOf("\n",e));)e>0&&"\r"===t[e-1]?n++:r++,e++;return r===n?s.EOL:r>n?"\n":"\r\n"}function i(t,e,r){var n=0,i=e,o=0;do{if(-1==(o=t.indexOf(r,o))||e<o+r.length)break;n++,i=e-(o+=r.length)}while(o<e);return{line:n+1,column:i+1}}function o(t){return" "===t||"\t"===t||"\r"===t||"\n"===t}var s=t("os"),a=t("./error"),u=a.parsingErrorCode,c=".,;:()[]=<>+-*/|!?@#";e.exports={minify:function(t,e){function r(){if(m)for(;f<h-1&&o(t[f+1]);)f++}function s(){y&&(p.length&&(p+=" "),y=!1)}function l(e){var r=i(t,f,d);throw new a.SQLParsingError(e,r)}if("string"!=typeof t)throw new TypeError("Input SQL must be a text string.");if(void 0!==e&&"object"!=typeof e)throw new TypeError("Parameter 'options' must be an object.");if(!t.length)return"";var f=0,p="",h=t.length,d=n(t),y=!1,m=e&&e.compress;do{var v=t[f],g=f<h-1?t[f+1]:"";if(o(v)){for(;++f<h&&o(t[f]););f<h&&(y=!0),f--}else if("-"!==v||"-"!==g)if("/"!==v||"*"!==g)if('"'!==v)if("'"!==v)m&&c.indexOf(v)>=0&&(y=!1,r()),s(),p+=v;else{var b=f;do{if((b=t.indexOf("'",b+1))>0){for(var w=b;++w<h&&"'"===t[w];);if((w-b)%2){b=w-1;break}b=w===h?-1:w}}while(b>0);b<0&&l(u.unclosedText),m&&(y=!1),s();var _=t.substr(f,b-f+1),j=_.indexOf(d)>0;j&&(_=_.split(d).map(function(t){return t.replace(/^\s+|\s+$/g,"")}).join("\\n"));var x=_.indexOf("\t")>0;if(j||x){var S=f?t[f-1]:"";if("E"!==S&&"e"!==S){var E=p?p[p.length-1]:"";E&&" "!==E&&c.indexOf(E)<0&&(p+=" "),p+="E"}x&&(_=_.replace(/\t/g,"\\t"))}p+=_,f=b,r()}else(b=t.indexOf('"',f+1))<0&&l(u.unclosedQI),(_=t.substr(f,b-f+1)).indexOf(d)>0&&l(u.multiLineQI),m&&(y=!1),s(),p+=_,f=b,r();else{var O=t.indexOf("*/",f+2);O<0&&l(u.unclosedMLC),f=O+1,r()}else{var P=t.indexOf(d,f+2);if(P<0)break;f=P-1,r()}}while(++f<h);return p},getEOL:n,getIndexPos:i}},{"./error":14,os:void 0}],17:[function(t,e,r){function n(){var t,e,r;if(!this._draining)for(r=this._waitingClients.size(),this._factory.min>0?e=this._factory.min-this._count:r>0&&(e=Math.min(r,this._factory.max-this._count)),t=0;t<e;t++)this._createResource()}var i=t("generic-pool"),o=t("util"),s=t("events").EventEmitter,a=t("object-assign"),u=e.exports=function(e,r){if(!(this instanceof u))return new u(e,r);s.call(this),this.options=a({},e),this.log=this.options.log||function(){},this.Client=this.options.Client||r||t("pg").Client,this.Promise=this.options.Promise||global.Promise,this.options.max=this.options.max||this.options.poolSize||10,this.options.create=this.options.create||this._create.bind(this),this.options.destroy=this.options.destroy||this._destroy.bind(this),this.pool=new i.Pool(this.options),this.pool._ensureMinimum=n,this.onCreate=this.options.onCreate};o.inherits(u,s),u.prototype._promise=function(t,e){if(!t)return new this.Promise(e);e(function(e){process.nextTick(function(){t(null,e)})},function(e){process.nextTick(function(){t(e)})})},u.prototype._promiseNoCallback=function(t,e){return t?e():new this.Promise(e)},u.prototype._destroy=function(t){t._destroying||(t._destroying=!0,t.end())},u.prototype._create=function(t){this.log("connecting new client");var e=new this.Client(this.options);e.on("error",function(t){this.log("connected client error:",t),this.pool.destroy(e),t.client=e,this.emit("error",t,e)}.bind(this)),e.connect(function(r){r?(this.log("client connection error:",r),t(r,null)):(this.log("client connected"),this.emit("connect",e),t(null,e))}.bind(this))},u.prototype.connect=function(t){return this._promiseNoCallback(t,function(e,r){this.log("acquire client begin"),this.pool.acquire(function(n,i){if(n)return this.log("acquire client. error:",n),void(t?t(n,null,function(){}):r(n));this.log("acquire client"),this.emit("acquire",i),i.release=function(t){delete i.release,t?(this.log("destroy client. error:",t),this.pool.destroy(i)):(this.log("release client"),this.pool.release(i))}.bind(this),t?t(null,i,i.release):e(i)}.bind(this))}.bind(this))},u.prototype.take=u.prototype.connect,u.prototype.query=function(t,e,r){return"function"==typeof e&&(r=e,e=void 0),this._promise(r,function(r,n){this.connect(function(i,o,s){if(i)return n(i);o.query(t,e,function(t,e){s(t),t?n(t):r(e)})})}.bind(this))},u.prototype.end=function(t){return this.log("draining pool"),this._promise(t,function(t,e){this.pool.drain(function(){this.log("pool drained, calling destroy all now"),this.pool.destroyAllNow(t)}.bind(this))}.bind(this))}},{events:void 0,"generic-pool":5,"object-assign":11,pg:65,util:void 0}],18:[function(t,e,r){"use strict";class n{constructor(t){if(!t||"object"!=typeof t)throw new TypeError("Adapter requires an api configuration object.");if(this.create=t.create,this.resolve=t.resolve,this.reject=t.reject,this.all=t.all,"function"!=typeof this.create)throw new TypeError("Function 'create' must be specified.");if("function"!=typeof this.resolve)throw new TypeError("Function 'resolve' must be specified.");if("function"!=typeof this.reject)throw new TypeError("Function 'reject' must be specified.");if("function"!=typeof this.all)throw new TypeError("Function 'all' must be specified.")}}e.exports=n},{}],19:[function(t,e,r){"use strict";e.exports=(t=>e=>{const r=t.promise;return function(){const t=e.apply(this,arguments),n=e=>e.done?r.resolve(e.value):r.resolve(e.value).then(e=>n(t.next(e))).catch(e=>n(t.throw(e)));return n(t.next())}})},{}],20:[function(t,e,r){"use strict";class n{constructor(t){this.cn=t.cn,this.dc=t.dc,this.options=t.options,this.db=t.db,this.level=t.level,this.txLevel=t.txLevel,this.parentCtx=null,this.taskCtx=null,this.start=null}connect(t){this.db=t,this.start=new Date}disconnect(){this.db&&(this.db.done(),this.db=null)}clone(){const t=new n(this);return t.parentCtx=this.taskCtx,t}}e.exports=n},{}],21:[function(t,e,r){"use strict";function n(t,e,r){return r.promise((r,n)=>{const i=e.$pool;if(i.pool._draining){e.$destroy();const r=new Error("Connection pool of the database object has been destroyed.");return u.events.error(t.options,r,{dc:t.dc}),void n(r)}i.connect((e,i,c)=>{if(e)u.events.error(t.options,e,{cn:u.utils.getSafeConnection(t.cn),dc:t.dc}),n(e);else{const e=!i.$used;e&&u.utils.addReadProp(i,"$used",!0,!0),i.on("error",o),a(i,t);const n=s(i);r({isFresh:e,client:i,done:()=>{i.end=n,c(),u.events.disconnect(t,i),i.removeListener("error",o)}}),u.events.connect(t,i,e)}})})}function i(t,e){return e.promise((r,n)=>{const i=new e.pgp.pg.Client(t.cn);i.connect(e=>{if(e)u.events.error(t.options,e,{cn:u.utils.getSafeConnection(t.cn),dc:t.dc}),n(e);else{i.on("error",o),a(i,t);const e=s(i);r({isFresh:!0,client:i,done:()=>{i.end=e,i.end(),u.events.disconnect(t,i),i.removeListener("error",o)}}),u.events.connect(t,i,!0)}})})}function o(t){const e=this.$ctx,r=u.utils.getSafeConnection(e.cn);if(u.events.error(e.options,t,{cn:r,dc:e.dc}),e.disconnect(),"function"==typeof e.cnOptions.onLost&&!e.notified){try{e.cnOptions.onLost.call(this,t,{cn:r,dc:e.dc,start:e.start,client:this})}catch(t){u.con.error(t&&t.stack||t)}e.notified=!0}}function s(t){const e=t.end;return t.end=(r=>{u.con.error("Abnormal client.end() call, due to invalid code or failed server connection.\n%s\n",u.utils.getLocalStack(3)),r||e.call(t)}),e}function a(t,e){Object.defineProperty(t,"$ctx",{value:e,writable:!0})}const u={con:t("manakin").local,utils:t("./utils"),events:t("./events")};e.exports=(t=>({pool:(e,r)=>n(e,r,t),direct:e=>i(e,t)}))},{"./events":29,"./utils":54,manakin:9}],22:[function(t,e,r){"use strict";function n(t,e,r){function n(){return new o.Context({cn:t,dc:e,options:r.options})}function s(t,e,r){return"function"==typeof e&&(t=t.then(t=>e.call(r,t))),t}function a(t,e){function n(n,i,s){let l;const f=t.clone();s&&(f.txLevel=f.txLevel>=0?f.txLevel+1:0),f.level=f.level>=0?f.level+1:0,this!==e&&(f.context=this),f.cb=n,void 0!==i&&(l=n,f.cb=i);const p=f.cb;if("function"!=typeof p)return c.reject(new TypeError("Callback function is required for the "+(s?"transaction.":"task.")));void 0===l&&(void 0!==p.tag?l=p.tag:p.name&&(l=p.name));const h=new r.$npm.task.Task(f,l,s,r);return f.taskCtx=h.ctx,a(f,h),f.db?(o.utils.addReadProp(h.ctx,"isFresh",f.db.isFresh),r.$npm.task.execute(f,h,s,r)):r.$npm.connect.pool(f,u).then(t=>(f.connect(t),o.utils.addReadProp(h.ctx,"isFresh",t.isFresh),r.$npm.task.execute(f,h,s,r))).then(t=>(f.disconnect(),t)).catch(t=>(f.disconnect(),c.reject(t)))}e.none=function(t,r){return e.query.call(this,t,r,o.result.none)},e.one=function(t,r,n,i){return s(e.query.call(this,t,r,o.result.one),n,i)},e.many=function(t,r){return e.query.call(this,t,r,o.result.many)},e.oneOrNone=function(t,r,n,i){return s(e.query.call(this,t,r,o.result.one|o.result.none),n,i)},e.manyOrNone=function(t,r){return e.query.call(this,t,r,o.result.many|o.result.none)},e.any=function(t,r){return e.query.call(this,t,r,o.result.any)},e.result=function(t,r,n,i){return s(e.query.call(this,t,r,o.special.cache.resultQuery),n,i)},e.stream=function(t,r){return e.query.call(this,t,r,o.special.cache.streamQuery)},e.func=function(t,r,n){return e.query.call(this,{funcName:t},r,n)},e.proc=function(t,r,n,i){return s(e.func.call(this,t,r,o.result.one|o.result.none),n,i)},e.map=function(t,r,n,i){return e.any.call(this,t,r).then(t=>{const e=t.map(n,i);return o.utils.addReadProp(e,"duration",t.duration,!0),e})},e.each=function(t,r,n,i){return e.any.call(this,t,r).then(t=>(t.forEach(n,i),t))},e.task=function(t,e){return n.call(this,t,e,!1)},e.tx=function(t,e){return n.call(this,t,e,!0)},o.utils.lock(e,!1,t.options),o.events.extend(t.options,e,t.dc),o.utils.lock(e,!0,t.options)}const u=this,c=r.promise,l="string"==typeof t?{connectionString:t}:t;let f=new r.pgp.pg.Pool(l);f.end=f.end.bind(f),f.on("error",i),this.connect=function(t){t=t||{};const e=n();e.cnOptions=t;const i={query:function(t,n,i){if(!e.db)throw new Error("Cannot execute a query on a disconnected client.");return r.$npm.query.call(this,e,t,n,i)},done:()=>{if(!e.db)throw new Error("Cannot invoke done() on a disconnected client.");e.disconnect()}};return(t.direct?r.$npm.connect.direct(e):r.$npm.connect.pool(e,u)).then(t=>(e.connect(t),i.client=t.client,a(e,i),i))},this.query=function(t,e,i){const o=this,s=n();return r.$npm.connect.pool(s,u).then(n=>(s.connect(n),r.$npm.query.call(o,s,t,e,i))).then(t=>(s.disconnect(),t)).catch(t=>(s.disconnect(),c.reject(t)))},o.utils.addReadProp(this,"$config",r,!0),o.utils.addReadProp(this,"$cn",t,!0),o.utils.addReadProp(this,"$dc",e,!0),o.utils.addReadProp(this,"$pool",f,!0),o.utils.addReadProp(this,"$destroy",()=>{f&&(f.pool._draining||f.end(),f.removeListener("error",i),f=null)},!0),a(n(),this),o.dbPool.register(this)}function i(t){const e=t.client.$ctx;o.events.error(e.options,t,{cn:o.utils.getSafeConnection(e.cn),dc:e.dc})}const o={result:t("./result"),special:t("./special"),Context:t("./cnContext"),events:t("./events"),utils:t("./utils"),connect:t("./connect"),dbPool:t("./dbPool"),query:t("./query"),task:t("./task")};e.exports=(t=>{const e=t.$npm;return e.connect=e.connect||o.connect(t),e.query=e.query||o.query(t),e.task=e.task||o.task(t),n})},{"./cnContext":20,"./connect":21,"./dbPool":23,"./events":29,"./query":44,"./result":46,"./special":47,"./task":49,"./utils":54}],23:[function(t,e,r){"use strict";const n={con:t("manakin").local,utils:t("./utils")};class i{constructor(){this.dbMap={},this.dbs=[]}register(t){const e=i.normalizeConnection(t.$cn);e in this.dbMap?t.$config.options.noWarnings||n.con.warn("WARNING: Creating a duplicate database object for the same connection.\n%s\n",n.utils.getLocalStack(5)):this.dbMap[e]=!0,this.dbs.push(t)}shutDown(){this.dbs.forEach(t=>{t.$destroy()}),this.dbs.length=0,this.dbMap={}}static normalizeConnection(t){if("object"==typeof t){const e={},r=Object.keys(t).sort();r.forEach(r=>{e[r]=t[r]}),t=e}return JSON.stringify(t)}}e.exports=new i},{"./utils":54,manakin:9}],24:[function(t,e,r){"use strict";const n={qResult:t("./queryResult"),qFile:t("./queryFile"),prepared:t("./prepared"),paramQuery:t("./paramQuery")};e.exports={QueryResultError:n.qResult.QueryResultError,queryResultErrorCode:n.qResult.queryResultErrorCode,PreparedStatementError:n.prepared,ParameterizedQueryError:n.paramQuery,QueryFileError:n.qFile},Object.freeze(e.exports)},{"./paramQuery":25,"./prepared":26,"./queryFile":27,"./queryResult":28}],25:[function(t,e,r){"use strict";function n(t,e){const r=Error.apply(this,arguments);r.name=this.name="ParameterizedQueryError",this.stack=r.stack,t instanceof i.QueryFileError?(this.error=t,this.message="Failed to initialize 'text' from a QueryFile."):this.message=t,this.result=e}const i={os:t("os"),utils:t("../utils"),QueryFileError:t("./queryFile")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=i.utils.messageGap(t+2),o=["ParameterizedQueryError {",r+'message: "'+this.message+'"',r+"result: {",n+"text: "+JSON.stringify(this.result.text),n+"values: "+JSON.stringify(this.result.values),r+"}"];return this.error&&o.push(r+"error: "+this.error.toString(t+1)),o.push(e+"}"),o.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils":54,"./queryFile":27,os:void 0}],26:[function(t,e,r){"use strict";function n(t,e){const r=Error.apply(this,arguments);r.name=this.name="PreparedStatementError",this.stack=r.stack,t instanceof i.QueryFileError?(this.error=t,this.message="Failed to initialize 'text' from a QueryFile."):this.message=t,this.result=e}const i={os:t("os"),utils:t("../utils"),QueryFileError:t("./queryFile")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=i.utils.messageGap(t+2),o=["PreparedStatementError {",r+'message: "'+this.message+'"',r+"result: {",n+"name: "+JSON.stringify(this.result.name),n+"text: "+JSON.stringify(this.result.text),n+"values: "+JSON.stringify(this.result.values),r+"}"];return this.error&&o.push(r+"error: "+this.error.toString(t+1)),o.push(e+"}"),o.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils":54,"./queryFile":27,os:void 0}],27:[function(t,e,r){"use strict";function n(t,e){const r=Error.apply(this,arguments);r.name=this.name="QueryFileError",this.stack=r.stack,t instanceof i.minify.SQLParsingError?(this.error=t,this.message="Failed to parse the SQL."):this.message=t.message,this.file=e.file,this.options=e.options}const i={os:t("os"),utils:t("../utils"),minify:t("pg-minify")};(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=["QueryFileError {",r+'message: "'+this.message+'"',r+"options: "+JSON.stringify(this.options),r+'file: "'+this.file+'"'];return this.error&&n.push(r+"error: "+this.error.toString(t+1)),n.push(e+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils":54,os:void 0,"pg-minify":15}],28:[function(t,e,r){"use strict";function n(t,e,r,n){const i=Error.apply(this,arguments);i.name=this.name="QueryResultError",this.stack=i.stack,this.message=s[t].message,this.code=t,this.result=e,this.query=r,this.values=n,this.received=e.rows.length}const i={os:t("os"),utils:t("../utils")},o={noData:0,notEmpty:1,multiple:2};Object.freeze(o);const s=[{name:"noData",message:"No data returned from the query."},{name:"notEmpty",message:"No return data was expected."},{name:"multiple",message:"Multiple rows were not expected."}];(n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}})).toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=["QueryResultError {",r+"code: queryResultErrorCode."+s[this.code].name,r+'message: "'+this.message+'"',r+"received: "+this.received,r+"query: "+("string"==typeof this.query?'"'+this.query+'"':JSON.stringify(this.query))];return void 0!==this.values&&n.push(r+"values: "+JSON.stringify(this.values)),n.push(e+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports={QueryResultError:n,queryResultErrorCode:o}},{"../utils":54,os:void 0}],29:[function(t,e,r){"use strict";const n={con:t("manakin").local,main:t("./"),utils:t("./utils")},i={connect:(t,e,r)=>{if("function"==typeof t.options.connect)try{t.options.connect(e,t.dc,r)}catch(t){i.unexpected("connect",t)}},disconnect:(t,e)=>{if("function"==typeof t.options.disconnect)try{t.options.disconnect(e,t.dc)}catch(t){i.unexpected("disconnect",t)}},query:(t,e)=>{if("function"==typeof t.query)try{t.query(e)}catch(t){return t instanceof Error?t:new n.utils.InternalError(t)}},receive:(t,e,r,i)=>{if("function"==typeof t.receive)try{t.receive(e,r,i)}catch(t){return t instanceof Error?t:new n.utils.InternalError(t)}},task:(t,e)=>{if("function"==typeof t.task)try{t.task(e)}catch(t){i.unexpected("task",t)}},transact:(t,e)=>{if("function"==typeof t.transact)try{t.transact(e)}catch(t){i.unexpected("transact",t)}},error:(t,e,r)=>{if("function"==typeof t.error)try{t.error(e,r)}catch(t){i.unexpected("error",t)}},extend:(t,e,r)=>{if("function"==typeof t.extend)try{t.extend.call(e,e,r)}catch(t){i.unexpected("extend",t)}},unexpected:(t,e)=>{if(!n.main.suppressErrors){const r=e instanceof Error?e.stack:(new Error).stack;n.con.error("Unexpected error in '%s' event handler.\n%s\n",t,r)}}};e.exports=i},{"./":40,"./utils":54,manakin:9}],30:[function(t,e,r){"use strict";function n(t,e,r){if("function"==typeof t)return n(l(t,r),e,r);if(t&&"object"==typeof t){const i=t.formatDBType;if("function"==typeof i)return e|=t._rawDBType?d.raw:0,n(l(i,t),e,r)}const i=!!(e&d.raw);switch(e&=~d.raw){case d.alias:return v.alias(t);case d.name:return v.name(t);case d.json:return v.json(t,i);case d.csv:return v.csv(t);case d.value:return v.value(t)}if(s(t))return c(i),"null";switch(typeof t){case"string":return v.text(t,i);case"boolean":return v.bool(t);case"number":return v.number(t);default:return t instanceof Date?v.date(t,i):t instanceof Array?v.array(t):t instanceof Buffer?v.buffer(t,i):v.json(t,i)}}function i(t){const e=t=>"["+t.map(t=>t instanceof Array?e(t):n(t)).join()+"]";return"array"+e(t)}function o(t){return t instanceof Array?t.map(t=>n(t)).join():void 0===t?"":n(t)}function s(t){return void 0===t||null===t}function a(t){return"'"+t+"'"}function u(t){return t.replace(/'/g,"''")}function c(t){if(t)throw new TypeError("Values null/undefined cannot be used as raw text.")}function l(t,e){for(;"function"==typeof t;)t=t.call(e,e);return t}function f(t,e,r,n){if("string"!=typeof t)throw new TypeError("Parameter 'query' must be a text string.");if(e&&"object"==typeof e){const i=e.formatDBType;if("function"==typeof i)return f(t,l(i,e),r||e._rawDBType,n);if(e instanceof Array)return m.array(t,e,r,n);if(!(e instanceof Date||e instanceof Buffer))return m.object(t,e,r,n)}return void 0===e?t:m.value(t,e,r)}function p(t){return'"'+t.replace(/"/g,'""')+'"'}const h={pgUtils:t("pg/lib/utils"),patterns:t("./patterns")},d={raw:1,alias:2,name:4,json:8,csv:16,value:32},y={"^":d.raw,":raw":d.raw,":alias":d.alias,"~":d.name,":name":d.name,":json":d.json,":csv":d.csv,":value":d.value,"#":d.value},m={object:(t,e,r,i)=>(i=i&&"object"==typeof i?i:{},t.replace(h.patterns.namedParameters,t=>{const o=m.stripName(t.replace(/^\$[{(<[/]|[\s})>\]/]/g,""),r);if(o.name in e)return n(e[o.name],o.fm,e);if("this"===o.name)return n(e,o.fm);if("default"in i){const t=i.default,r="function"==typeof t?t.call(e,o.name,e):t;return n(r,o.fm,e)}if(i.partial)return t;throw new Error("Property '"+o.name+"' doesn't exist.")})),array:(t,e,r,i)=>(i=i&&"object"==typeof i?i:{},t.replace(h.patterns.multipleValues,t=>{const o=m.stripName(t.substr(1),r),s=o.name-1;if(s>=1e5)throw new RangeError("Variable $"+o.name+" exceeds supported maximum of $100000");if(s<e.length)return n(e[s],o.fm);if("default"in i){const t=i.default,r="function"==typeof t?t.call(e,s,e):t;return n(r,o.fm)}if(i.partial)return t;throw new RangeError("Variable $"+o.name+" out of range. Parameters array length: "+e.length)})),value:(t,e,r)=>t.replace(h.patterns.singleValue,t=>{const i=m.stripName(t,r);return n(e,i.fm)}),stripName:(t,e)=>{const r=t.match(h.patterns.hasValidModifier);return r?{name:t.substr(0,r.index),fm:y[r[0]]|(e?d.raw:0)}:{name:t,fm:e?d.raw:null}}},v={text:(t,e)=>(t=l(t),s(t)?(c(e),"null"):("string"!=typeof t&&(t=t.toString()),e?t:a(u(t)))),name:t=>{if(t=l(t)){if("string"==typeof t)return/^\s*\*(\s*)$/.test(t)?t:p(t);if("object"==typeof t){const e=Array.isArray(t)?t:Object.keys(t);if(!e.length)throw new Error("Cannot retrieve sql names from an empty array/object.");return e.map(t=>{if(!t||"string"!=typeof t)throw new Error("Invalid sql name: "+JSON.stringify(t));return p(t)}).join()}}throw new TypeError("Invalid sql name: "+JSON.stringify(t))},alias:t=>{if((t=l(t))&&"string"==typeof t)return p(t);throw new TypeError("Invalid sql alias: "+JSON.stringify(t))},value:t=>{if(t=l(t),s(t))throw new TypeError("Open values cannot be null or undefined.");return u(n(t,d.raw))},buffer:(t,e)=>{if(t=l(t),s(t))return c(e),"null";if(t instanceof Buffer){const r="\\x"+t.toString("hex");return e?r:a(r)}throw new TypeError(a(t)+" is not a Buffer object.")},bool:t=>(t=l(t),s(t)?"null":t?"true":"false"),date:(t,e)=>{if(t=l(t),s(t))return c(e),"null";if(t instanceof Date){const r=h.pgUtils.prepareValue(t);return e?r:a(r)}throw new TypeError(a(t)+" is not a Date object.")},number:t=>{if(t=l(t),s(t))return"null";if("number"!=typeof t)throw new TypeError(a(t)+" is not a number.");return isFinite(t)?t.toString():a(t===Number.POSITIVE_INFINITY?"+Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":"NaN")},array:t=>{if(t=l(t),s(t))return"null";if(t instanceof Array)return i(t);throw new TypeError(a(t)+" is not an Array object.")},csv:t=>o(l(t)),json:(t,e)=>{if(t=l(t),s(t))return c(e),"null";const r=JSON.stringify(t);return e?r:a(u(r))},func:(t,e,r)=>{if(s(t))return c(e),"null";if("function"!=typeof t)throw new TypeError(a(t)+" is not a function.");const i=e?d.raw:null;return n(l(t,r),i,r)},format:(t,e,r)=>(t&&"function"==typeof t.formatDBType&&(t=t.formatDBType.call(t,t)),f(t,e,!1,r))};Object.freeze(v),e.exports={formatQuery:f,formatFunction:function(t,e,r){return(r?"SELECT * FROM ":"select * from ")+t+"("+o(e)+")"},as:v}},{"./patterns":42,"pg/lib/utils":70}],31:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);if("string"==typeof t){const e=o(t);this.name=e.name,"mod"in e&&(this.mod=e.mod),"cnd"in e&&(this.cnd=e.cnd)}else{if(!(t&&"object"==typeof t&&"name"in t))throw new TypeError("Invalid column details.");if(!u.utils.isText(t.name))throw new TypeError("Invalid 'name' value: "+JSON.stringify(t.name)+". A non-empty string was expected.");if(u.utils.isNull(t.prop)&&!a(t.name))throw new TypeError("Invalid 'name' syntax: "+JSON.stringify(t.name)+". A valid variable name was expected.");if(this.name=t.name,!u.utils.isNull(t.prop)){if(!u.utils.isText(t.prop))throw new TypeError("Invalid 'prop' value: "+JSON.stringify(t.prop)+". A non-empty string was expected.");if(!a(t.prop))throw new TypeError("Invalid 'prop' syntax: "+JSON.stringify(t.prop)+". A valid variable name was expected.");t.prop!==t.name&&(this.prop=t.prop)}if(!u.utils.isNull(t.mod)){if("string"!=typeof t.mod||!s(t.mod))throw new TypeError("Invalid 'mod' value: "+JSON.stringify(t.mod)+".");this.mod=t.mod}u.utils.isNull(t.cast)||(this.cast=i(t.cast)),"cnd"in t&&(this.cnd=!!t.cnd),"def"in t&&(this.def=t.def),"function"==typeof t.init&&(this.init=t.init),"function"==typeof t.skip&&(this.skip=t.skip)}const e="${"+(this.prop||this.name)+(this.mod||"")+"}",r=this.cast?"::"+this.cast:"",c=u.formatting.as.alias(this.name);Object.defineProperty(this,"variable",{value:e,enumerable:!0}),Object.defineProperty(this,"castText",{value:r,enumerable:!0}),Object.defineProperty(this,"escapedName",{value:c,enumerable:!0}),Object.freeze(this)}function i(t){if("string"==typeof t){const e=t.replace(/^[:\s]*|\s*$/g,"");if(e)return e}throw new TypeError("Invalid 'cast' value: "+JSON.stringify(t)+".")}function o(t){const e=t.match(u.patterns.validColumn);if(e&&e[0]===t){const e={};"?"===t[0]&&(e.cnd=!0,t=t.substr(1));const r=t.match(u.patterns.hasValidModifier);return r?(e.name=t.substr(0,r.index),e.mod=r[0]):e.name=t,e}throw new TypeError("Invalid column syntax: "+JSON.stringify(t)+".")}function s(t){return-1!==u.patterns.validModifiers.indexOf(t)}function a(t){const e=t.match(u.patterns.validVariable);return!!e&&e[0]===t}const u={os:t("os"),utils:t("../utils"),formatting:t("../formatting"),patterns:t("../patterns")};n.prototype.toString=function(t){t=t>0?parseInt(t):0;const e=u.utils.messageGap(t),r=u.utils.messageGap(t+1),n=[e+"Column {",r+"name: "+JSON.stringify(this.name)];return"prop"in this&&n.push(r+"prop: "+JSON.stringify(this.prop)),"mod"in this&&n.push(r+"mod: "+JSON.stringify(this.mod)),"cast"in this&&n.push(r+"cast: "+JSON.stringify(this.cast)),"cnd"in this&&n.push(r+"cnd: "+JSON.stringify(this.cnd)),"def"in this&&n.push(r+"def: "+JSON.stringify(this.def)),"init"in this&&n.push(r+"init: [Function]"),"skip"in this&&n.push(r+"skip: [Function]"),n.push(e+"}"),n.join(u.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../formatting":30,"../patterns":42,"../utils":54,os:void 0}],32:[function(t,e,r){"use strict";function n(t,e){function r(t,e){const r={source:e,name:t.prop||t.name};return r.exists=r.name in e,r.exists?r.value=e[r.name]:r.value="def"in t?t.def:void 0,r}if(!(this instanceof n))return new n(t,e);if(!t||"object"!=typeof t)throw new TypeError("Invalid parameter 'columns' specified.");let o,s,a,u,c=!0;if(!i.utils.isNull(e)){if("object"!=typeof e)throw new TypeError("Invalid parameter 'options' specified.");i.utils.isNull(e.table)||(e.table instanceof i.TableName?this.table=e.table:this.table=new i.TableName(e.table)),o=e.inherit}if(Array.isArray(t)){const e={};this.columns=t.map(t=>{const r=t instanceof i.Column?t:new i.Column(t);if(r.name in e)throw new Error('Duplicate column name "'+r.name+'".');return e[r.name]=!0,r})}else if(t instanceof i.Column)this.columns=[t];else{this.columns=[];for(let e in t)(o||Object.prototype.hasOwnProperty.call(t,e))&&this.columns.push(new i.Column(e))}Object.freeze(this.columns);for(let t=0;t<this.columns.length;t++){const e=this.columns[t];if(e.prop||e.init||"def"in e){c=!1;break}}Object.defineProperty(this,"names",{get:()=>(s||(s=this.columns.map(t=>t.escapedName).join()),s)}),Object.defineProperty(this,"variables",{get:()=>(a||(a=this.columns.map(t=>t.variable+t.castText).join()),a)}),this.assign=(t=>{const e=t&&t.prefix&&"string"==typeof t.prefix;if(u&&!e)return u;let n=e;const o=t&&t.source&&"object"==typeof t.source;let s=this.columns.filter(e=>{if(e.cnd)return!1;if(e.skip&&(n=!0,o)){const n=r(e,t.source);if(e.skip.call(t.source,n))return!1}return!0});const a=e?i.formatting.as.alias(t.prefix)+".":"";return s=s.map(t=>a+t.escapedName+"="+t.variable+t.castText).join(),n||(u=s),s}),this.extend=(t=>{let e=t;return e instanceof n||(e=new n(t)),new n(this.columns.concat(e.columns),{table:this.table})}),this.merge=(t=>{let e=t;e instanceof n||(e=new n(t));const r={},i=[];return this.columns.forEach((t,e)=>{i.push(t),r[t.name]=e}),e.columns.forEach(t=>{t.name in r?i[r[t.name]]=t:i.push(t)}),new n(i,{table:this.table})}),this.prepare=(t=>{if(c)return t;const e={};return this.columns.forEach(n=>{const i=r(n,t);n.init?e[i.name]=n.init.call(t,i):(i.exists||"def"in n)&&(e[i.name]=i.value)}),e}),Object.freeze(this)}const i={os:t("os"),utils:t("../utils"),formatting:t("../formatting"),TableName:t("./tableName"),Column:t("./column")};n.prototype.toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=["ColumnSet {"];return this.table&&n.push(r+"table: "+this.table),this.columns.length?(n.push(r+"columns: ["),this.columns.forEach(t=>{n.push(t.toString(2))}),n.push(r+"]")):n.push(r+"columns: []"),n.push(e+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../formatting":30,"../utils":54,"./column":31,"./tableName":39,os:void 0}],33:[function(t,e,r){"use strict";const n={concat:t("./methods/concat"),insert:t("./methods/insert"),update:t("./methods/update"),values:t("./methods/values"),sets:t("./methods/sets"),TableName:t("./tableName"),ColumnSet:t("./columnSet"),Column:t("./column")};e.exports=(t=>{const e={insert:(e,r,i)=>{const o=t.options&&t.options.capSQL;return n.insert(e,r,i,o)},update:(e,r,i,o)=>{const s=t.options&&t.options.capSQL;return n.update(e,r,i,o,s)},concat:n.concat,values:n.values,sets:n.sets,TableName:n.TableName,ColumnSet:n.ColumnSet,Column:n.Column};return Object.freeze(e),e})},{"./column":31,"./columnSet":32,"./methods/concat":34,"./methods/insert":35,"./methods/sets":36,"./methods/update":37,"./methods/values":38,"./tableName":39}],34:[function(t,e,r){"use strict";function n(t){return t.replace(/^[\s;]*|[\s;]*$/g,"")}const i={format:t("../../formatting").as.format,QueryFile:t("../../queryFile")};e.exports=function(t){if(!Array.isArray(t))throw new TypeError("Parameter 'queries' must be an array.");return t.map((t,e)=>{if("string"==typeof t)return n(t);if(t&&"object"==typeof t){if(t instanceof i.QueryFile)return n(t.formatDBType());if("query"in t)return n(i.format(t.query,t.values,t.options))}throw new Error("Invalid query element at index "+e+".")}).filter(t=>t).join(";")}},{"../../formatting":30,"../../queryFile":45}],35:[function(t,e,r){"use strict";const n={TableName:t("../tableName"),ColumnSet:t("../columnSet"),formatting:t("../../formatting"),utils:t("../../utils")},i={lowCase:"insert into $1^($2^) values",capCase:"INSERT INTO $1^($2^) VALUES"};e.exports=function(t,e,r,o){if(!t||"object"!=typeof t)throw new TypeError("Invalid parameter 'data' specified.");const s=Array.isArray(t);if(s&&!t.length)throw new TypeError("Cannot generate an INSERT from an empty array.");if(e instanceof n.ColumnSet)n.utils.isNull(r)&&(r=e.table);else{if(s&&n.utils.isNull(e))throw new TypeError("Parameter 'columns' is required when inserting multiple records.");e=new n.ColumnSet(e||t)}if(!e.columns.length)throw new Error("Cannot generate an INSERT without any columns.");if(!r)throw new Error("Table name is unknown.");r instanceof n.TableName||(r=new n.TableName(r));let a=o?i.capCase:i.lowCase;const u=n.formatting.as.format;return a=u(a,[r.name,e.names]),s?a+t.map((t,r)=>{if(!t||"object"!=typeof t)throw new Error("Invalid insert object at index "+r+".");return"("+u(e.variables,e.prepare(t))+")"}).join():a+"("+u(e.variables,e.prepare(t))+")"}},{"../../formatting":30,"../../utils":54,"../columnSet":32,"../tableName":39}],36:[function(t,e,r){"use strict";const n={ColumnSet:t("../columnSet"),format:t("../../formatting").as.format,utils:t("../../utils")};e.exports=function(t,e){if(!t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid parameter 'data' specified.");return e instanceof n.ColumnSet||(e=new n.ColumnSet(e||t)),n.format(e.assign({source:t}),e.prepare(t))}},{"../../formatting":30,"../../utils":54,"../columnSet":32}],37:[function(t,e,r){"use strict";const n={TableName:t("../tableName"),ColumnSet:t("../columnSet"),formatting:t("../../formatting"),utils:t("../../utils")},i={single:{lowCase:"update $1^ set ",capCase:"UPDATE $1^ SET "},multi:{lowCase:"update $1^ as $2^ set $3^ from (values$4^) as $5^($6^)",capCase:"UPDATE $1^ AS $2^ SET $3^ FROM (VALUES$4^) AS $5^($6^)"}};e.exports=function(t,e,r,o,s){function a(){if(!r||r instanceof n.TableName||(r=new n.TableName(r)),!r)throw new Error("Table name is unknown.")}function u(t){if(!t.length){if(f)return!0;throw new Error("Cannot generate an UPDATE without any columns.")}}if(!t||"object"!=typeof t)throw new TypeError("Invalid parameter 'data' specified.");const c=Array.isArray(t);if(c&&!t.length)throw new TypeError("Cannot generate an UPDATE from an empty array.");if(e instanceof n.ColumnSet)n.utils.isNull(r)&&(r=e.table);else{if(c&&n.utils.isNull(e))throw new TypeError("Parameter 'columns' is required when updating multiple records.");e=new n.ColumnSet(e||t)}o=o||{};const l=n.formatting.as.format,f="emptyUpdate"in o;if(c){const c=n.formatting.as.alias(n.utils.isNull(o.tableAlias)?"t":o.tableAlias),f=n.formatting.as.alias(n.utils.isNull(o.valueAlias)?"v":o.valueAlias),p=s?i.multi.capCase:i.multi.lowCase,h=e.columns.filter(t=>!t.cnd);if(u(h))return o.emptyUpdate;a();const d=h.map(t=>t.escapedName+"="+f+"."+t.escapedName).join(),y=t.map((t,r)=>{if(!t||"object"!=typeof t)throw new Error("Invalid update object at index "+r+".");return"("+l(e.variables,e.prepare(t))+")"}).join();return l(p,[r.name,c,d,y,f,e.names])}const p=e.assign({source:t});if(u(p))return o.emptyUpdate;a();const h=s?i.single.capCase:i.single.lowCase;return l(h,r.name)+l(p,e.prepare(t))}},{"../../formatting":30,"../../utils":54,"../columnSet":32,"../tableName":39}],38:[function(t,e,r){"use strict";const n={ColumnSet:t("../columnSet"),formatting:t("../../formatting"),utils:t("../../utils")};e.exports=function(t,e){if(!t||"object"!=typeof t)throw new TypeError("Invalid parameter 'data' specified.");const r=Array.isArray(t);if(!(e instanceof n.ColumnSet)){if(r&&n.utils.isNull(e))throw new TypeError("Parameter 'columns' is required when generating multi-row values.");e=new n.ColumnSet(e||t)}if(!e.columns.length)throw new Error("Cannot generate values without any columns.");const i=n.formatting.as.format;return r?t.map((t,r)=>{if(!t||"object"!=typeof t)throw new Error("Invalid object at index "+r+".");return"("+i(e.variables,e.prepare(t))+")"}).join():"("+i(e.variables,e.prepare(t))+")"}},{"../../formatting":30,"../../utils":54,"../columnSet":32}],39:[function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);if(t&&"object"==typeof t&&"table"in t&&(e=t.schema,t=t.table),!i.utils.isText(t))throw new TypeError("Table name must be a non-empty text string.");if(!i.utils.isNull(e)){if("string"!=typeof e)throw new TypeError("Invalid schema name.");e.length>0&&(this.schema=e)}this.table=t,this.name=i.formatting.as.alias(t),this.schema&&(this.name=i.formatting.as.alias(e)+"."+this.name),this._rawDBType=!0,Object.freeze(this)}const i={utils:t("../utils"),formatting:t("../formatting")};n.prototype.formatDBType=function(){return this.name},n.prototype.toString=function(){return this.name},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../formatting":30,"../utils":54}],40:[function(t,e,r){"use strict";if(+process.versions.node.split(".")[0]<4)throw new Error("Minimum Node.js version required by pg-promise is 4.x");e.exports=t("./main")},{"./main":41}],41:[function(t,e,r){"use strict";function n(e){if(i.utils.isNull(e))e={};else{if("object"!=typeof e)throw new TypeError("Invalid initialization options: "+JSON.stringify(e));const t=["pgFormatting","pgNative","promiseLib","noLocking","capSQL","noWarnings","connect","disconnect","query","receive","task","transact","error","extend"];if(!e.noWarnings)for(let r in e)if(-1===t.indexOf(r)){i.con.warn("WARNING: Invalid property '%s' in initialization options.\n%s\n",r,i.utils.getLocalStack(3));break}}let r=i.pg;const n=i.promise(e.promiseLib),s={version:i.package.version,promiseLib:n.promiseLib,promise:n.promise};if(i.utils.addReadProp(s,"$npm",{},!0),i.utils.addReadProp(e,"promiseLib",e.promiseLib),i.utils.addReadProp(e,"pgNative",!!e.pgNative),s.options=e,e.pgNative&&(r=i.pg.native,i.utils.isNull(r)))throw new Error("Failed to initialize Native Bindings.");const a=t("./database")(s),u=(t,e)=>{if(i.utils.isText(t)||t&&"object"==typeof t)return new a(t,e,s);throw new TypeError("Invalid connection details: "+JSON.stringify(t))};return i.utils.addReadProperties(u,o),i.utils.addReadProp(u,"pg",r),i.utils.addReadProp(u,"end",()=>{i.dbPool.shutDown()}),i.utils.addReadProp(u,"helpers",i.helpers(s)),i.utils.addReadProp(u,"spex",s.$npm.spex),s.pgp=u,Object.freeze(s),u}const i={con:t("manakin").local,path:t("path"),pg:t("pg"),minify:t("pg-minify"),adapter:t("./adapter"),result:t("./result"),promise:t("./promise"),formatting:t("./formatting"),helpers:t("./helpers"),queryFile:t("./queryFile"),errors:t("./errors"),utils:t("./utils"),pubUtils:t("./utils/public"),mode:t("./txMode"),types:t("./types"),dbPool:t("./dbPool"),package:t("../package.json")},o={as:i.formatting.as,minify:i.minify,queryResult:i.result,PromiseAdapter:i.adapter,ParameterizedQuery:i.types.ParameterizedQuery,PreparedStatement:i.types.PreparedStatement,QueryFile:i.queryFile,errors:i.errors,utils:i.pubUtils,txMode:i.mode};i.utils.addReadProperties(n,o),e.exports=n},{"../package.json":56,"./adapter":18,"./database":22,"./dbPool":23,"./errors":24,"./formatting":30,"./helpers":33,"./promise":43,"./queryFile":45,"./result":46,"./txMode":50,"./types":51,"./utils":54,"./utils/public":55,manakin:9,path:void 0,pg:65,"pg-minify":15}],42:[function(t,e,r){"use strict";e.exports={namedParameters:/\$(?:({)|(\()|(<)|(\[)|(\/))\s*[a-zA-Z0-9$_]+(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?\s*(?:(?=\2)(?=\3)(?=\4)(?=\5)}|(?=\1)(?=\3)(?=\4)(?=\5)\)|(?=\1)(?=\2)(?=\4)(?=\5)>|(?=\1)(?=\2)(?=\3)(?=\5)]|(?=\1)(?=\2)(?=\3)(?=\4)\/)/g,multipleValues:/\$([1-9][0-9]{0,16}(?![0-9])(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?)/g,singleValue:/\$1(?![0-9])(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?/g,validColumn:/\??[a-zA-Z0-9$_]+(\^|~|#|:raw|:alias|:name|:json|:csv|:value)?/,validVariable:/^[0-9]+|[a-zA-Z0-9$_]+/,hasValidModifier:/\^|~|#|:raw|:alias|:name|:json|:csv|:value/,validModifiers:["^","~","#",":raw",":alias",":name",":json",":csv",":value"],splitDevice:/^([a-zA-Z]:|[\\/]{2}[^\\/]+[\\/]+[^\\/]+)?([\\/])?([\s\S]*?)$/}},{}],43:[function(t,e,r){"use strict";function n(t){let e;if(t instanceof i)return e=function(e){return t.create(e)},e.resolve=t.resolve,e.reject=t.reject,e.all=t.all,e;const r=typeof t;if("function"===r||"object"===r){const r="function"==typeof t.Promise?t.Promise:t;if(e=function(t){return new r(t)},e.resolve=r.resolve,e.reject=r.reject,e.all=r.all,"function"==typeof e.resolve&&"function"==typeof e.reject&&"function"==typeof e.all)return e}throw new TypeError("Invalid promise library specified.")}const i=t("./adapter");e.exports=function(t){const e={promiseLib:t};return t?e.promise=n(t):(e.promise=n(Promise),e.promiseLib=Promise),e}},{"./adapter":18}],44:[function(t,e,r){"use strict";function n(t,e,r,n,h){let d;const y=h.promise;if(n instanceof l){if(n.isStream)return i.stream.call(this,t,e,r,h);d=n.isResult}const m=t.options,v=m.capSQL;let g,b,w=m.pgFormatting,_=w?r:void 0;if(e||(g=new TypeError("Empty or undefined query.")),g||"object"!=typeof e||(e instanceof i.QueryFile?(e.prepare(),e.error?(g=e.error,e=e.file):e=e.query):"funcName"in e?(b=!0,e=e.funcName):(e instanceof a?w=!0:"name"in e?(e=new u(e),w=!0):"text"in e&&(e=new c(e),w=!0),e instanceof a&&!i.utils.isNull(r)&&(e.values=r))),!g&&(w||i.utils.isText(e)||(g=new TypeError(b?"Invalid function name.":"Invalid query format.")),e instanceof a)){const t=e.parse();t instanceof Error?g=t:e=t}if(g||d||(i.utils.isNull(n)?n=i.result.any:(n!==parseInt(n)||(n&p)===p||n<1||n>6)&&(g=new TypeError("Invalid Query Result Mask specified."))),!g&&(!w||b))try{b?(_=void 0,e=i.formatting.formatFunction(e,r,v)):e=i.formatting.formatQuery(e,r)}catch(t){if(b){const t=v?"SELECT * FROM":"select * from";e=t+" "+e+"(...)"}else _=r;g=t instanceof Error?t:new i.utils.InternalError(t)}return y((r,a)=>{function u(){let r;return t.db?r=t.db.client:g=new Error("Loose request outside an expired connection."),{client:r,query:e,params:_,dc:t.dc,ctx:t.ctx}}function c(){const t=u();if(g)return g instanceof s&&(g=g.error),i.events.error(m,g,t),a(g),!0}if(c())return;if(g=i.events.query(m,u()),c())return;const l=Date.now();try{t.db.client.query(e,_,(t,s)=>{let a;if(t||(i.utils.addReadProp(s,"duration",Date.now()-l),i.utils.addReadProp(s.rows,"duration",s.duration,!0),s.rows.length&&(t=(t=i.events.receive(m,s.rows,s,u()))||g)),t)g=t;else if(d)a=s;else{const t=(a=s.rows).length;t?t>1&&n&i.result.one?g=new o(f.multiple,s,e,_):n&(i.result.one|i.result.many)?n&i.result.many||(a=a[0]):g=new o(f.notEmpty,s,e,_):n&i.result.none?a=n&i.result.one?null:n&i.result.many?a:null:g=new o(f.noData,s,e,_)}c()||r(a)})}catch(t){g=t}c()})}const i={utils:t("./utils"),special:t("./special"),QueryFile:t("./queryFile"),formatting:t("./formatting"),result:t("./result"),errors:t("./errors"),events:t("./events"),stream:t("./stream"),types:t("./types")},o=i.errors.QueryResultError,s=i.utils.InternalError,a=i.types.ExternalQuery,u=i.types.PreparedStatement,c=i.types.ParameterizedQuery,l=i.special.SpecialQuery,f=i.errors.queryResultErrorCode,p=i.result.one|i.result.many;e.exports=(t=>(function(e,r,i,o){return n.call(this,e,r,i,o,t)}))},{"./errors":24,"./events":29,"./formatting":30,"./queryFile":45,"./result":46,"./special":47,"./stream":48,"./types":51,"./utils":54}],45:[function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);let r,s,a,u,c,l=t;const f={debug:i.utils.isDev(),minify:!1,compress:!1,noWarnings:!1};e&&"object"==typeof e&&(void 0!==e.debug&&(f.debug=!!e.debug),void 0!==e.minify&&(c="after"===e.minify,f.minify=c?"after":!!e.minify),void 0!==e.compress&&(f.compress=!!e.compress),f.compress&&void 0===e.minify&&(f.minify=!0),void 0!==e.params&&(f.params=e.params),void 0!==e.noWarnings&&(f.noWarnings=!!e.noWarnings)),Object.freeze(f),i.utils.isText(l)&&!i.utils.isPathAbsolute(l)&&(l=i.path.join(i.utils.startDir,l)),f.noWarnings||(l in o?(o[l]++,i.con.warn("WARNING: Creating a duplicate QueryFile object for the same file - \n    %s\n%s\n",l,i.utils.getLocalStack(3))):o[l]=0),this.formatDBType=function(){return this.prepare(!0),this.query},this.prepare=function(t){let e;if(f.debug&&a)try{if((e=i.fs.statSync(l).mtime.getTime())===u)return;a=!1}catch(e){if(r=void 0,a=!1,s=e,t)throw s;return}if(!a)try{r=i.fs.readFileSync(l,"utf8"),u=e||i.fs.statSync(l).mtime.getTime(),f.minify&&!c&&(r=i.minify(r,{compress:f.compress})),void 0!==f.params&&(r=i.format(r,f.params,{partial:!0})),f.minify&&c&&(r=i.minify(r,{compress:f.compress})),a=!0,s=void 0}catch(e){if(r=void 0,s=new i.QueryFileError(e,this),t)throw s}},Object.defineProperty(this,"query",{get:()=>r}),Object.defineProperty(this,"error",{get:()=>s}),Object.defineProperty(this,"file",{get:()=>t}),Object.defineProperty(this,"options",{get:()=>f}),this.prepare()}const i={fs:t("fs"),os:t("os"),path:t("path"),con:t("manakin").local,minify:t("pg-minify"),utils:t("./utils"),format:t("./formatting").as.format,QueryFileError:t("./errors/queryFile")},o={};n.prototype.toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t+1),r=["QueryFile {"];return this.prepare(),r.push(e+'file: "'+this.file+'"'),r.push(e+"options: "+JSON.stringify(this.options)),this.error?r.push(e+"error: "+this.error.toString(t+1)):r.push(e+'query: "'+this.query+'"'),r.push(i.utils.messageGap(t)+"}"),r.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"./errors/queryFile":27,"./formatting":30,"./utils":54,fs:void 0,manakin:9,os:void 0,path:void 0,"pg-minify":15}],46:[function(t,e,r){"use strict";const n={one:1,many:2,none:4,any:6};Object.freeze(n),e.exports=n},{}],47:[function(t,e,r){"use strict";class n{constructor(t){this.isStream="stream"===t,this.isResult="result"===t}}const i={resultQuery:new n("result"),streamQuery:new n("stream")};e.exports={SpecialQuery:n,cache:i}},{}],48:[function(t,e,r){"use strict";const n={events:t("./events"),utils:t("./utils")};e.exports=function(t,e,r,i){function o(t){return t instanceof n.utils.InternalError?t.error:t}function s(){let r;return t.db?r=t.db.client:u=new Error("Loose request outside an expired connection."),{client:r,dc:t.dc,query:e.text,params:e.values,ctx:t.ctx}}const a=i.promise;if(t.options.pgNative)return a.reject(new Error("Streaming doesn't work with Native Bindings."));if(!n.utils.isObject(e,["state","_reading"]))return a.reject(new TypeError("Invalid or missing stream object."));if(e._reading||"initialized"!==e.state)return a.reject(new Error("Invalid stream state."));if("function"!=typeof r)return a.reject(new TypeError("Invalid or missing stream initialization callback."));let u=n.events.query(t.options,s());if(u)return u=o(u),n.events.error(t.options,u,s()),a.reject(u);let c,l,f,p=0;try{c=t.db.client.query(e),l=c._fetch,c._fetch=((e,r)=>{l.call(c,e,(e,i)=>{if(!e&&i.length){p+=i.length;const e=s();u||(u=n.events.receive(t.options,i,void 0,e)),u&&c.close()}return r(e,i)})}),f=Date.now(),r.call(this,c)}catch(t){u=t}return u?(c._fetch=l,u=o(u),n.events.error(t.options,u,s()),a.reject(u)):a((e,r)=>{function i(e){e=o(e),n.events.error(t.options,e,s()),r(e)}c.once("end",()=>{c._fetch=l,u?i(u):e({processed:p,duration:Date.now()-f})}),c.once("error",t=>{c._fetch=l,i(t)})})}},{"./events":29,"./utils":54}],49:[function(t,e,r){"use strict";function n(t,e,r,n){this.ctx=t.ctx={},i.utils.addReadProp(this.ctx,"isTX",r),"context"in t&&i.utils.addReadProp(this.ctx,"context",t.context),i.utils.addReadProp(this.ctx,"connected",!t.db),i.utils.addReadProp(this.ctx,"tag",e),i.utils.addReadProp(this.ctx,"dc",t.dc),i.utils.addReadProp(this.ctx,"level",t.level),r&&i.utils.addReadProp(this.ctx,"txLevel",t.txLevel),i.utils.addReadProp(this.ctx,"parent",t.parentCtx),this.query=function(e,i,o){if(!t.db)throw new Error("Unexpected call outside of "+(r?"transaction.":"task."));return n.$npm.query.call(this,t,e,i,o)},this.batch=function(t,e){return n.$npm.spex.batch.call(this,t,e)},this.page=function(t,e,r){return n.$npm.spex.page.call(this,t,e,r)},this.sequence=function(t,e,r,i){return n.$npm.spex.sequence.call(this,t,e,r,i)}}const i={spex:t("spex"),utils:t("./utils"),mode:t("./txMode"),events:t("./events"),query:t("./query"),async:t("./async")},o=(t,e,r,n)=>{function o(){let r,o=t.cb;"GeneratorFunction"===o.constructor.name&&(o=n.$npm.async(o));try{r=o.call(e,e)}catch(e){return i.events.error(t.options,e,{client:t.db.client,dc:t.dc,ctx:t.ctx}),l.reject(e)}return r&&"function"==typeof r.then?r:l.resolve(r)}function s(e,n,o){const s=t.ctx;e?i.utils.addReadProp(s,"start",new Date):(s.finish=new Date,s.success=n,s.result=o,s.duration=s.finish-s.start,i.utils.lock(s,!0)),(r?i.events.transact:i.events.task)(t.options,{client:t.db.client,dc:t.dc,ctx:s})}function a(){return c("commit","release savepoint")}function u(){return c("rollback","rollback to savepoint")}function c(r,n){return t.txLevel?e.none((y?n.toUpperCase():n)+" "+d):e.none(y?r.toUpperCase():r)}const l=n.promise;let f,p,h,d;const y=t.options.capSQL;return s(!0),r?(d="level_"+t.txLevel,(!t.txLevel&&t.cb.txMode instanceof i.mode.TransactionMode?c(t.cb.txMode.begin(y),"savepoint"):c("begin","savepoint")).then(()=>o().then(t=>(f=t,h=!0,a()),t=>(p=t,u())).then(()=>h?(s(!1,!0,f),f):(s(!1,!1,p),l.reject(p)),t=>(s(!1,!1,t),l.reject(t))),t=>(s(!1,!1,t),l.reject(t)))):o().then(t=>(s(!1,!0,t),t)).catch(t=>(s(!1,!1,t),l.reject(t)))};e.exports=(t=>{const e=t.$npm;return e.query=e.query||i.query(t),e.async=e.async||i.async(t),e.spex=e.spex||i.spex(t.promiseLib),{Task:n,execute:o}})},{"./async":19,"./events":29,"./query":44,"./txMode":50,"./utils":54,spex:87}],50:[function(t,e,r){"use strict";function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);t&&"object"==typeof t&&(e=t.readOnly,r=t.deferrable,t=t.tiLevel);let o,s,a,u,c="begin";if((t=t>0?parseInt(t):0)>0&&t<4){const e=["serializable","repeatable read","read committed"];o="isolation level "+e[t-1]}e?s="read only":void 0!==e&&(s="read write"),t===i.serializable&&e&&(r?a="deferrable":void 0!==r&&(a="not deferrable")),o&&(c+=" "+o),s&&(c+=" "+s),a&&(c+=" "+a),u=c.toUpperCase(),this.begin=(t=>t?u:c)}const i={none:0,serializable:1,repeatableRead:2,readCommitted:3};Object.freeze(i),e.exports={isolationLevel:i,TransactionMode:n},Object.freeze(e.exports)},{}],51:[function(t,e,r){"use strict";const n={utils:t("../utils"),PS:t("./prepared"),PQ:t("./parameterized")};class i{}i.prototype.inspect=function(){return this.toString()},n.utils.inherits(n.PS,i),n.utils.inherits(n.PQ,i),e.exports={ExternalQuery:i,PreparedStatement:n.PS,ParameterizedQuery:n.PQ}},{"../utils":54,"./parameterized":52,"./prepared":53}],52:[function(t,e,r){"use strict";function n(t,e){function r(t){Array.isArray(t)?t.length?s.values=t:delete s.values:i.utils.isNull(t)?delete s.values:s.values=[t]}if(!(this instanceof n))return new n(t,e);let o,s={},a=!0;const u={text:t,binary:void 0,rowMode:void 0};r(e),Object.defineProperty(this,"text",{get:()=>u.text,set:t=>{t!==u.text&&(u.text=t,a=!0)}}),Object.defineProperty(this,"values",{get:()=>s.values,set:t=>{r(t)}}),Object.defineProperty(this,"binary",{get:()=>u.binary,set:t=>{t!==u.binary&&(u.binary=t,a=!0)}}),Object.defineProperty(this,"rowMode",{get:()=>u.rowMode,set:t=>{t!==u.rowMode&&(u.rowMode=t,a=!0)}}),Object.defineProperty(this,"error",{get:()=>o}),i.utils.isObject(t,["text"])&&(u.text=t.text,u.binary=t.binary,u.rowMode=t.rowMode,r(t.values)),this.parse=(()=>{const t=u.text instanceof i.QueryFile?u.text:null;if(!a&&!t)return s;const e=[],r=s.values;return s={name:u.name},a=!0,o=void 0,t?(t.prepare(),t.error?(s.text=u.text,e.push(t.error)):s.text=t.query):s.text=u.text,i.utils.isText(s.text)||e.push("Property 'text' must be a non-empty text string."),i.utils.isNull(r)||(s.values=r),void 0!==u.binary&&(s.binary=u.binary),void 0!==u.rowMode&&(s.rowMode=u.rowMode),e.length?o=new i.errors.ParameterizedQueryError(e[0],s):(a=!1,s)})}const i={os:t("os"),utils:t("../utils"),errors:t("../errors"),QueryFile:t("../queryFile")};n.prototype.toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t+1),r=this.parse(),n=["ParameterizedQuery {"];return i.utils.isText(r.text)&&n.push(e+'text: "'+r.text+'"'),void 0!==this.values&&n.push(e+"values: "+JSON.stringify(this.values)),void 0!==this.binary&&n.push(e+"binary: "+JSON.stringify(this.binary)),void 0!==this.rowMode&&n.push(e+"rowMode: "+JSON.stringify(this.rowMode)),void 0!==this.error&&n.push(e+"error: "+this.error.toString(t+1)),n.push(i.utils.messageGap(t)+"}"),n.join(i.os.EOL)},e.exports=n},{"../errors":24,"../queryFile":45,"../utils":54,os:void 0}],53:[function(t,e,r){"use strict";function n(t,e,r){function o(t){Array.isArray(t)?t.length?a.values=t:delete a.values:i.utils.isNull(t)?delete a.values:a.values=[t]}if(!(this instanceof n))return new n(t,e,r);let s,a={},u=!0;const c={name:t,text:e,binary:void 0,rowMode:void 0,rows:void 0};o(r),Object.defineProperty(this,"name",{get:()=>c.name,set:t=>{t!==c.name&&(c.name=t,u=!0)}}),Object.defineProperty(this,"text",{get:()=>c.text,set:t=>{t!==c.text&&(c.text=t,u=!0)}}),Object.defineProperty(this,"values",{get:()=>a.values,set:t=>{o(t)}}),Object.defineProperty(this,"binary",{get:()=>c.binary,set:t=>{t!==c.binary&&(c.binary=t,u=!0)}}),Object.defineProperty(this,"rowMode",{get:()=>c.rowMode,set:t=>{t!==c.rowMode&&(c.rowMode=t,u=!0)}}),Object.defineProperty(this,"rows",{get:()=>c.rows,set:t=>{t!==c.rows&&(c.rows=t,u=!0)}}),Object.defineProperty(this,"error",{get:()=>s}),i.utils.isObject(t,["name"])&&(c.name=t.name,c.text=t.text,c.binary=t.binary,c.rowMode=t.rowMode,c.rows=t.rows,o(t.values)),this.parse=(()=>{const t=c.text instanceof i.QueryFile?c.text:null;if(!u&&!t)return a;const e=[],r=a.values;return a={name:c.name},u=!0,s=void 0,i.utils.isText(a.name)||e.push("Property 'name' must be a non-empty text string."),t?(t.prepare(),t.error?(a.text=c.text,e.push(t.error)):a.text=t.query):a.text=c.text,i.utils.isText(a.text)||e.push("Property 'text' must be a non-empty text string."),i.utils.isNull(r)||(a.values=r),void 0!==c.binary&&(a.binary=c.binary),void 0!==c.rowMode&&(a.rowMode=c.rowMode),void 0!==c.rows&&(a.rows=c.rows),e.length?s=new i.errors.PreparedStatementError(e[0],a):(u=!1,a)})}const i={os:t("os"),utils:t("../utils"),errors:t("../errors"),QueryFile:t("../queryFile")};n.prototype.toString=function(t){t=t>0?parseInt(t):0;const e=i.utils.messageGap(t+1),r=this.parse(),n=["PreparedStatement {",e+"name: "+JSON.stringify(this.name)];return i.utils.isText(r.text)&&n.push(e+'text: "'+r.text+'"'),void 0!==this.values&&n.push(e+"values: "+JSON.stringify(this.values)),void 0!==this.binary&&n.push(e+"binary: "+JSON.stringify(this.binary)),void 0!==this.rowMode&&n.push(e+"rowMode: "+JSON.stringify(this.rowMode)),void 0!==this.rows&&n.push(e+"rows: "+JSON.stringify(this.rows)),this.error&&n.push(e+"error: "+this.error.toString(t+1)),n.push(i.utils.messageGap(t)+"}"),n.join(i.os.EOL)},e.exports=n},{"../errors":24,"../queryFile":45,"../utils":54,os:void 0}],54:[function(t,e,r){"use strict";function n(t,e,r,n){Object.defineProperty(t,e,{value:r,configurable:!1,enumerable:!n,writable:!1})}const i={path:t("path"),patterns:t("../patterns")},o={InternalError:function(t){this.error=t},getLocalStack:function(t){return(new Error).stack.split("\n").slice(t).filter(t=>t.match(/\(.*(\\+|\/+).*\)/)).join("\n")},isPathAbsolute:function(t){if("win32"===process.platform){const e=i.patterns.splitDevice.exec(t),r=e[1]||"",n=!!r&&":"!==r.charAt(1);return!!e[2]||n}return"/"===t.charAt(0)},lock:function(t,e,r){if(!r||!r.noLocking)if(e)Object.freeze(t);else{const e={writable:!1,configurable:!1,enumerable:!0};for(let r in t)Object.defineProperty(t,r,e)}},isText:function(t){return t&&"string"==typeof t&&/\S/.test(t)},isNull:function(t){return null===t||void 0===t},isDev:function(){return-1!==(global.process.env.NODE_ENV||"").toLowerCase().indexOf("dev")},isObject:function(t,e){if(t&&"object"==typeof t){for(let r=0;r<e.length;r++)if(!(e[r]in t))return!1;return!0}return!1},addReadProp:n,addReadProperties:function(t,e){for(let r in e)n(t,r,e[r])},getSafeConnection:function(t){if("object"==typeof t){const e=JSON.parse(JSON.stringify(t));return"string"==typeof e.password&&(e.password=e.password.replace(/./g,"#")),e}return t.replace(/:(?![/])([^@]+)/,(t,e)=>":"+new Array(e.length+1).join("#"))},messageGap:function(t){return Array(1+4*t).join(" ")},inherits:function(t,e){t.prototype.__proto__=e.prototype}},s=process.argv[1];o.startDir=s?i.path.dirname(s):process.cwd(),Object.freeze(o),e.exports=o},{"../patterns":42,path:void 0}],55:[function(t,e,r){"use strict";function n(t){return(t=t.replace(/[-_\s.]+(.)?/g,(t,e)=>e?e.toUpperCase():"")).substr(0,1).toLowerCase()+t.substr(1)}function i(t){return t=t.replace(/[^a-zA-Z0-9$_\-\s.]/g,"").replace(/^[0-9_\-\s.]+/,""),n(t)}function o(t,e,r,n){const s={};return u.fs.readdirSync(t).forEach(a=>{let c;const l=u.path.join(t,a);try{c=u.fs.statSync(l)}catch(t){if(e.ignoreErrors)return;throw t}if(c.isDirectory()){if(e.recursive){const t=i(a),u=n?n+"."+t:t,c=o(l,e,r,u);if(Object.keys(c).length){if((!t.length||t in s)&&!e.ignoreErrors)throw new Error("Empty or duplicate camelized folder name: "+l);s[t]=c}}}else if(".sql"===u.path.extname(a).toLowerCase()){const t=i(a.replace(/\.[^/.]+$/,""));if((!t.length||t in s)&&!e.ignoreErrors)throw new Error("Empty or duplicate camelized file name: "+l);if(s[t]=l,r){const e=r(l,t,n?n+"."+t:t);void 0!==e&&(s[t]=e)}}}),s}function s(t,e,r){if(!u.utils.isText(t))throw new TypeError("Parameter 'dir' must be a non-empty text string.");return e&&"object"==typeof e||(e={}),r="function"==typeof r?r:null,o(t,e,r,"")}function a(t,e){function r(t,n){let i="",o=0;const s=u.utils.messageGap(n);for(let a in t){const u=t[a];o&&(i+=","),u&&"object"==typeof u?(i+=c+s+a+": {",i+=r(u,n+1),i+=c+s+"}"):(i+=c+s+a+": ",i+=e?e(u,a,t):JSON.stringify(u)),o++}return i}if(!t||"object"!=typeof t)throw new TypeError("Parameter 'obj' must be a non-null object.");return e="function"==typeof e?e:null,"{"+r(t,1)+c+"}"}const u={fs:t("fs"),path:t("path"),utils:t("./"),package:t("../../package.json")},c=t("os").EOL;e.exports={camelize:n,camelizeVar:i,enumSql:s,objectToCode:a,buildSqlModule:function(e){if(u.utils.isText(e)){const r=u.utils.isPathAbsolute(e)?e:u.path.join(u.utils.startDir,e);e=t(r)}else if(u.utils.isNull(e)){const r=u.path.join(u.utils.startDir,"sql-config.json");if(!u.fs.existsSync(r))throw new Error("Default SQL configuration file not found: "+r);e=t(r)}else if(!e||"object"!=typeof e)throw new TypeError("Invalid parameter 'config' specified.");if(!u.utils.isText(e.dir))throw new Error("Property 'dir' must be a non-empty string.");let r=0;const n=s(e.dir,{recursive:e.recursive,ignoreErrors:e.ignoreErrors},()=>{r++});let i="./loadSql",o="load";e.module&&"object"==typeof e.module&&(u.utils.isText(e.module.path)&&(i=e.module.path),u.utils.isText(e.module.name)&&(o=e.module.name));const l=new Date,f="/////////////////////////////////////////////////////////////////////////"+c+"// This file was automatically generated by pg-promise v."+u.package.version+c+"//"+c+"// Generated on: "+l.toLocaleDateString()+", at "+l.toLocaleTimeString()+c+"// Total files: "+r+c+"//"+c+"// API: http://vitaly-t.github.io/pg-promise/utils.html#.buildSqlModule"+c+"/////////////////////////////////////////////////////////////////////////"+c+c+"'use strict';"+c+c+"const "+o+" = require('"+i+"');"+c+c+"module.exports = "+a(n,t=>o+"("+JSON.stringify(t)+")")+";";if(u.utils.isText(e.output)){let t=e.output;u.utils.isPathAbsolute(t)||(t=u.path.join(u.utils.startDir,t)),u.fs.writeFileSync(t,f)}return f}},Object.freeze(e.exports)},{"../../package.json":56,"./":54,fs:void 0,os:void 0,path:void 0}],56:[function(t,e,r){e.exports={_args:[[{raw:"pg-promise@^6.3.0",scope:null,escapedName:"pg-promise",name:"pg-promise",rawSpec:"^6.3.0",spec:">=6.3.0 <7.0.0",type:"range"},"/Users/evgenytomsen/prj/recredia/postgres-to-json-schema"]],_from:"pg-promise@>=6.3.0 <7.0.0",_id:"pg-promise@6.3.0",_inCache:!0,_location:"/pg-promise",_nodeVersion:"4.8.3",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/pg-promise-6.3.0.tgz_1498943955116_0.34558538836427033"},_npmUser:{name:"vitaly.tomilov",email:"vitaly.tomilov@gmail.com"},_npmVersion:"2.15.11",_phantomChildren:{},_requested:{raw:"pg-promise@^6.3.0",scope:null,escapedName:"pg-promise",name:"pg-promise",rawSpec:"^6.3.0",spec:">=6.3.0 <7.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/pg-promise/-/pg-promise-6.3.0.tgz",_shasum:"9dca24e7449b4592b2190047c2f86fcae5e54864",_shrinkwrap:null,_spec:"pg-promise@^6.3.0",_where:"/Users/evgenytomsen/prj/recredia/postgres-to-json-schema",author:{name:"Vitaly Tomilov",email:"vitaly.tomilov@gmail.com"},bugs:{url:"https://github.com/vitaly-t/pg-promise/issues",email:"vitaly.tomilov@gmail.com"},dependencies:{manakin:"0.4",pg:"^6.4.0","pg-minify":"0.4",spex:"1.2"},description:"Promises interface for PostgreSQL",devDependencies:{"@types/node":"^7.0.33",JSONStream:"1.3",bluebird:"3.5",coveralls:"2.11",eslint:"^4.1.1",istanbul:"0.4","jasmine-node":"1.14",jsdoc:"3.4","pg-query-stream":"1.x",typescript:"2.4"},directories:{},dist:{shasum:"9dca24e7449b4592b2190047c2f86fcae5e54864",tarball:"https://registry.npmjs.org/pg-promise/-/pg-promise-6.3.0.tgz"},engines:{node:">=4.0",npm:">=2.15"},files:["lib","typescript"],gitHead:"cf9a55dad99967b845bb91fa9f7da79a1e4ff20e",homepage:"https://github.com/vitaly-t/pg-promise",keywords:["pg","promise","postgres"],license:"MIT",main:"lib/index.js",maintainers:[{name:"vitaly.tomilov",email:"vitaly.tomilov@gmail.com"}],name:"pg-promise",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/vitaly-t/pg-promise.git"},scripts:{coverage:"istanbul cover ./node_modules/jasmine-node/bin/jasmine-node test",doc:"jsdoc -c ./jsdoc/jsDoc.json ./jsdoc/README.md",lint:"eslint ./lib ./test/*.js ./test/db",test:"jasmine-node test","test-native":"jasmine-node test --config PG_NATIVE true",travis:"npm run lint && istanbul cover ./node_modules/jasmine-node/bin/jasmine-node test --captureExceptions && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js && rm -rf ./coverage"},typings:"typescript/pg-promise.d.ts",version:"6.3.0"}},{}],57:[function(t,e,r){function n(t){return String(t)}var i=t("./lib/textParsers"),o=t("./lib/binaryParsers"),s=t("./lib/arrayParser");r.getTypeParser=function(t,e){return e=e||"text",a[e]?a[e][t]||n:n},r.setTypeParser=function(t,e,r){"function"==typeof e&&(r=e,e="text"),a[e][t]=r},r.arrayParser=s;var a={text:{},binary:{}};i.init(function(t,e){a.text[t]=e}),o.init(function(t,e){a.binary[t]=e})},{"./lib/arrayParser":58,"./lib/binaryParsers":59,"./lib/textParsers":60}],58:[function(t,e,r){var n=t("postgres-array");e.exports={create:function(t,e){return{parse:function(){return n.parse(t,e)}}}}},{"postgres-array":73}],59:[function(t,e,r){var n=function(t,e,r,n,i){r=r||0,n=n||!1,i=i||function(t,e,r){return t*Math.pow(2,r)+e};var o=r>>3,s=function(t){return n?255&~t:t},a=255,u=8-r%8;e<u&&(a=255<<8-e&255,u=e),r&&(a>>=r%8);var c=0;r%8+e>=8&&(c=i(0,s(t[o])&a,u));for(var l=e+r>>3,f=o+1;f<l;f++)c=i(c,s(t[f]),8);var p=(e+r)%8;return p>0&&(c=i(c,s(t[l])>>8-p,p)),c},i=function(t,e,r){var i=Math.pow(2,r-1)-1,o=n(t,1),s=n(t,r,1);if(0===s)return 0;var a=1,u=n(t,e,r+1,!1,function(t,e,r){0===t&&(t=1);for(var n=1;n<=r;n++)a/=2,(e&1<<r-n)>0&&(t+=a);return t});return s==Math.pow(2,r+1)-1?0===u?0===o?1/0:-1/0:NaN:(0===o?1:-1)*Math.pow(2,s-i)*u},o=function(t){return 1==n(t,1)?-1*(n(t,15,1,!0)+1):n(t,15,1)},s=function(t){return 1==n(t,1)?-1*(n(t,31,1,!0)+1):n(t,31,1)},a=function(t){return i(t,23,8)},u=function(t){return i(t,52,11)},c=function(t){var e=n(t,16,32);if(49152==e)return NaN;for(var r=Math.pow(1e4,n(t,16,16)),i=0,o=n(t,16),s=0;s<o;s++)i+=n(t,16,64+16*s)*r,r/=1e4;var a=Math.pow(10,n(t,16,48));return(0===e?1:-1)*Math.round(i*a)/a},l=function(t,e){var r=n(e,1),i=n(e,63,1),o=new Date((0===r?1:-1)*i/1e3+9466848e5);return t||o.setTime(o.getTime()+6e4*o.getTimezoneOffset()),o.usec=i%1e3,o.getMicroSeconds=function(){return this.usec},o.setMicroSeconds=function(t){this.usec=t},o.getUTCMicroSeconds=function(){return this.usec},o},f=function(t){for(var e=n(t,32),r=(n(t,32,32),n(t,32,64)),i=96,o=[],s=0;s<e;s++)o[s]=n(t,32,i),i+=32,i+=32;var a=function(e){var r=n(t,32,i);if(i+=32,4294967295==r)return null;var o;return 23==e||20==e?(o=n(t,8*r,i),i+=8*r,o):25==e?o=t.toString(this.encoding,i>>3,(i+=r<<3)>>3):void console.log("ERROR: ElementType not implemented: "+e)},u=function(t,e){var r,n=[];if(t.length>1){var i=t.shift();for(r=0;r<i;r++)n[r]=u(t,e);t.unshift(i)}else for(r=0;r<t[0];r++)n[r]=a(e);return n};return u(o,r)},p=function(t){return t.toString("utf8")},h=function(t){return null===t?null:n(t,8)>0};e.exports={init:function(t){t(21,o),t(23,s),t(26,s),t(1700,c),t(700,a),t(701,u),t(16,h),t(1114,l.bind(null,!1)),t(1184,l.bind(null,!0)),t(1e3,f),t(1007,f),t(1016,f),t(1008,f),t(1009,f),t(25,p)}}},{}],60:[function(t,e,r){function n(t){return function(e){return null===e?e:t(e)}}function i(t){return null===t?t:"TRUE"===t||"t"===t||"true"===t||"y"===t||"yes"===t||"on"===t||"1"===t}function o(t){return t?u.parse(t,i):null}function s(t){return t?u.parse(t,n(c.partialRight(parseInt,10))):null}function a(t){return t?u.parse(t,n(function(t){return w(t).trim()})):null}var u=t("postgres-array"),c=t("ap"),l=t("./arrayParser"),f=t("postgres-date"),p=t("postgres-interval"),h=t("postgres-bytea"),d=function(t){return t?l.create(t,function(t){return null!==t&&(t=j(t)),t}).parse():null},y=function(t){return t?l.create(t,function(t){return null!==t&&(t=parseFloat(t)),t}).parse():null},m=function(t){return t?l.create(t).parse():null},v=function(t){return t?l.create(t,function(t){return null!==t&&(t=f(t)),t}).parse():null},g=function(t){var e=m(t);return e?e.map(function(t){return h(t)}):e},b=function(t){return parseInt(t,10)},w=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},_=function(t){var e=m(t);return e?e.map(function(t){return JSON.parse(t)}):e},j=function(t){return"("!==t[0]?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},x=function(t){if("<"!==t[0]&&"("!==t[1])return null;for(var e="(",r="",n=!1,i=2;i<t.length-1;i++)n||(e+=t[i]),")"!==t[i]?n&&","!==t[i]&&(r+=t[i]):n=!0;var o=j(e);return o.radius=parseFloat(r),o};e.exports={init:function(t){t(20,w),t(21,b),t(23,b),t(26,b),t(700,parseFloat),t(701,parseFloat),t(16,i),t(1082,f),t(1114,f),t(1184,f),t(600,j),t(651,m),t(718,x),t(1e3,o),t(1001,g),t(1005,s),t(1007,s),t(1028,s),t(1016,a),t(1017,d),t(1021,y),t(1022,y),t(1231,y),t(1014,m),t(1015,m),t(1008,m),t(1009,m),t(1040,m),t(1041,m),t(1115,v),t(1182,v),t(1185,v),t(1186,p),t(17,h),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,_),t(3807,_),t(3907,m),t(2951,m),t(791,m),t(1183,m),t(1270,m)}}},{"./arrayParser":58,ap:3,"postgres-array":73,"postgres-bytea":74,"postgres-date":75,"postgres-interval":76}],61:[function(t,e,r){var n=t("crypto"),i=t("events").EventEmitter,o=t("util"),s=t("pgpass"),a=t("./type-overrides"),u=t("./connection-parameters"),c=t("./utils"),l=t("./query"),f=t("./defaults"),p=t("./connection"),h=function(t){i.call(this),this.connectionParameters=new u(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,this.password=this.connectionParameters.password,this.replication=this.connectionParameters.replication;var e=t||{};this._types=new a(e.types),this._ending=!1,this._connecting=!1,this._connectionError=!1,this.connection=e.connection||new p({stream:e.stream,ssl:this.connectionParameters.ssl,keepAlive:e.keepAlive||!1,client_encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=e.binary||f.binary,this.encoding=this.connectionParameters.client_encoding||"utf8",this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1};o.inherits(h,i),h.prototype.connect=function(t){function e(t){return function(e){null!==r.password?t(e):s(r.connectionParameters,function(n){void 0!==n&&(r.connectionParameters.password=r.password=n),t(e)})}}var r=this,n=this.connection;this._connecting=!0,this.host&&0===this.host.indexOf("/")?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),n.on("authenticationCleartextPassword",e(function(){n.password(r.password)})),n.on("authenticationMD5Password",e(function(t){var e=h.md5(r.password+r.user),i="md5"+h.md5(Buffer.concat([new Buffer(e),t.salt]));n.password(i)})),n.once("backendKeyData",function(t){r.processID=t.processID,r.secretKey=t.secretKey}),n.once("readyForQuery",function(){r._connecting=!1,n.on("rowDescription",function(t){r.activeQuery.handleRowDescription(t)}),n.on("dataRow",function(t){r.activeQuery.handleDataRow(t)}),n.on("portalSuspended",function(t){r.activeQuery.handlePortalSuspended(n)}),n.on("emptyQuery",function(t){r.activeQuery.handleEmptyQuery(n)}),n.on("commandComplete",function(t){r.activeQuery.handleCommandComplete(t,n)}),n.on("parseComplete",function(t){r.activeQuery.name&&(n.parsedStatements[r.activeQuery.name]=!0)}),n.on("copyInResponse",function(t){r.activeQuery.handleCopyInResponse(r.connection)}),n.on("copyData",function(t){r.activeQuery.handleCopyData(t,r.connection)}),n.on("notification",function(t){r.emit("notification",t)}),t&&(t(null,r),t=null),r.emit("connect")}),n.on("readyForQuery",function(){var t=r.activeQuery;r.activeQuery=null,r.readyForQuery=!0,r._pulseQueryQueue(),t&&t.handleReadyForQuery(n)}),n.on("error",function(e){if(this.activeQuery){var i=r.activeQuery;return this.activeQuery=null,i.handleError(e,n)}if(this._connecting&&(this._connectionError=!0),!t)return this.emit("error",e);n.end(),t(e),t=null}.bind(this)),n.once("end",function(){if(t){var e=new Error("Connection terminated");return t(e),void(t=null)}if(this.activeQuery){var r=new Error("Connection terminated");this.activeQuery.handleError(r,n),this.activeQuery=null}this._ending||this._connectionError||this.emit("error",new Error("Connection terminated unexpectedly")),this.emit("end")}.bind(this)),n.on("notice",function(t){r.emit("notice",t)})},h.prototype.getStartupConf=function(){var t=this.connectionParameters,e={user:t.user,database:t.database},r=t.application_name||t.fallback_application_name;return r&&(e.application_name=r),t.replication&&(e.replication=""+t.replication),e},h.prototype.cancel=function(t,e){if(t.activeQuery==e){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",function(){r.cancel(t.processID,t.secretKey)})}else-1!=t.queryQueue.indexOf(e)&&t.queryQueue.splice(t.queryQueue.indexOf(e),1)},h.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)},h.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)},h.prototype.escapeIdentifier=function(t){for(var e='"',r=0;r<t.length;r++){var n=t[r];e+='"'===n?n+n:n}return e+='"'},h.prototype.escapeLiteral=function(t){for(var e=!1,r="'",n=0;n<t.length;n++){var i=t[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,e=!0):r+=i}return r+="'",!0===e&&(r=" E"+r),r},h.prototype._pulseQueryQueue=function(){!0===this.readyForQuery&&(this.activeQuery=this.queryQueue.shift(),this.activeQuery?(this.readyForQuery=!1,this.hasExecuted=!0,this.activeQuery.submit(this.connection)):this.hasExecuted&&(this.activeQuery=null,this.emit("drain")))},h.prototype.copyFrom=function(t){throw new Error("For PostgreSQL COPY TO/COPY FROM support npm install pg-copy-streams")},h.prototype.copyTo=function(t){throw new Error("For PostgreSQL COPY TO/COPY FROM support npm install pg-copy-streams")};var d=c.deprecateEventEmitter(l);h.prototype.query=function(t,e,r){var n="function"==typeof t.submit?t:new d(t,e,r);return this.binary&&!n.binary&&(n.binary=!0),n._result&&(n._result._getTypeParser=this._types.getTypeParser.bind(this._types)),this.queryQueue.push(n),this._pulseQueryQueue(),n},h.prototype.end=function(t){this._ending=!0,this.connection.end(),t&&this.connection.once("end",t)},h.md5=function(t){return n.createHash("md5").update(t,"utf-8").digest("hex")},h.Query=l,e.exports=h},{"./connection":63,"./connection-parameters":62,"./defaults":64,"./query":67,"./type-overrides":69,"./utils":70,crypto:void 0,events:void 0,pgpass:72,util:void 0}],62:[function(t,e,r){t("url");var n=t("dns"),i=t("./defaults"),o=function(t,e,r){return void 0===r?r=process.env["PG"+t.toUpperCase()]:!1===r||(r=process.env[r]),e[t]||r||i[t]},s=t("pg-connection-string").parse,a=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0}return i.ssl},u=function(t){(t="string"==typeof t?s(t):t||{}).connectionString&&(t=s(t.connectionString)),this.user=o("user",t),this.database=o("database",t),this.port=parseInt(o("port",t),10),this.host=o("host",t),this.password=o("password",t),this.binary=o("binary",t),this.ssl=void 0===t.ssl?a():t.ssl,this.client_encoding=o("client_encoding",t),this.replication=o("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",t,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",t,!1)},c=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},l=function(t,e,r){var n=e[r];n&&t.push(r+"="+c(n))};u.prototype.getLibpqConnectionString=function(t){var e=[];l(e,this,"user"),l(e,this,"password"),l(e,this,"port"),l(e,this,"application_name"),l(e,this,"fallback_application_name");var r="object"==typeof this.ssl?this.ssl:{sslmode:this.ssl};if(l(e,r,"sslmode"),l(e,r,"sslca"),l(e,r,"sslkey"),l(e,r,"sslcert"),this.database&&e.push("dbname="+c(this.database)),this.replication&&e.push("replication="+c(this.replication)),this.host&&e.push("host="+c(this.host)),this.isDomainSocket)return t(null,e.join(" "));this.client_encoding&&e.push("client_encoding="+c(this.client_encoding)),n.lookup(this.host,function(r,n){return r?t(r,null):(e.push("hostaddr="+c(n)),t(null,e.join(" ")))})},e.exports=u},{"./defaults":64,dns:void 0,"pg-connection-string":13,url:void 0}],63:[function(t,e,r){var n=t("net"),i=t("events").EventEmitter,o=t("util"),s=t("buffer-writer"),a=t("packet-reader"),u="indexOf"in Buffer.prototype?function(t,e,r){return t.indexOf(e,r)}:function(t,e,r){for(var n=r,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},c=function(t){i.call(this),t=t||{},this.stream=t.stream||new n.Stream,this._keepAlive=t.keepAlive,this.lastBuffer=!1,this.lastOffset=0,this.buffer=null,this.offset=null,this.encoding=t.client_encoding||"utf8",this.parsedStatements={},this.writer=new s,this.ssl=t.ssl||!1,this._ending=!1,this._mode=0,this._emitMessage=!1,this._reader=new a({headerSize:1,lengthPadding:-4});var e=this;this.on("newListener",function(t){"message"==t&&(e._emitMessage=!0)})};o.inherits(c,i),c.prototype.connect=function(e,r){"closed"===this.stream.readyState?this.stream.connect(e,r):"open"==this.stream.readyState&&this.emit("connect");var n=this;if(this.stream.on("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0),n.emit("connect")}),this.stream.on("error",function(t){n._ending&&"ECONNRESET"==t.code||n.emit("error",t)}),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(e){if("S"!=e.toString("utf8"))return n.emit("error",new Error("The server does not support SSL connections"));var i=t("tls");n.stream=i.connect({socket:n.stream,servername:r,rejectUnauthorized:n.ssl.rejectUnauthorized,ca:n.ssl.ca,pfx:n.ssl.pfx,key:n.ssl.key,passphrase:n.ssl.passphrase,cert:n.ssl.cert,NPNProtocols:n.ssl.NPNProtocols}),n.attachListeners(n.stream),n.emit("sslconnect"),n.stream.on("error",function(t){n.emit("error",t)})})},c.prototype.attachListeners=function(t){var e=this;t.on("data",function(t){e._reader.addChunk(t);for(var r=e._reader.read();r;){var n=e.parseMessage(r);e._emitMessage&&e.emit("message",n),e.emit(n.name,n),r=e._reader.read()}}),t.on("end",function(){e.emit("end")})},c.prototype.requestSsl=function(){var t=this.writer.addInt16(1234).addInt16(5679).flush(),e=t.length+4,r=(new s).addInt32(e).add(t).join();this.stream.write(r)},c.prototype.startup=function(t){var e=this.writer.addInt16(3).addInt16(0);Object.keys(t).forEach(function(r){var n=t[r];e.addCString(r).addCString(n)}),e.addCString("client_encoding").addCString("'utf-8'");var r=e.addCString("").flush(),n=r.length+4,i=(new s).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.cancel=function(t,e){var r=this.writer.addInt16(1234).addInt16(5678).addInt32(t).addInt32(e).flush(),n=r.length+4,i=(new s).addInt32(n).add(r).join();this.stream.write(i)},c.prototype.password=function(t){this._send(112,this.writer.addCString(t))},c.prototype._send=function(t,e){return!!this.stream.writable&&(!0!==e?this.stream.write(this.writer.flush(t)):void this.writer.addHeader(t))},c.prototype.query=function(t){this.stream.write(this.writer.addCString(t).flush(81))},c.prototype.parse=function(t,e){t.name=t.name||"",t.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied",t.name,"(",t.name.length,")"),console.error("This can cause conflicts and silent errors executing queries")),t.types=t.types||[];for(var r=t.types.length,n=this.writer.addCString(t.name).addCString(t.text).addInt16(r),i=0;i<r;i++)n.addInt32(t.types[i]);this._send(80,e)},c.prototype.bind=function(t,e){(t=t||{}).portal=t.portal||"",t.statement=t.statement||"",t.binary=t.binary||!1;for(var r=t.values||[],n=r.length,i=!1,o=0;o<n;o++)i|=r[o]instanceof Buffer;var s=this.writer.addCString(t.portal).addCString(t.statement);if(i)for(s.addInt16(n),o=0;o<n;o++)s.addInt16(r[o]instanceof Buffer);else s.addInt16(0);s.addInt16(n);for(var a=0;a<n;a++){var u=r[a];null===u||void 0===u?s.addInt32(-1):u instanceof Buffer?(s.addInt32(u.length),s.add(u)):(s.addInt32(Buffer.byteLength(u)),s.addString(u))}t.binary?(s.addInt16(1),s.addInt16(1)):s.addInt16(0),this._send(66,e)},c.prototype.execute=function(t,e){(t=t||{}).portal=t.portal||"",t.rows=t.rows||"",this.writer.addCString(t.portal).addInt32(t.rows),this._send(69,e)};var l=Buffer(0);c.prototype.flush=function(){this.writer.add(l),this._send(72)},c.prototype.sync=function(){this.writer.flush(0),this.writer.add(l),this._ending=!0,this._send(83)},c.prototype.end=function(){this.writer.add(l),this._ending=!0,this._send(88)},c.prototype.close=function(t,e){this.writer.addCString(t.type+(t.name||"")),this._send(67,e)},c.prototype.describe=function(t,e){this.writer.addCString(t.type+(t.name||"")),this._send(68,e)},c.prototype.sendCopyFromChunk=function(t){this.stream.write(this.writer.add(t).flush(100))},c.prototype.endCopyFrom=function(){this.stream.write(this.writer.add(l).flush(99))},c.prototype.sendCopyFail=function(t){this.writer.addCString(t),this._send(102)};var f=function(t,e){this.name=t,this.length=e};c.prototype.parseMessage=function(t){this.offset=0;var e=t.length+4;switch(this._reader.header){case 82:return this.parseR(t,e);case 83:return this.parseS(t,e);case 75:return this.parseK(t,e);case 67:return this.parseC(t,e);case 90:return this.parseZ(t,e);case 84:return this.parseT(t,e);case 68:return this.parseD(t,e);case 69:return this.parseE(t,e);case 78:return this.parseN(t,e);case 49:return new f("parseComplete",e);case 50:return new f("bindComplete",e);case 51:return new f("closeComplete",e);case 65:return this.parseA(t,e);case 110:return new f("noData",e);case 73:return new f("emptyQuery",e);case 115:return new f("portalSuspended",e);case 71:return this.parseG(t,e);case 72:return this.parseH(t,e);case 87:return new f("replicationStart",e);case 99:return new f("copyDone",e);case 100:return this.parsed(t,e)}},c.prototype.parseR=function(t,e){var r=new f("authenticationOk",e);if(8===r.length)return 3===this.parseInt32(t)&&(r.name="authenticationCleartextPassword"),r;if(12===r.length&&5===this.parseInt32(t))return r.name="authenticationMD5Password",r.salt=new Buffer(4),t.copy(r.salt,0,this.offset,this.offset+4),this.offset+=4,r;throw new Error("Unknown authenticationOk message type"+o.inspect(r))},c.prototype.parseS=function(t,e){var r=new f("parameterStatus",e);return r.parameterName=this.parseCString(t),r.parameterValue=this.parseCString(t),r},c.prototype.parseK=function(t,e){var r=new f("backendKeyData",e);return r.processID=this.parseInt32(t),r.secretKey=this.parseInt32(t),r},c.prototype.parseC=function(t,e){var r=new f("commandComplete",e);return r.text=this.parseCString(t),r},c.prototype.parseZ=function(t,e){var r=new f("readyForQuery",e);return r.name="readyForQuery",r.status=this.readString(t,1),r};c.prototype.parseT=function(t,e){var r=new f("rowDescription",e);r.fieldCount=this.parseInt16(t);for(var n=[],i=0;i<r.fieldCount;i++)n.push(this.parseField(t));return r.fields=n,r};var p=function(){this.name=null,this.tableID=null,this.columnID=null,this.dataTypeID=null,this.dataTypeSize=null,this.dataTypeModifier=null,this.format=null};c.prototype.parseField=function(t){var e=new p;return e.name=this.parseCString(t),e.tableID=this.parseInt32(t),e.columnID=this.parseInt16(t),e.dataTypeID=this.parseInt32(t),e.dataTypeSize=this.parseInt16(t),e.dataTypeModifier=this.parseInt32(t),0===this.parseInt16(t)?(this._mode=0,e.format="text"):(this._mode=1,e.format="binary"),e};var h=function(t,e){this.name="dataRow",this.length=t,this.fieldCount=e,this.fields=[]};c.prototype.parseD=function(t,e){for(var r=this.parseInt16(t),n=new h(e,r),i=0;i<r;i++)n.fields.push(this._readValue(t));return n},c.prototype._readValue=function(t){var e=this.parseInt32(t);return-1===e?null:0===this._mode?this.readString(t,e):this.readBytes(t,e)},c.prototype.parseE=function(t,e){for(var r,n,i={},o=new f("error",e),s=this.readString(t,1);"\0"!=s;)i[s]=this.parseCString(t),s=this.readString(t,1);if("error"===o.name){r=new Error(i.M);for(n in o)o.hasOwnProperty(n)&&(r[n]=o[n])}else(r=o).message=i.M;return r.severity=i.S,r.code=i.C,r.detail=i.D,r.hint=i.H,r.position=i.P,r.internalPosition=i.p,r.internalQuery=i.q,r.where=i.W,r.schema=i.s,r.table=i.t,r.column=i.c,r.dataType=i.d,r.constraint=i.n,r.file=i.F,r.line=i.L,r.routine=i.R,r},c.prototype.parseN=function(t,e){var r=this.parseE(t,e);return r.name="notice",r},c.prototype.parseA=function(t,e){var r=new f("notification",e);return r.processId=this.parseInt32(t),r.channel=this.parseCString(t),r.payload=this.parseCString(t),r},c.prototype.parseG=function(t,e){var r=new f("copyInResponse",e);return this.parseGH(t,r)},c.prototype.parseH=function(t,e){var r=new f("copyOutResponse",e);return this.parseGH(t,r)},c.prototype.parseGH=function(t,e){var r=0!==t[this.offset];this.offset++,e.binary=r;var n=this.parseInt16(t);e.columnTypes=[];for(var i=0;i<n;i++)e.columnTypes.push(this.parseInt16(t));return e},c.prototype.parsed=function(t,e){var r=new f("copyData",e);return r.chunk=this.readBytes(t,r.length-4),r},c.prototype.parseInt32=function(t){var e=t.readInt32BE(this.offset,!0);return this.offset+=4,e},c.prototype.parseInt16=function(t){var e=t.readInt16BE(this.offset,!0);return this.offset+=2,e},c.prototype.readString=function(t,e){return t.toString(this.encoding,this.offset,this.offset+=e)},c.prototype.readBytes=function(t,e){return t.slice(this.offset,this.offset+=e)},c.prototype.parseCString=function(t){var e=this.offset,r=u(t,0,e);return this.offset=r+1,t.toString(this.encoding,e,r)},e.exports=c},{"buffer-writer":4,events:void 0,net:void 0,"packet-reader":12,tls:void 0,util:void 0}],64:[function(t,e,r){e.exports={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:"win32"===process.platform?process.env.USERNAME:process.env.USER,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,poolSize:10,poolIdleTimeout:3e4,reapIntervalMillis:1e3,returnToHead:!1,poolLog:!1,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,parseInputDatesAsUTC:!1};var n=t("pg-types"),i=n.getTypeParser(20,"text"),o=n.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(t){n.setTypeParser(20,"text",t?n.getTypeParser(23,"text"):i),n.setTypeParser(1016,"text",t?n.getTypeParser(1007,"text"):o)})},{"pg-types":57}],65:[function(t,e,r){var n=t("events").EventEmitter,i=t("util"),o=t("./client"),s=t("./defaults"),a=t("./connection"),u=t("./connection-parameters"),c=t("./pool-factory"),l=function(e){n.call(this),this.defaults=s,this.Client=e,this.Query=this.Client.Query,this.Pool=c(this.Client),this._pools=[],this.Connection=a,this.types=t("pg-types")};i.inherits(l,n),l.prototype.end=i.deprecate(function(){var t=this,e=Object.keys(this._pools),r=e.length;0===r?t.emit("end"):e.forEach(function(e){var n=t._pools[e];delete t._pools[e],n.pool.drain(function(){n.pool.destroyAllNow(function(){0===--r&&t.emit("end")})})})},"PG.end is deprecated - please see the upgrade guide at https://node-postgres.com/guides/upgrading"),l.prototype.connect=i.deprecate(function(t,e){"function"==typeof t&&(e=t,t=null),"string"==typeof t&&(t=new u(t)),(t=t||{}).max=t.max||t.poolSize||s.poolSize,t.idleTimeoutMillis=t.idleTimeoutMillis||t.poolIdleTimeout||s.poolIdleTimeout,t.log=t.log||t.poolLog||s.poolLog;var r=JSON.stringify(t);this._pools[r]=this._pools[r]||new this.Pool(t);var n=this._pools[r];return n.listeners("error").length||n.on("error",function(t){this.emit("error",t,t.client)}.bind(this)),n.connect(e)},"PG.connect is deprecated - please see the upgrade guide at https://node-postgres.com/guides/upgrading"),l.prototype.cancel=i.deprecate(function(t,e,r){if(e.native)return e.cancel(r);var n=t;"function"==typeof n&&(n=s),new this.Client(n).cancel(e,r)},"PG.cancel is deprecated - use client.cancel instead"),void 0!==process.env.NODE_PG_FORCE_NATIVE||(e.exports=new l(o))},{"./client":61,"./connection":63,"./connection-parameters":62,"./defaults":64,"./pool-factory":66,events:void 0,"pg-types":57,util:void 0}],66:[function(t,e,r){t("./client");var n=t("util"),i=t("pg-pool");e.exports=function(t){var e=function(e){var r={Client:t};for(var n in e)r[n]=e[n];i.call(this,r)};return n.inherits(e,i),e}},{"./client":61,"pg-pool":17,util:void 0}],67:[function(t,e,r){var n=t("events").EventEmitter,i=t("util"),o=t("./result"),s=t("./utils"),a=function(t,e,r){if(!(this instanceof a))return new a(t,e,r);t=s.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.binary=t.binary,this.stream=t.stream,this.portal=t.portal||"",this.callback=t.callback,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new o(t.rowMode,t.types),this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null,n.call(this)};i.inherits(a,n),a._on=a.on,a._once=a.once,a.prototype.then=function(t,e){return this._getPromise().then(t,e)},a.prototype.catch=function(t){return this._getPromise().catch(t)},a.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){var r=function(e){this.removeListener("error",n),this.removeListener("end",r),t(e)},n=function(t){this.removeListener("error",n),this.removeListener("end",r),e(t)};this._on("end",r),this._on("error",n)}.bind(this)),this._promise)},a.prototype.promise=i.deprecate(function(){return this._getPromise()},"Query.promise() is deprecated - see the upgrade guide at https://node-postgres.com/guides/upgrading"),a.prototype.requiresPreparation=function(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))},a.prototype.handleRowDescription=function(t){this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length},a.prototype.handleDataRow=function(t){var e;if(!this._canceledDueToError){try{e=this._result.parseRow(t.fields)}catch(t){return void(this._canceledDueToError=t)}this.emit("row",e,this._result),this._accumulateRows&&this._result.addRow(e)}},a.prototype.handleCommandComplete=function(t,e){this._result.addCommandComplete(t),this.isPreparedStatement&&e.sync()},a.prototype.handleEmptyQuery=function(t){this.isPreparedStatement&&t.sync()},a.prototype.handleReadyForQuery=function(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);this.callback&&this.callback(null,this._result),this.emit("end",this._result)},a.prototype.handleError=function(t,e){if(this.isPreparedStatement&&e.sync(),this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)},a.prototype.submit=function(t){this.requiresPreparation()?this.prepare(t):t.query(this.text)},a.prototype.hasBeenParsed=function(t){return this.name&&t.parsedStatements[this.name]},a.prototype.handlePortalSuspended=function(t){this._getRows(t,this.rows)},a.prototype._getRows=function(t,e){t.execute({portal:this.portalName,rows:e},!0),t.flush()},a.prototype.prepare=function(t){var e=this;this.isPreparedStatement=!0,this.hasBeenParsed(t)||t.parse({text:e.text,name:e.name,types:e.types},!0),e.values&&(e.values=e.values.map(s.prepareValue)),t.bind({portal:e.portalName,statement:e.name,values:e.values,binary:e.binary},!0),t.describe({type:"P",name:e.portalName||""},!0),this._getRows(t,this.rows)},a.prototype.handleCopyInResponse=function(t){this.stream?this.stream.startStreamingToConnection(t):t.sendCopyFail("No source stream defined")},a.prototype.handleCopyData=function(t,e){var r=t.chunk;this.stream&&this.stream.handleChunk(r)},e.exports=a},{"./result":68,"./utils":70,events:void 0,util:void 0}],68:[function(t,e,r){var n=t("pg-types"),i=function(t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=[],this.RowCtor=null,this.rowAsArray="array"==t,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)},o=/([A-Za-z]+) ?(\d+ )?(\d+)?/;i.prototype.addCommandComplete=function(t){var e;(e=t.text?o.exec(t.text):o.exec(t.command))&&(this.command=e[1],e[3]?(this.rowCount=parseInt(e[3]||t.value,10),this.oid=parseInt(e[2],10)):this.rowCount=parseInt(e[2],10))},i.prototype._parseRowAsArray=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];null!==i?e.push(this._parsers[r](i)):e.push(null)}return e},i.prototype.parseRow=function(t){return new this.RowCtor(this._parsers,t)},i.prototype.addRow=function(t){this.rows.push(t)};var s=function(t,e){return"\nthis['"+t.replace(/'/g,"\\'")+"'] = rowData["+e+"] == null ? null : parsers["+e+"](rowData["+e+"]);"};i.prototype.addFields=function(t){this.fields.length&&(this.fields=[],this._parsers=[]);for(var e="",r=0;r<t.length;r++){var n=t[r];this.fields.push(n);var i=this._getTypeParser(n.dataTypeID,n.format||"text");this._parsers.push(i),e+=s(n.name,r)}this.rowAsArray||(this.RowCtor=Function("parsers","rowData",e))},i.prototype._getTypeParser=n.getTypeParser,e.exports=i},{"pg-types":57}],69:[function(t,e,r){function n(t){this._types=t||i,this.text={},this.binary={}}var i=t("pg-types");n.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}},n.prototype.setTypeParser=function(t,e,r){"function"==typeof e&&(r=e,e="text"),this.getOverrides(e)[t]=r},n.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)},e.exports=n},{"pg-types":57}],70:[function(t,e,r){function n(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function i(t){for(var e="{",r=0;r<t.length;r++)r>0&&(e+=","),null===t[r]||void 0===t[r]?e+="NULL":Array.isArray(t[r])?e+=i(t[r]):e+=n(f(t[r]));return e+="}"}function o(t,e){if(t.toPostgres&&"function"==typeof t.toPostgres){if(-1!==(e=e||[]).indexOf(t))throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),f(t.toPostgres(f),e)}return JSON.stringify(t)}function s(t,e){for(t=""+t;t.length<e;)t="0"+t;return t}function a(t){var e=-t.getTimezoneOffset(),r=s(t.getFullYear(),4)+"-"+s(t.getMonth()+1,2)+"-"+s(t.getDate(),2)+"T"+s(t.getHours(),2)+":"+s(t.getMinutes(),2)+":"+s(t.getSeconds(),2)+"."+s(t.getMilliseconds(),3);return e<0?(r+="-",e*=-1):r+="+",r+s(Math.floor(e/60),2)+":"+s(e%60,2)}function u(t){return s(t.getUTCFullYear(),4)+"-"+s(t.getUTCMonth()+1,2)+"-"+s(t.getUTCDate(),2)+"T"+s(t.getUTCHours(),2)+":"+s(t.getUTCMinutes(),2)+":"+s(t.getUTCSeconds(),2)+"."+s(t.getUTCMilliseconds(),3)+"+00:00"}var c=t("util"),l=t("./defaults"),f=function(t,e){return t instanceof Buffer?t:t instanceof Date?l.parseInputDatesAsUTC?u(t):a(t):Array.isArray(t)?i(t):null===t||void 0===t?null:"object"==typeof t?o(t,e):t.toString()},p="Using the automatically created return value from client.query as an event emitter is deprecated and will be removed in pg@7.0. Please see the upgrade guide at https://node-postgres.com/guides/upgrading";e.exports={prepareValue:function(t){return f(t)},normalizeQueryConfig:function(t,e,r){return t="string"==typeof t?{text:t}:t,e&&("function"==typeof e?t.callback=e:t.values=e),r&&(t.callback=r),t},deprecateEventEmitter:function(t){var e=function(){t.apply(this,arguments)};return c.inherits(e,t),e.prototype._on=e.prototype.on,e.prototype._once=e.prototype.once,e.prototype.on=c.deprecate(e.prototype.on,p),e.prototype.once=c.deprecate(e.prototype.once,p),e}}},{"./defaults":64,util:void 0}],71:[function(t,e,r){"use strict";function n(t){return(t&f)==p}function i(){if(l instanceof s&&!0===l.writable){var t=Array.prototype.slice.call(arguments).concat("\n");l.write(u.format.apply(u,t))}}var o=t("path"),s=t("stream").Stream,a=t("split"),u=t("util"),c="win32"===process.platform,l=process.stderr,f=61440,p=32768,h=["host","port","database","user","password"],d=h.length,y=h[d-1];Object.defineProperty(e.exports,"isWin",{get:function(){return c},set:function(t){c=t}}),e.exports.warnTo=function(t){var e=l;return l=t,e},e.exports.getFileName=function(t){return(t=t||process.env).PGPASSFILE||(c?o.join(t.APPDATA,"postgresql","pgpass.conf"):o.join(t.HOME,".pgpass"))},e.exports.usePgPass=function(t,e){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!c||(e=e||"<unkn>",n(t.mode)?!(63&t.mode)||(i('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):(i('WARNING: password file "%s" is not a plain file',e),!1)))};var m=e.exports.match=function(t,e){return h.slice(0,-1).reduce(function(r,n,i){return 1==i&&Number(t[n]||5432)===Number(e[n])?r&&!0:r&&("*"===e[n]||e[n]===t[n])},!0)};e.exports.getPassword=function(t,e,r){var n,o=e.pipe(new a),s=function(t){e.destroy(),i("WARNING: error on reading file: %s",t),r(void 0)};e.on("error",s),o.on("data",function(e){var r=v(e);r&&g(r)&&m(t,r)&&(n=r[y],o.end())}).on("end",function(){e.destroy(),r(n)}).on("error",s)};var v=e.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,i=0,o={},s=function(e,r,n){var i=t.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(i=i.replace(/\\([:\\])/g,"$1")),o[h[e]]=i},a=0;a<t.length-1;a+=1){if(e=t.charAt(a+1),r=t.charAt(a),n==d-1){s(n,i);break}a>=0&&":"==e&&"\\"!==r&&(s(n,i,a+1),i=a+2,n+=1)}return o=Object.keys(o).length===d?o:null},g=e.exports.isValidEntry=function(t){for(var e={0:function(t){return t.length>0},1:function(t){return"*"===t||(t=Number(t),isFinite(t)&&t>0&&t<9007199254740992&&Math.floor(t)===t)},2:function(t){return t.length>0},3:function(t){return t.length>0},4:function(t){return t.length>0}},r=0;r<h.length;r+=1)if(!(0,e[r])(t[h[r]]||""))return!1;return!0}},{path:void 0,split:90,stream:void 0,util:void 0}],72:[function(t,e,r){"use strict";t("path");var n=t("fs"),i=t("./helper.js");e.exports=function(t,e){var r=i.getFileName();n.stat(r,function(o,s){if(o||!i.usePgPass(s,r))return e(void 0);var a=n.createReadStream(r);i.getPassword(t,a,e)})},e.exports.warnTo=i.warnTo},{"./helper.js":71,fs:void 0,path:void 0}],73:[function(t,e,r){"use strict";function n(t,e){this.source=t,this.transform=e||i,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}function i(t){return t}r.parse=function(t,e){return new n(t,e).parse()},n.prototype.isEof=function(){return this.position>=this.source.length},n.prototype.nextCharacter=function(){var t=this.source[this.position++];return"\\"===t?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}},n.prototype.record=function(t){this.recorded.push(t)},n.prototype.newEntry=function(t){var e;(this.recorded.length>0||t)&&("NULL"!==(e=this.recorded.join(""))||t||(e=null),null!==e&&(e=this.transform(e)),this.entries.push(e),this.recorded=[])},n.prototype.parse=function(t){for(var e,r,i;!this.isEof();)if("{"!==(e=this.nextCharacter()).value||i){if("}"!==e.value||i)'"'!==e.value||e.escaped?","!==e.value||i?this.record(e.value):this.newEntry():(i&&this.newEntry(!0),i=!i);else if(!--this.dimension&&(this.newEntry(),t))return this.entries}else++this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}},{}],74:[function(t,e,r){"use strict";e.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var e="",r=0;r<t.length;)if("\\"!==t[r])e+=t[r],++r;else if(/[0-7]{3}/.test(t.substr(r+1,3)))e+=String.fromCharCode(parseInt(t.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<t.length&&"\\"===t[r+n];)n++;for(var i=0;i<Math.floor(n/2);++i)e+="\\";r+=2*Math.floor(n/2)}return new Buffer(e,"binary")}},{}],75:[function(t,e,r){"use strict";function n(t){var e=s.exec(t),r=parseInt(e[1],10),n=parseInt(e[2],10)-1,i=e[3],o=new Date(r,n,i);return o.setFullYear(r),o}function i(t){var e=a.exec(t.split(" ")[1]);if(e){var r=e[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(e[2],10)+60*parseInt(e[3]||0,10)+parseInt(e[4]||0,10))*n*1e3}}var o=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?/,s=/^(\d{1,})-(\d{2})-(\d{2})$/,a=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,u=/BC$/,c=/^-?infinity$/;e.exports=function(t){if(c.test(t))return Number(t.replace("i","I"));var e=o.exec(t);if(!e)return s.test(t)?n(t):null;var r=u.test(t),a=parseInt(e[1],10),l=a>0&&a<100;a=(r?"-":"")+a;var f=parseInt(e[2],10)-1,p=e[3],h=parseInt(e[4],10),d=parseInt(e[5],10),y=parseInt(e[6],10),m=e[7];m=m?1e3*parseFloat(m):0;var v,g=i(t);if(null!=g){var b=Date.UTC(a,f,p,h,d,y,m);v=new Date(b-g)}else v=new Date(a,f,p,h,d,y,m);return l&&v.setUTCFullYear(a),v}},{}],76:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);s(this,o(t))}function i(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function o(t){if(!t)return{};var e=f.exec(t),r="-"===e[8];return Object.keys(p).reduce(function(t,n){var o=p[n],s=e[o];return s&&(s="milliseconds"===n?i(s):parseInt(s,10))?(r&&~h.indexOf(n)&&(s*=-1),t[n]=s,t):t},{})}var s=t("xtend/mutable");e.exports=n;var a=["seconds","minutes","hours","days","months","years"];n.prototype.toPostgres=function(){var t=a.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),0===t.length?"0":t.map(function(t){var e=this[t]||0;return"seconds"===t&&this.milliseconds&&(e+="."+String(1e3*this.milliseconds).replace(/[0]+$/g,"")),e+" "+t},this).join(" ")};var u={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},c=["years","months","days"],l=["hours","minutes","seconds"];n.prototype.toISO=function(){function t(t){var e=this[t]||0;return"seconds"===t&&this.milliseconds&&(e+="."+String(1e3*this.milliseconds).replace(/[0]+$/g,"")),e+u[t]}return"P"+c.map(t,this).join("")+"T"+l.map(t,this).join("")};var f=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d).?(\\d{1,6})?"].map(function(t){return"("+t+")?"}).join("\\s*")),p={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},h=["hours","minutes","seconds"]},{"xtend/mutable":92}],77:[function(t,e,r){"use strict";function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);if(this.create=t,this.resolve=e,this.reject=r,"function"!=typeof t)throw new TypeError("Adapter requires a function to create a promise.");if("function"!=typeof e)throw new TypeError("Adapter requires a function to resolve a promise.");if("function"!=typeof r)throw new TypeError("Adapter requires a function to reject a promise.")}e.exports=n},{}],78:[function(t,e,r){"use strict";function n(t,e,r){this.data=t,this.getErrors=function(){for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=t[e[o]].result,r[o]instanceof n&&(r[o]=r[o].getErrors());return i.utils.extend(r,"$isErrorList",!0),r};for(var o=this.getErrors(),s=o[0];s&&s.$isErrorList;)s=s[0];this.first=s,s instanceof Error?this.message=s.message:("string"!=typeof s&&(s=i.u.inspect(s)),this.message=s),this.stat={total:t.length,succeeded:t.length-o.length,failed:o.length,duration:r},Error.captureStackTrace(this,n)}var i={u:t("util"),os:t("os"),utils:t("../utils/static")};i.u.inherits(n,Error),n.prototype.name="BatchError",n.prototype.toString=function(t){t=t>0?parseInt(t):0;var e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=i.utils.messageGap(t+2),o=["BatchError {",r+"stat: { total: "+this.stat.total+", succeeded: "+this.stat.succeeded+", failed: "+this.stat.failed+", duration: "+this.stat.duration+" }",r+"errors: ["],s=0;return this.data.forEach(function(e,r){!e.success&&s<5&&(o.push(n+r+": "+i.utils.formatError(e.result,t+2)),s++)}),o.push(r+"]"),o.push(e+"}"),o.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils/static":89,os:void 0,util:void 0}],79:[function(t,e,r){"use strict";var n={BatchError:t("./batch"),PageError:t("./page"),SequenceError:t("./sequence")};e.exports={BatchError:n.BatchError,PageError:n.PageError,SequenceError:n.SequenceError},Object.freeze(e.exports)},{"./batch":78,"./page":80,"./sequence":81}],80:[function(t,e,r){"use strict";function n(t,e,r,s){this.index=t.index,this.duration=s,this.error=t.error,"source"in t&&(this.source=t.source),"dest"in t&&(this.dest=t.dest),this.error instanceof Error?this.message=this.error.message:(this.message=this.error,"string"!=typeof this.message&&(this.message=i.u.inspect(this.message))),e?(r=r?"'"+r+"'":"<anonymous>",this.reason=i.u.format(o[e],r,t.index)):this.reason=i.u.format(o[e],t.index),Error.captureStackTrace(this,n)}var i={u:t("util"),os:t("os"),utils:t("../utils/static")},o={0:"Page with index %d rejected.",1:"Source %s returned a rejection at index %d.",2:"Source %s threw an error at index %d.",3:"Destination %s returned a rejection at index %d.",4:"Destination %s threw an error at index %d.",5:"Source %s returned a non-array value at index %d."};i.u.inherits(n,Error),n.prototype.name="PageError",n.prototype.toString=function(t){t=t>0?parseInt(t):0;var e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=["PageError {",r+"message: "+JSON.stringify(this.message),r+"reason: "+this.reason,r+"index: "+this.index,r+"duration: "+this.duration];return n.push(r+"error: "+i.utils.formatError(this.error,t+1)),n.push(e+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils/static":89,os:void 0,util:void 0}],81:[function(t,e,r){"use strict";function n(t,e,r,s){this.index=t.index,this.duration=s,this.error=t.error,this.error instanceof Error?this.message=this.error.message:(this.message=this.error,"string"!=typeof this.message&&(this.message=i.u.inspect(this.message))),"source"in t?this.source=t.source:this.dest=t.dest,r=r?"'"+r+"'":"<anonymous>",this.reason=i.u.format(o[e],r,t.index),Error.captureStackTrace(this,n)}var i={u:t("util"),os:t("os"),utils:t("../utils/static")},o={0:"Source %s returned a rejection at index %d.",1:"Source %s threw an error at index %d.",2:"Destination %s returned a rejection at index %d.",3:"Destination %s threw an error at index %d."};i.u.inherits(n,Error),n.prototype.name="SequenceError",n.prototype.toString=function(t){t=t>0?parseInt(t):0;var e=i.utils.messageGap(t),r=i.utils.messageGap(t+1),n=["SequenceError {",r+"message: "+JSON.stringify(this.message),r+"reason: "+this.reason,r+"index: "+this.index,r+"duration: "+this.duration];return n.push(r+"error: "+i.utils.formatError(this.error,t+1)),n.push(e+"}"),n.join(i.os.EOL)},n.prototype.inspect=function(){return this.toString()},e.exports=n},{"../utils/static":89,os:void 0,util:void 0}],82:[function(t,e,r){"use strict";function n(t,e,r){var n=r.promise,o=r.utils;if(!Array.isArray(t))return n.reject(new TypeError("Method 'batch' requires an array of values."));if(!t.length){var s=[];return o.extend(s,"duration",0),n.resolve(s)}e=o.wrap(e);var a=this,u=Date.now();return n(function(r,n){function s(t,s,h){function d(e){var r=s?{success:!1}:p[t];s&&(p[t]=r,l.push(t)),r.result=e,r.origin={success:s,result:h}}function y(){if(!--f)if(l.length){if(l.sort(),l.length<p.length)for(var t=0,e=0;t<p.length;t++)t===l[e]?e++:p[t]={success:!0,result:p[t]};n(new i(p,l,Date.now()-u))}else o.extend(p,"duration",Date.now()-u),r(p);return null}if(e){var m,v=Date.now(),g=t?v-c:void 0;c=v;try{m=e.call(a,t,s,h,g)}catch(t){d(t)}o.isPromise(m)?m.then(y).catch(function(t){d(t),y()}):y()}else y()}var c,l=[],f=t.length,p=new Array(f);t.forEach(function(t,e){o.resolve.call(a,t,null,function(t){p[e]=t,s(e,!0,t)},function(t){p[e]={success:!1,result:t},l.push(e),s(e,!1,t)})})})}var i=t("../errors/batch");e.exports=function(t){return function(e,r){return r&&"object"==typeof r?n.call(this,e,r.cb,t):n.call(this,e,r,t)}}},{"../errors/batch":78}],83:[function(t,e,r){"use strict";function n(t,e,r,n){var o=n.promise,s=n.spex,a=n.utils;if("function"!=typeof t)return o.reject(new TypeError("Parameter 'source' must be a function."));r=r>0?parseInt(r):0,t=a.wrap(t),e=a.wrap(e);var u,c,l,f=this,p=Date.now(),h=0;return o(function(n,o){function d(y){function m(){return r===++y?v():d(y),null}function v(){n({pages:y,total:h,duration:Date.now()-p})}function g(t,e,r){t.index=y,o(new i(t,e,r,Date.now()-p))}var b=Date.now(),w=y?b-c:void 0;c=b,a.resolve.call(f,t,[y,u,w],function(r){void 0===r?v():r instanceof Array?s.batch(r).then(function(t){if(u=t,h+=t.length,e){var r,n=Date.now(),i=y?n-l:void 0;l=n;try{r=e.call(f,y,t,i)}catch(r){return void g({error:r,dest:t},4,e.name)}a.isPromise(r)?r.then(m).catch(function(r){g({error:r,dest:t},3,e.name)}):m()}else m();return null}).catch(function(t){g({error:t},0)}):g({error:new Error("Unexpected data returned from the source."),source:u},5,t.name)},function(e,r){g({error:e,source:u},r?1:2,t.name)})}d(0)})}var i=t("../errors/page");e.exports=function(t){return function(e,r,i){return r&&"object"==typeof r?n.call(this,e,r.dest,r.limit,t):n.call(this,e,r,i,t)}}},{"../errors/page":80}],84:[function(t,e,r){"use strict";function n(t,e,r,n,o){var s=o.promise,a=o.utils;if("function"!=typeof t)return s.reject(new TypeError("Parameter 'source' must be a function."));r=r>0?parseInt(r):0,t=a.wrap(t),e=a.wrap(e);var u,c,l,f=this,p=[],h=Date.now();return s(function(o,d){function y(m){function v(t){r===++m?g():t?y(m):s.resolve().then(function(){return y(m),null})}function g(){var t=Date.now()-h;n?a.extend(p,"duration",t):p={total:m,duration:t},o(p)}function b(t,e,r){t.index=m,d(new i(t,e,r,Date.now()-h))}var w=Date.now(),_=m?w-c:void 0;c=w,a.resolve.call(f,t,[m,u,_],function(t,r){if(void 0===(u=t))g();else if(n&&p.push(u),e){var i,o=Date.now(),s=m?o-l:void 0;l=o;try{i=e.call(f,m,u,s)}catch(t){return void b({error:t,dest:u},3,e.name)}a.isPromise(i)?i.then(function(){return v(!0),null}).catch(function(t){b({error:t,dest:u},2,e.name)}):v(r)}else v(r)},function(e,r){b({error:e,source:u},r?0:1,t.name)})}y(0)})}var i=t("../errors/sequence");e.exports=function(t){return function(e,r,i,o){return r&&"object"==typeof r?n.call(this,e,r.dest,r.limit,r.track,t):n.call(this,e,r,i,o,t)}}},{"../errors/sequence":81}],85:[function(t,e,r){"use strict";var n={read:t("./read")};e.exports=function(t){var e={read:n.read(t)};return Object.freeze(e),e}},{"./read":86}],86:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o=i.promise,s=i.utils;if(!s.isReadableStream(t))return o.reject(new TypeError("Readable stream is required."));if("function"!=typeof e)return o.reject(new TypeError("Invalid stream receiver."));n=n>0?parseInt(n):null,e=s.wrap(e);var a,u,c,l,f=this,p=0,h=0,d=Date.now(),y=0;return o(function(i,o){function m(){u=!0,w()}function v(){r||_()}function g(){_()}function b(t){j(t)}function w(){if(u&&!l&&!c){u=!1,c=!0;var r,i=[];do{(r=t.read(n))&&(i.push(r),h+=r.length||0,p++)}while(r);if(i.length){var o,d=Date.now(),m=y?d-a:void 0;a=d;try{o=e.call(f,y++,i,m)}catch(t){return void j(t)}s.isPromise(o)?o.then(function(){return c=!1,w(),null}).catch(function(t){j(t)}):(c=!1,w())}else c=!1}}function _(){x(),i({calls:y,reads:p,length:h,duration:Date.now()-d})}function j(t){l=!0,x(),o(t)}function x(){t.removeListener("readable",m),t.removeListener("close",g),t.removeListener("error",b),t.removeListener("end",v)}t.on("readable",m),t.on("end",v),t.on("close",g),t.on("error",b)})}e.exports=function(t){return function(e,r,i,o){return i&&"object"==typeof i?n.call(this,e,r,i.closable,i.readSize,t):n.call(this,e,r,i,o,t)}}},{}],87:[function(t,e,r){"use strict";function n(t){var e={},r=i(t),n={spex:e,promise:r,utils:o.utils(r)};return e.errors=o.errors,e.batch=o.batch(n),e.page=o.page(n),e.sequence=o.sequence(n),e.stream=o.stream(n),n.utils.extend(e,"$p",r),Object.freeze(e),e}function i(t){if(t){var e;if(t instanceof n.PromiseAdapter)return e=function(e){return t.create(e)},e.resolve=t.resolve,e.reject=t.reject,e;var r=typeof t;if("function"===r||"object"===r){var i="function"==typeof t.Promise?t.Promise:t;if(e=function(t){return new i(t)},e.resolve=i.resolve,e.reject=i.reject,"function"==typeof e.resolve&&"function"==typeof e.reject)return e}}throw new TypeError("Invalid promise library specified.")}var o={utils:t("./utils"),batch:t("./ext/batch"),page:t("./ext/page"),sequence:t("./ext/sequence"),stream:t("./ext/stream"),errors:t("./errors")};n.PromiseAdapter=t("./adapter"),Object.freeze(n),e.exports=n},{"./adapter":77,"./errors":79,"./ext/batch":82,"./ext/page":83,"./ext/sequence":84,"./ext/stream":85,"./utils":88}],88:[function(t,e,r){"use strict";var n=t("./static");e.exports=function(t){function e(e){return function(){function r(e){return e.done?t.resolve(e.value):t.resolve(e.value).then(function(t){return r(n.next(t))},function(t){return r(n.throw(t))})}var n=e.apply(this,arguments);return r(n.next())}}var r={formatError:n.formatError,isPromise:n.isPromise,isReadableStream:n.isReadableStream,messageGap:n.messageGap,extend:n.extend,resolve:function(t,n,i,o){function s(){for(;"function"==typeof t;){"GeneratorFunction"===t.constructor.name&&(t=e(t));try{t=n?t.apply(a,n):t.call(a)}catch(t){return void o(t,!1)}}r.isPromise(t)?t.then(function(e){return u=!0,t=e,s(),null}).catch(function(t){o(t,!0)}):i(t,u)}var a=this,u=!1;s()},wrap:function(t){return"function"==typeof t?"GeneratorFunction"===t.constructor.name?e(t):t:null}};return r}},{"./static":89}],89:[function(t,e,r){"use strict";function n(t){return Array(1+4*t).join(" ")}var i=t("stream"),o=t("util");e.exports={formatError:function(t,e){var r=["BatchError","PageError","SequenceError"],i=o.inspect(t);if(t instanceof Error)if(-1===r.indexOf(t.name)){var s=n(e);i=i.split("\n").map(function(t,e){return(e?s:"")+t}).join("\n")}else i=t.toString(e);return i},isPromise:function(t){return t&&"function"==typeof t.then},isReadableStream:function(t){return t instanceof i.Stream&&"function"==typeof t._read&&"object"==typeof t._readableState},messageGap:n,extend:function(t,e,r){Object.defineProperty(t,e,{value:r,configurable:!1,enumerable:!1,writable:!1})}}},{stream:void 0,util:void 0}],90:[function(t,e,r){var n=t("through"),i=t("string_decoder").StringDecoder;e.exports=function(t,e,r){function o(t,r){if(e){try{r=e(r)}catch(e){return t.emit("error",e)}void 0!==r&&t.queue(r)}else t.queue(r)}function s(e,r){var n=((null!=u?u:"")+r).split(t);u=n.pop(),c&&u.length>c&&e.emit("error",new Error("maximum buffer reached"));for(var i=0;i<n.length;i++)o(e,n[i])}var a=new i,u="",c=r&&r.maxLength,l=!r||!1!==r.trailing;return"function"==typeof t&&(e=t,t=null),t||(t=/\r?\n/),n(function(t){s(this,a.write(t))},function(){a.end&&s(this,a.end()),l&&null!=u&&o(this,u),this.queue(null)})}},{string_decoder:void 0,through:91}],91:[function(t,e,r){function n(t,e,r){function n(){for(;u.length&&!l.paused;){var t=u.shift();if(null===t)return l.emit("end");l.emit("data",t)}}function o(){l.writable=!1,e.call(l),!l.readable&&l.autoDestroy&&l.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,a=!1,u=[],c=!1,l=new i;return l.readable=l.writable=!0,l.paused=!1,l.autoDestroy=!(r&&!1===r.autoDestroy),l.write=function(e){return t.call(this,e),!l.paused},l.queue=l.push=function(t){return c?l:(null===t&&(c=!0),u.push(t),n(),l)},l.on("end",function(){l.readable=!1,!l.writable&&l.autoDestroy&&process.nextTick(function(){l.destroy()})}),l.end=function(t){if(!s)return s=!0,arguments.length&&l.write(t),o(),l},l.destroy=function(){if(!a)return a=!0,s=!0,u.length=0,l.writable=l.readable=!1,l.emit("close"),l},l.pause=function(){if(!l.paused)return l.paused=!0,l},l.resume=function(){return l.paused&&(l.paused=!1,l.emit("resume")),n(),l.paused||l.emit("drain"),l},l}var i=t("stream");e.exports=n,n.through=n},{stream:void 0}],92:[function(t,e,r){e.exports=function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},{}]},{},[1])(1)});